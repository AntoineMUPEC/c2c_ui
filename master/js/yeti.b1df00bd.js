(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["yeti"],{"03a8":function(e,t,a){},"07da":function(e,t,a){"use strict";a("1133")},"0c6e":function(e,t,a){e.exports=a.p+"img/logo-ensg.12db1227.avif"},1133:function(e,t,a){},"28ff":function(e,t,a){"use strict";a("64ac")},"2d99":function(e,t,a){"use strict";a("5a2e")},"3a24":function(e,t,a){},"3d7f":function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.1d7d0bdd.avif"},"3f5d":function(e,t,a){},"46e4":function(e,t,a){"use strict";a("69fe")},"5a2e":function(e,t,a){},"5a42":function(e,t,a){"use strict";a("6ab9")},"60a4":function(e,t,a){e.exports=a.p+"img/levels-danger.ab1771e4.svg"},"64ac":function(e,t,a){},"69fe":function(e,t,a){},"6ab9":function(e,t,a){},"6d23":function(e,t,a){},"6f59":function(e,t,a){"use strict";a("ae47")},"74da":function(e,t,a){"use strict";a("9f0d")},"7c4c":function(e,t,a){"use strict";a("3f5d")},9209:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("html-header",{attrs:{title:"Yeti"}}),e._v(" "),a("div",{staticClass:"box"},[a("h1",{staticClass:"title is-1"},[a("div",{staticClass:"yeti-icon is-inline-block"},[a("icon-yeti")],1),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("YETI - A preparation tool for your outing")])])]),e._v(" "),a("div",{staticClass:"yeti-app"},[e.showDisclaimer?a("div",{staticClass:"box yeti-overlay"},[a("yeti-article",{staticClass:"yeti-article--disclaimer",attrs:{article:e.articles.disclaimer}}),e._v(" "),a("form",{attrs:{action:"#"},on:{submit:e.onSubmitDisclaimer}},[a("input-checkbox",{directives:[{name:"translate",rawName:"v-translate"}],model:{value:e.checkDisclaimer,callback:function(t){e.checkDisclaimer=t},expression:"checkDisclaimer"}},[e._v("\n          I read and understood the interest and limitations of YETI\n        ")]),e._v(" "),a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{disabled:!e.checkDisclaimer}},[e._v("Launch YETI")])],1)],1):e._e(),e._v(" "),"faq"===e.$route.params.page?a("div",{staticClass:"box yeti-overlay"},[a("p",[a("router-link",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{to:"."}},[e._v("Go back to YETI")])],1),e._v(" "),a("yeti-article",{staticClass:"yeti-article--disclaimer",attrs:{article:e.articles.disclaimer}}),e._v(" "),a("yeti-article",{attrs:{article:e.articles.faq}})],1):e._e(),e._v(" "),a("div",{staticClass:"columns yeti-content"},[a("div",{staticClass:"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container"},[a("div",{staticClass:"columns mb-0 yeti-columns--reverse is-mobile"},[a("ul",{staticClass:"column is-narrow pb-0"},[a("li",[a("router-link",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-block yetitabs-link",attrs:{to:e.$route.fullPath+"/faq"}},[e._v("\n                FAQ?\n              ")])],1)]),e._v(" "),a("tabs",{attrs:{tabs:e.tabs}})],1),e._v(" "),a("div",{staticClass:"box"},[a("panel",{ref:"panel0",staticClass:"is-relative",attrs:{index:0}},[a("validation-button",{staticClass:"is-hidden-mobile yeti-validation--top",attrs:{"current-error":e.currentError,loading:e.promise,tabindex:"-1"},on:{click:e.compute}}),e._v(" "),a("sub-panel-bra"),e._v(" "),a("sub-panel-methods",{on:{"warn-about-method-bra":e.warnAboutMethodBra}}),e._v(" "),a("validation-button",{directives:[{name:"show",rawName:"v-show",value:e.method.type,expression:"method.type"}],staticClass:"yeti-validation--bottom",attrs:{"current-error":e.currentError,loading:e.promise},on:{click:e.compute}})],1),e._v(" "),a("panel",{ref:"panel1",attrs:{index:1}},[a("sub-panel-course")],1)],1),e._v(" "),e._m(0)]),e._v(" "),a("yeti-map",{ref:"map",attrs:{"yeti-data":e.yetiData,"yeti-extent":e.yetiExtent}})],1)])],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box yeti-logos"},[i("div",{staticClass:"columns is-mobile is-vcentered"},[i("div",{staticClass:"column has-text-centered"},[i("a",{attrs:{href:"http://www.ensg.eu"}},[i("picture",[i("source",{attrs:{srcset:a("e004"),type:"image/webp"}}),e._v(" "),i("source",{attrs:{srcset:a("0c6e"),type:"image/avif"}}),e._v(" "),i("img",{attrs:{src:a("aa66"),alt:"Logo ENSG",width:"120",loading:"lazy"}})])])]),e._v(" "),i("div",{staticClass:"column has-text-centered"},[i("a",{attrs:{href:"https://www.petzl.com/fondation/fondation-petzl?language=fr"}},[i("picture",[i("source",{attrs:{srcset:a("d315"),type:"image/webp"}}),e._v(" "),i("source",{attrs:{srcset:a("3d7f"),type:"image/avif"}}),e._v(" "),i("img",{attrs:{src:a("fc52"),alt:"Logo Fondation Petzl",width:"90",loading:"lazy"}})])])])])])}],n=(a("ddb0"),a("bc3a")),s=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.document?a("div",{staticClass:"yeti-article"},[a("sub-panel-title",[e._v(e._s(e.title))]),e._v(" "),a("markdown-section",{attrs:{document:e.document,field:e.fields.description,"hide-title":""}})],1):e._e()},l=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns is-mobile"},[a("div",{staticClass:"column"},[a("h2",{staticClass:"title is-3"},[e._t("default")],2)])])},c=[],h=(a("e375"),a("2877")),d={},v=Object(h["a"])(d,u,c,!1,null,"43c30758",null),m=v.exports,p=a("188b"),f=a("25c4"),g=a("7306"),y={components:{SubPanelTitle:m,MarkdownSection:g["a"]},props:{article:{type:Object,required:!0}},data(){return{promise:null}},computed:{id(){return this.article.id},title(){return this.article.title},document(){var e,t;return null!==(e=null===(t=this.promise)||void 0===t?void 0:t.data)&&void 0!==e?e:null},fields(){return f["a"].objectDefinitions.article.fields},lang(){return this.$language.current}},watch:{lang(){this.cookDocument()}},mounted(){this.cookDocument()},methods:{cookDocument(){p["a"].article.getCooked(this.id,this.$language.current).then(e=>{this.promise=e})}}},w=y,_=(a("e469"),Object(h["a"])(w,o,l,!1,null,"62129744",null)),b=_.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"yeti-panel",attrs:{role:"tabpanel",id:"panel"+e.index,"aria-labelledby":"tab"+e.index,hidden:e.activeTab!==e.index}},[e._t("default")],2)},S=[],E=(a("e9c4"),a("2b0e"));let k={API_URL:"https://api.ensg.eu/",DANGER_MAX_WHEN_MRD:3,VALID_MINIMUM_MAP_ZOOM:13,activeTab:0,bra:{high:null,low:null,altiThreshold:null,isDifferent:!1},method:{type:null,orientation:[],potentialDanger:null,wetSnow:!1,groupSize:1},areas:[],areaOk:!0,showAreas:!1,features:[],featuresTitle:"New route",featuresLength:0,mountains:{all:[],visible:[]},bulletinsLoaded:!1,showAvalancheBulletins:!1,mapZoom:0,drawingMode:!1,validSimplifyTolerance:!1},C=E["default"].observable(JSON.parse(JSON.stringify(k)));var M,L,N=new E["default"]({computed:{DANGER_MAX_WHEN_MRD(){return C.DANGER_MAX_WHEN_MRD},VALID_MINIMUM_MAP_ZOOM(){return C.VALID_MINIMUM_MAP_ZOOM},activeTab(){return C.activeTab},bra(){return C.bra},method(){return C.method},areas(){return C.areas},areaOk(){return C.areaOk},showAreas(){return C.showAreas},features(){return C.features},hasFeatures(){return!!C.features.length},featuresTitle(){return C.featuresTitle},featuresLength(){return C.featuresLength},mountains(){return C.mountains},bulletinsLoaded(){return C.bulletinsLoaded},showAvalancheBulletins(){return C.showAvalancheBulletins},mapZoom(){return C.mapZoom},drawingMode(){return C.drawingMode},validSimplifyTolerance(){return C.validSimplifyTolerance}},methods:{setActiveTab(e){C.activeTab=e},setBra(e,t){C.bra[e]=t},setMethod(e,t){C.method[e]=t},setAreas(e){C.areas=e},setAreaOk(e){C.areaOk=e},setShowAreas(e){C.showAreas=e},setFeatures(e){C.features=e},setFeaturesTitle(e){C.featuresTitle=e},setFeaturesLength(e){C.featuresLength=e},setAllMountains(e){C.mountains.all=e},setVisibleMountains(e){C.mountains.visible=e},setShowAvalancheBulletins(e){C.showAvalancheBulletins=e},setBulletinsLoaded(e){C.bulletinsLoaded=e},setMapZoom(e){C.mapZoom=e},setDrawingMode(e){C.drawingMode=e},setValidSimplifyTolerance(e){C.validSimplifyTolerance=e,e?C.drawingMode&&(C.tmpDrawingMode=!0,this.setDrawingMode(!1)):C.tmpDrawingMode&&(this.setDrawingMode(!0),delete C.tmpDrawingMode)},setDefault(){for(let e in C)if("object"!==typeof C[e]||Array.isArray(C[e]))C[e]=k[e];else for(let t in C[e])C[e][t]=k[e][t]},fetchApi(e){return s.a.get(C.API_URL+e)},fetchAreas(){return this.fetchApi("yeti-extent")},fetchMountains(){return this.fetchApi("zonesbra")},fetchBulletins(){return this.fetchApi("bra")}}}),D=N,F=Object(h["a"])(D,M,L,!1,null,null,null),P=F.exports,A={props:{index:{type:Number,required:!0}},computed:{activeTab(){return P.activeTab}}},O=A,I=(a("07da"),Object(h["a"])(O,x,S,!1,null,"3da9b1ce",null)),T=I.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"yeti-subpanel"},[a("sub-panel-title",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger level")])]),e._v(" "),a("div",{staticClass:"columns is-mobile"},[a("div",{staticClass:"column"},[a("div",{staticClass:"inputs-bra",class:{"inputs-bra-different":e.bra.isDifferent}},[a("svg",{attrs:{viewBox:"0 0 100 100",width:"120",height:"120"}},[a("polygon",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},attrs:{points:"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 "}}),e._v(" "),a("line",{directives:[{name:"show",rawName:"v-show",value:e.bra.isDifferent,expression:"bra.isDifferent"}],staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},attrs:{x1:"10",y1:"61.5",x2:"90",y2:"61.5"}})]),e._v(" "),a("div",{staticClass:"input-bra-high select is-small"},[a("select",{attrs:{id:"selectBra","aria-label":e.$gettext("High danger level from the avalanche bulletin")},domProps:{value:e.bra.high},on:{change:function(t){return e.onChange(t,"high")}}},[a("option",{attrs:{selected:""},domProps:{value:null}}),e._v(" "),a("option",{domProps:{value:1}},[e._v("1")]),e._v(" "),a("option",{domProps:{value:2}},[e._v("2")]),e._v(" "),a("option",{domProps:{value:3}},[e._v("3")]),e._v(" "),a("option",{domProps:{value:4}},[e._v("4")])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.bra.isDifferent,expression:"bra.isDifferent"}],staticClass:"input-bra-threshold control"},[a("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"inputThreshold"}},[e._v("Altitude")]),e._v(" "),a("input",{staticClass:"input is-small",attrs:{id:"inputThreshold",type:"number",min:"0",max:"4800",step:"100",maxlength:"4"},domProps:{value:e.bra.altiThreshold},on:{change:function(t){return e.onChange(t,"altiThreshold")}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.bra.isDifferent,expression:"bra.isDifferent"}],staticClass:"input-bra-low select is-small"},[a("select",{attrs:{"aria-label":"$gettext('Low danger level from the avalanche bulletin')"},domProps:{value:e.bra.low},on:{change:function(t){return e.onChange(t,"low")}}},[a("option",{attrs:{selected:""},domProps:{value:null}}),e._v(" "),a("option",{domProps:{value:1}},[e._v("1")]),e._v(" "),a("option",{domProps:{value:2}},[e._v("2")]),e._v(" "),a("option",{domProps:{value:3}},[e._v("3")]),e._v(" "),a("option",{domProps:{value:4}},[e._v("4")])])])]),e._v(" "),a("div",[a("input-checkbox",{staticClass:"control--bradifferent",attrs:{value:e.bra.isDifferent},on:{input:function(t){return e.onChange(t,"isDifferent")}}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Different high/low danger?")])])],1)])]),e._v(" "),a("dropdown-content",{scopedSlots:e._u([{key:"content",fn:function(){return[e.showVisibleMountains?a("div",[a("div",{staticClass:"mb-2"},[a("input-checkbox",{attrs:{value:e.showAvalancheBulletins},on:{input:e.onShowAvalancheBulletins}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Visible on map")])])],1),e._v(" "),a("dl",e._l(e.visibleMountains,(function(t,i){return a("div",{key:i},[a("dt",[e._v("\n              "+e._s(i)+"\n            ")]),e._v(" "),a("div",{staticClass:"yetimountains-list px-4 py-3"},e._l(t,(function(t){return a("dd",{key:t.name},[a("a",{attrs:{href:t.urls[0].url,target:"_blank"}},[a("fa-icon",{attrs:{icon:"external-link-alt"}}),e._v("\n                  "+e._s(t.name)+"\n                ")],1)])})),0)])})),0)]):a("div",[a("info",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"column"},[e._v("Massifs could not be loaded")])],1)]},proxy:!0}])},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Avalanche bulletins")]),e._v(" "),e.showVisibleMountains?a("counter",[e._v(e._s(e.countVisibleMountains))]):e._e(),e._v(" "),e.showAvalancheBulletins?a("fa-icon",{staticClass:"has-text-primary",attrs:{icon:"check-circle",title:e.$gettext("Visible on map")}}):e._e()],1)],1)},R=[],B=(a("13d5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"yeti-counter",class:{"has-background-primary":e.isPrimary}},[e._t("default")],2)}),z=[],G={props:{isPrimary:{type:Boolean,default:!1}}},V=G,j=(a("cb04"),Object(h["a"])(V,B,z,!1,null,"2cdf4d2c",null)),Z=j.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dropdown-content"},[a("div",[a("h3",{staticClass:"dropdown-content-title",class:{"is-open":e.opened},on:{click:e.switchOpen}},[e._t("default"),e._v(" "),a("fa-icon",{staticClass:"dropdown-content-arrow is-size-6 is-pulled-right has-cursor-pointer no-print",attrs:{icon:"angle-down",rotation:e.opened?180:void 0}})],2)]),e._v(" "),e.opened?a("div",{staticClass:"p-3"},[e._t("content")],2):e._e()])},Y=[],U={data(){return{opened:!1}},methods:{switchOpen(){this.opened=!this.opened}}},W=U,K=(a("5a42"),Object(h["a"])(W,q,Y,!1,null,"6d88c66c",null)),X=K.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"info-text mt-3 mb-3 px-3",class:"is-"+e.type},[a("fa-icon",{staticClass:"info-icon mt-1 ml-1",attrs:{icon:e.icon}}),e._v(" "),a("div",{staticClass:"info-content"},[e._t("default")],2)],1)},J=[],Q={props:{type:{type:String,default:"info"}},data(){return{icons:{info:"info-circle",warning:"exclamation-circle",help:"question-circle"}}},computed:{icon(){return this.icons[this.type]}}},ee=Q,te=(a("7c4c"),Object(h["a"])(ee,H,J,!1,null,"213fc47c",null)),ae=te.exports,ie={components:{Counter:Z,DropdownContent:X,Info:ae,SubPanelTitle:m},data(){return{showMountainsList:!1}},computed:{bra(){return P.bra},visibleMountains(){return P.mountains.visible},showAvalancheBulletins(){return P.showAvalancheBulletins},showVisibleMountains(){return this.countVisibleMountains>=0},countVisibleMountains(){return this.visibleMountains?Object.values(this.visibleMountains).reduce((e,t)=>e+t.length,0):-1}},watch:{"bra.isDifferent":"checkBraIsDifferent"},methods:{onChange(e,t){const a="isDifferent"===t?e:e.target.value;P.setBra(t,a)},checkBraIsDifferent(){this.bra.isDifferent||(P.setBra("low",null),P.setBra("altiThreshold",null))},onShowAvalancheBulletins(e){P.setShowAvalancheBulletins(e)}}},re=ie,ne=(a("ff77"),Object(h["a"])(re,$,R,!1,null,"7b4246c9",null)),se=ne.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"yeti-subpanel"},[a("sub-panel-title",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Route")])]),e._v(" "),e.features.length?a("div",[a("div",{staticClass:"columns is-mobile"},[a("div",{staticClass:"column"},[a("p",{staticClass:"features-title"},[a("icon-route",{staticClass:"icon document-icon"}),e._v(" "),a("fa-icon",{staticClass:"icon edit-icon",attrs:{icon:"pen"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.hasFeaturesTitle,expression:"!hasFeaturesTitle"},{name:"translate",rawName:"v-translate"}],staticClass:"features-title-text features-title-placeholder",on:{click:e.onEditNewFeaturesTitle}},[e._v("\n            Add title…\n          ")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.hasFeaturesTitle,expression:"hasFeaturesTitle"}],ref:"featuresTitle",staticClass:"features-title-text features-title-content",attrs:{tabindex:"0",contenteditable:"",spellcheck:"false"},on:{blur:e.onEditFeaturesTitle,keypress:function(e){if(!e.type.indexOf("key")&&13!==e.keyCode)return null;e.preventDefault()}}},[e._v(e._s(e.featuresTitle))])],1)]),e._v(" "),a("div",{staticClass:"column is-narrow"},[a("button",{staticClass:"button is-secondary is-small",on:{click:e.onRemoveFeatures}},[a("fa-icon",{staticClass:"trash-icon",attrs:{icon:"trash"}}),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Delete route")])],1)])]),e._v(" "),a("div",{staticClass:"ml-5 mb-5"},[a("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-size-7 is-italic mb-1 has-text-grey"},[e._v("Lines chunks")]),e._v(" "),a("features-list",{attrs:{features:e.features}})],1),e._v(" "),a("simplify-tool",{ref:"simplifyTool"}),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Drawing tips")]),e._v(" "),a("ul",{staticClass:"content-ul"},[a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[e._v("Draw")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("new lines chunks")])]),e._v(" "),a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[e._v("Delete")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("last point with the Backspace key")])])]),e._v(" "),a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("On a drawn line")]),e._v(" "),a("ul",{staticClass:"content-ul"},[a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[e._v("Edit")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("points by moving them")])]),e._v(" "),a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{"translate-context":"yeti"}},[e._v("Create")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("a new point on an existing line")])]),e._v(" "),a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Delete a point")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("with Alt + clic")])])]),e._v(" "),a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("From the interface")]),e._v(" "),a("ul",{staticClass:"content-ul"},[a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Delete a line chunk")])]),e._v(" "),a("li",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Delete route")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("to start or load a new one")])])])]),e._v(" "),a("sub-panel-title",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Export")])]),e._v(" "),a("div",{staticClass:"columns is-vcentered is-mobile"},[a("div",{staticClass:"column"},[a("ul",{staticClass:"form-export"},e._l(e.formats,(function(t){return a("li",{key:t,staticClass:"control is-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.format,expression:"format"}],staticClass:"is-checkradio is-primary",attrs:{id:"format"+t,type:"radio",name:"exportFormat"},domProps:{value:t,checked:e._q(e.format,t)},on:{change:function(a){e.format=t}}}),e._v(" "),a("label",{attrs:{for:"format"+t}},[e._v(e._s(t))])])})),0)]),e._v(" "),a("div",{staticClass:"column is-narrow"},[a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-disabled":e.validSimplifyTolerance},on:{click:e.downloadCourse}},[e._v("\n          Export route\n        ")])])])],1):a("div",[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("No route right now")]),e._v(" "),a("div",{staticClass:"load-gpx"},[a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":e.loading},attrs:{disabled:e.loading},on:{click:e.onLoadGpx}},[e._v("\n        Upload a GPS track\n      ")]),e._v(" "),a("div",{staticClass:"control upload-button"},[a("input",{ref:"gpxFileInput",attrs:{type:"file",accept:".gpx"},on:{change:e.uploadGpx}})]),e._v(" "),a("info",{staticClass:"mt-5",attrs:{type:"help"}},[a("p",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("To draw (and edit) directly on the map")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("you need to activate drawing mode")])])])],1)])],1)},le=[],ue=a("b166"),ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"featureslist"},e._l(e.features,(function(t,i){return a("li",{key:i,staticClass:"featureslist-item tag",on:{mouseenter:function(a){return e.showFeature(t)},mouseleave:function(a){return e.hideFeature(t)}}},[a("span",[e._v(e._s(e.nbPointsOnFeature(t))+" points")]),e._v(" "),a("button",{staticClass:"delete is-small",on:{click:function(a){return e.removeFeature(t)}}},[e._v("x")])])})),0)},he=[],de={props:{features:{type:Array,required:!0}},methods:{removeFeature(e){P.$emit("removeFeature",e)},showFeature(e){e.setStyle(e.get("highlightedStyle"))},hideFeature(e){e.setStyle(e.get("normalStyle"))},nbPointsOnFeature(e){return e.getGeometry().getCoordinates().length}}},ve=de,me=(a("9d66"),Object(h["a"])(ve,ce,he,!1,null,"77f7ceed",null)),pe=me.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dropdown-content",{staticClass:"mb-5",scopedSlots:e._u([{key:"content",fn:function(){return[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Select tolerance (preview result on map)")]),e._v(" "),a("div",{staticClass:"is-flex is-justify-content-center is-flex-wrap-wrap mt-3 mb-4"},e._l(e.tolerances,(function(t,i){return a("div",{key:t,staticClass:"mb-2 is-flex-grow-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.toleranceDistance,expression:"toleranceDistance"}],staticClass:"is-checkradio is-primary",attrs:{id:"tolerance"+i,type:"radio",name:"tolerances"},domProps:{value:t,checked:e._q(e.toleranceDistance,t)},on:{change:[function(a){e.toleranceDistance=t},e.onPreviewSimplify]}}),e._v(" "),a("label",{staticClass:"mr-0",attrs:{for:"tolerance"+i}},[e._v(e._s(e.tolerancesText[i]))])])})),0),e._v(" "),a("div",{staticClass:"is-flex is-justify-content-flex-end is-align-items-center"},[a("div",[a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button",attrs:{disabled:!e.validToleranceDistance},on:{click:e.initialize}},[e._v("Cancel")]),e._v(" "),a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",attrs:{disabled:!e.validToleranceDistance},on:{click:e.onSimplify}},[e._v("\n          Simplify\n        ")])])]),e._v(" "),a("info",[e._v("\n      "+e._s(e.featuresLength)+" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("points")]),e._v(" "),e.validToleranceDistance?a("strong",[e._v("\n        ("),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("after:")]),e._v(" "+e._s(e.featuresSimplifiedLength)+" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("points")]),e._v(")\n      ")]):e._e()]),e._v(" "),e.validToleranceDistance?a("info",{attrs:{type:"warning"}},[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Be careful,")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        this is a preview. Geometry is not simplified yet. Map interactions and export are disabled.\n      ")])]):e._e(),e._v(" "),a("info",{staticClass:"mt-5",attrs:{type:"help"}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Create a simplified version of the geometry by reducing the amount of points")])])]},proxy:!0}])},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Simplify")]),e._v(" "),e.validToleranceDistance?a("fa-icon",{staticClass:"has-text-danger ml-1",attrs:{icon:"exclamation-circle",title:e.$gettext("Not simplified yet")}}):e._e()],1)},ge=[],ye={components:{DropdownContent:X,Info:ae},data(){return{tolerances:[0,25,50,100,200],tolerancesText:[this.$gettext("No"),"25m","50m","100m","200m"],toleranceDistance:0}},computed:{features(){return P.features},featuresLength(){return P.featuresLength},featuresSimplifiedLength(){return this.features.map(e=>e.getGeometry().getCoordinates().length).reduce((e,t)=>e+t)},validToleranceDistance(){return 0!==this.toleranceDistance}},watch:{toleranceDistance(){this.validToleranceDistance?P.setValidSimplifyTolerance(!0):P.setValidSimplifyTolerance(!1)}},destroyed(){P.setValidSimplifyTolerance(!1)},methods:{onPreviewSimplify(){P.$emit("previewSimplify",this.toleranceDistance)},onSimplify(){P.$emit("simplify"),this.initialize()},initialize(){this.toleranceDistance=0,this.onPreviewSimplify()}}},we=ye,_e=Object(h["a"])(we,fe,ge,!1,null,null,null),be=_e.exports,xe=a("dac7"),Se=a("9944"),Ee={components:{FeaturesList:pe,Info:ae,SimplifyTool:be,SubPanelTitle:m},data(){return{newFeaturesTitle:!1,loading:!1,formats:["GPX","KML"],format:"GPX"}},computed:{features(){return P.features},featuresTitle(){return P.featuresTitle},validSimplifyTolerance(){return P.validSimplifyTolerance},hasFeaturesTitle(){return!(!this.featuresTitle.length&&!this.newFeaturesTitle)}},methods:{onEditFeaturesTitle(e){e.target.innerText.length||(this.newFeaturesTitle=!1),P.setFeaturesTitle(e.target.innerText)},onEditNewFeaturesTitle(){this.newFeaturesTitle=!0,this.$nextTick(()=>{this.$refs.featuresTitle.focus()})},onLoadGpx(){this.$refs.gpxFileInput.click()},onRemoveFeatures(){confirm(this.$gettext("Confirm delete"))&&(P.$emit("removeFeatures"),this.$refs.simplifyTool.initialize())},uploadGpx(e){this.loading=!0;const t=new FileReader;t.onload=()=>{this.loading=!1,P.$emit("gpx",t.result)},t.readAsText(e.target.files[0]),this.$refs.gpxFileInput.value="",P.$emit("gpx",null)},downloadCourse(){if(this.validSimplifyTolerance)return window.alert("Export is disabled. You must confirm simplified geometry first.");"GPX"===this.format?this.downloadFeatures(new xe["a"].format.GPX,".gpx","application/gpx+xml"):"KML"===this.format&&this.downloadFeatures(new xe["a"].format.KML,".kml","application/vnd.google-earth.kml+xml")},downloadFeatures(e,t,a){const i=this.features;i[0].set("name",this.featuresTitle);const r=this.setFilename(t),n=e.writeFeatures(i,{featureProjection:"EPSG:3857"});Se["a"].download(n,r,a+";charset=utf-8")},setFilename(e){return Object(ue["a"])(new Date,"yyyy-MM-dd_HH-mm-ss")+e}}},ke=Ee,Ce=(a("e0a2"),Object(h["a"])(ke,oe,le,!1,null,"3739719b",null)),Me=Ce.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"yeti-subpanel"},[a("sub-panel-title",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Methods")])]),e._v(" "),a("div",{staticClass:"columns is-mobile yetitabs"},e._l(Object.keys(e.methods),(function(t){return a("div",{key:t,staticClass:"column yetitab"},[a("div",{staticClass:"control yetitab-control",class:{"yetitab-control--selected":e.method.type===t}},[a("input",{staticClass:"is-checkradio is-primary",attrs:{id:"c2c-method-"+t,type:"radio",name:"method",disabled:"mrd"===t&&(4==e.bra.high||4==e.bra.low)},domProps:{value:t,checked:t===e.method.type},on:{change:function(t){return e.onChange(t,"type")}}}),e._v(" "),a("label",{staticClass:"yetitab-label",attrs:{for:"c2c-method-"+t},on:{click:function(a){return e.warnAboutMethodBra(t)}}},[e._v("\n          "+e._s(e.methods[t][0])+"\n          "),a("span",{staticClass:"is-size-7",class:{"has-text-grey":t!==e.method.type}},[e._v(e._s(e.methods[t][1]))])])])])})),0),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"mrd"==e.method.type,expression:"method.type == 'mrd'"}]},[a("p",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("With the")]),e._v(" "),a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Beginner Reduction Method")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin.\n      ")])]),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly\n        important. No parameter other than the danger level is specified. Orientation is ignored.\n      ")])]),e._v(" "),a("table",{staticClass:"yetiform-danger"},[a("tr",[e._m(0),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - low")])]),e._v(" "),a("td",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 40°")])]),e._v(" "),a("tr",[e._m(1),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - moderate")])]),e._v(" "),a("td",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 35°")])]),e._v(" "),a("tr",{staticClass:"multiline"},[e._m(2),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - considerable")])]),e._v(" "),a("td",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 30°")]),e._v(" "),a("br"),e._v(" "),a("small",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("including dominant slopes")])])]),e._v(" "),a("tr",[e._m(3),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - high to very high")])]),e._v(" "),a("td",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I choose to cancel the outing")])])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"mre"==e.method.type,expression:"method.type == 'mre'"}]},[a("p",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("With the")]),e._v(" "),a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Elementary Reduction Method")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin.\n      ")])]),e._v(" "),a("input-orientation",{staticClass:"has-text-centered mb-2",attrs:{value:e.method.orientation},on:{input:function(t){return e.onChange(t,"orientation")}}}),e._v(" "),0!=e.method.orientation.length?a("info",[a("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr1"},[e._v("Orientations")]),e._v(": "+e._s(e.method.orientation.join(", "))+"\n    ")]):a("info",{attrs:{type:"warning"}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr2"},[e._v("No orientation selected")])]),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most\n        critical sectors presenting an increased risk.\n      ")])]),e._v(" "),a("table",{staticClass:"yetiform-danger"},[a("tr",{staticClass:"multiline"},[e._m(4),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - low")])]),e._v(" "),a("td",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Stay careful while skiing")]),e._v(" "),a("br"),e._v(" "),a("small",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("risk of a rough fall on hard snow")])])]),e._v(" "),a("tr",[e._m(5),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - moderate")])]),e._v(" "),a("td",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 40°")])]),e._v(" "),a("tr",{staticClass:"multiline"},[e._m(6),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - considerable")])]),e._v(" "),a("td",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 35°")]),e._v(" "),a("br"),e._v(" "),a("small",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("including dominant slopes")])])]),e._v(" "),a("tr",{staticClass:"multiline"},[e._m(7),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - high")])]),e._v(" "),a("td",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I must not use slopes > 30°")]),e._v(" "),a("br"),e._v(" "),a("small",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("including dominant slopes")])])]),e._v(" "),a("tr",[e._m(8),e._v(" "),a("td",[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger rating - very high")])]),e._v(" "),a("td",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("I choose to cancel the outing")])])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"mrp"==e.method.type,expression:"method.type == 'mrp'"}]},[a("p",[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("With the")]),e._v(" "),a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Professional Reduction Method")]),e._v(" "),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered.\n      ")])]),e._v(" "),a("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"title is-3"},[e._v("Hazard potential")]),e._v(" "),a("ul",{staticClass:"potential-danger-labels has-text-black"},e._l(e.potentialDangerLabels,(function(t){return a("li",{key:t.text,staticClass:"potential-danger-label is-size-5",attrs:{disabled:!e.bra.high||t.text<e.potentialDangerOptions.min||t.text>e.potentialDangerOptions.max,selected:e.method.potentialDanger==t.text},on:{click:function(a){return e.onChange(t.text,"potentialDanger")}}},[a("span",{class:{"is-size-3 has-text-weight-bold":t.val}},[e._v("\n          "+e._s(t.text)+"\n        ")])])})),0),e._v(" "),e.method.potentialDanger?a("info",[a("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr1"},[e._v("Hazard potential:")]),e._v("\n      "+e._s(e.method.potentialDanger)+"\n      ("),a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger level:")]),e._v(" "+e._s(e.bra.high)+")\n    ")]):a("info",{attrs:{type:"warning"}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}],key:"tr2"},[e._v("No selected hazard potential. Set danger level first.")])]),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n        The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by\n        selecting a potential within the danger level’s corresponding range. For example: the avalanche bulletin\n        evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8.\n      ")])]),e._v(" "),a("p",[a("input-checkbox",{attrs:{value:e.method.wetSnow},on:{input:function(t){return e.onChange(t,"wetSnow")}}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Wet snow: orientation not taken into account")])])],1),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Be careful, in wet snow, no factor to reduce orientation or attendance can be applied.")])]),e._v(" "),a("h3",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"title is-3"},[e._v("Group")]),e._v(" "),a("ul",e._l(e.groupSizes,(function(t,i){return a("li",{key:i,staticClass:"control"},[a("input",{staticClass:"is-checkradio is-primary",attrs:{id:"c2c-group-size-"+i,type:"radio",name:"groupSize"},domProps:{value:t.value,checked:t.value===e.method.groupSize},on:{change:function(t){return e.onChange(t,"groupSize")}}}),e._v(" "),a("label",{attrs:{for:"c2c-group-size-"+i}},[e._v(e._s(t.text))])])})),0),e._v(" "),a("info",{attrs:{type:"help"}},[a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Group size")]),e._v(" "),a("ul",{staticClass:"content-ul"},[a("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Large group = 5 people and more")]),e._v(" "),a("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Small group = 2 to 4 people")])]),e._v(" "),a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Load shedding distance")]),e._v(" "),a("ul",{staticClass:"content-ul"},[a("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("10 meters minimum while ascending")]),e._v(" "),a("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("50 meters while descending")])])]),e._v(" "),a("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n      The “slope traveled frequently” factor is not taken into account by the application, as it is often difficult to\n      ascertain when preparing for an outing.\n    ")])],1)],1)},Ne=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level1",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level2",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level3",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level4",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level1",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level2",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level3",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level4",loading:"lazy"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td",[i("img",{attrs:{src:a("60a4")+"#level4",loading:"lazy"}})])}];const De={min:1,max:16,bra:[{min:1,max:2,val:2},{min:3,max:6,val:4},{min:6,max:12,val:8},{min:13,max:16,val:16}]};var Fe={components:{Info:ae,SubPanelTitle:m},data(){return{methods:{mrd:["MRD",this.$gettext("Beginner")],mre:["MRE",this.$gettext("Elementary")],mrp:["MRP",this.$gettext("Expert")]},groupSizes:[{value:1,text:this.$gettext("No reduction factor")},{value:2.1,text:this.$gettext("Large group with load shedding distance")},{value:2.2,text:this.$gettext("Small group without distance")},{value:3,text:this.$gettext("Small group with load shedding distance")}]}},computed:{bra(){return P.bra},method(){return P.method},potentialDangerLabels(){const e=[];for(let t=De.min;t<=De.max;t++){const a={text:t};2!==t&&4!==t&&8!==t&&16!==t||(a.val=t),e.push(a)}return e},potentialDangerOptions(){return this.bra.high?De.bra[this.bra.high-1]:{val:void 0,min:1,max:16}}},watch:{"bra.high":"onBraChange"},methods:{onChange(e,t){let a=null;a="orientation"===t||"wetSnow"===t||"potentialDanger"===t?e:e.target.value,P.setMethod(t,a)},warnAboutMethodBra(e){this.$emit("warn-about-method-bra",e)},onBraChange(){this.onChange(this.potentialDangerOptions.val,"potentialDanger")}}},Pe=Fe,Ae=(a("6f59"),Object(h["a"])(Pe,Le,Ne,!1,null,"4ec168e5",null)),Oe=Ae.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column pb-0 mb-0 tabs is-boxed yetitabs"},[a("ul",{attrs:{role:"tablist"}},e._l(e.tabs,(function(t,i){return a("li",{key:t,class:{"is-active":e.activeTab===i},attrs:{role:"presentation"}},[a("a",{ref:"tab",refInFor:!0,staticClass:"yetitabs-link",attrs:{role:"tab",href:"#panel"+i,id:"tab"+i,"aria-selected":e.activeTab===i,tabindex:e.activeTab!==i&&-1},on:{click:function(t){return t.preventDefault(),e.setActiveTab(i)},keydown:function(t){return e.setActiveTabKeyboard(t,i)}}},[e._v("\n        "+e._s(t)+"\n        "),1===i&&e.hasFeatures&&!e.validSimplifyTolerance?a("fa-icon",{staticClass:"ml-1",attrs:{icon:"check-circle"}}):e._e(),e._v(" "),1===i&&e.validSimplifyTolerance?a("fa-icon",{staticClass:"has-text-danger ml-1",attrs:{icon:"exclamation-circle",title:e.$gettext("Not simplified yet")}}):e._e()],1)])})),0)])},Te=[],$e={props:{tabs:{type:Array,required:!0}},computed:{activeTab(){return P.activeTab},hasFeatures(){return P.hasFeatures},validSimplifyTolerance(){return P.validSimplifyTolerance}},methods:{setActiveTab(e){this.$refs.tab[e].focus(),P.setActiveTab(e)},setActiveTabKeyboard(e,t){const a=37,i=39,r=40;let n=e.which===a?t-1:e.which===i?t+1:e.which===r?"down":null;null!==n&&(e.preventDefault(),"down"===n?this.$parent.$refs["panel"+t].$el.focus():this.tabs[n]&&this.setActiveTab(n))}}},Re=$e,Be=(a("74da"),Object(h["a"])(Re,Ie,Te,!1,null,"64dc426c",null)),ze=Be.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"columns"},[a("div",{staticClass:"column has-text-right"},[a("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"button is-primary",class:{"is-loading":e.loading},attrs:{disabled:e.loading,tabindex:e.tabindex},on:{click:function(t){return e.$emit("click")}}},[e._v("\n      Compute risk\n    ")]),e._v(" "),e.currentError?a("p",{staticClass:"yetiform-error"},[a("span",[e._v("\n        "+e._s(e.currentError)+"\n      ")])]):e._e()])])},Ve=[],je={props:{currentError:{type:String,default:""},loading:{type:[Promise,Object],default:null},tabindex:{type:String,default:"0"}}},Ze=je,qe=(a("efa0"),Object(h["a"])(Ze,Ge,Ve,!1,null,"ad96ba08",null)),Ye=qe.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column map-container"},[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("div",{ref:"map",staticStyle:{width:"100%",height:"100%"}}),e._v(" "),a("area-layer"),e._v(" "),a("avalanche-bulletins-layer"),e._v(" "),a("yeti-layer",{attrs:{data:e.yetiData,extent:e.yetiExtent}}),e._v(" "),a("route-layer"),e._v(" "),a("div",{ref:"layerSwitcherButton",staticClass:"ol-control ol-control-layer-switcher-button",attrs:{title:e.$gettext("Layers","Map controls")}},[a("button",{on:{click:function(t){t.stopPropagation(),e.showLayerSwitcher=!e.showLayerSwitcher}}},[a("fa-layers",[a("fa-icon",{attrs:{icon:"layer-group"}}),e._v(" "),e.atLeastOneYetiLayerIsShown?a("fa-icon",{attrs:{icon:"circle",transform:"shrink-2 up-10 right-10"}}):e._e(),e._v(" "),e.atLeastOneYetiLayerIsShown?a("fa-icon",{staticClass:"icon-notification",attrs:{icon:"check-circle",inverse:"",transform:"shrink-2 up-10 right-10"}}):e._e()],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showLayerSwitcher,expression:"showLayerSwitcher"}],ref:"layerSwitcher",staticClass:"ol-control ol-control-layer-switcher",on:{click:function(e){e.stopPropagation()}}},[a("div",[a("header",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Base layer")]),e._v(" "),e._l(e.cartoLayers,(function(t,i){return a("div",{key:t.get("title"),staticClass:"map-control-listitem"},[a("input",{attrs:{id:"carto-checkbox"+i,type:"radio"},domProps:{checked:t==e.visibleCartoLayer},on:{change:function(a){e.visibleCartoLayer=t}}}),e._v(" "),a("label",{attrs:{for:"carto-checkbox"+i}},[e._v(e._s(e.$gettext(t.get("title"),"Map layer")))])])}))],2),e._v(" "),a("div",[a("header",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Slopes")]),e._v(" "),e._l(e.dataLayers,(function(t,i){return a("div",{key:t.get("title"),staticClass:"map-control-listitem"},[a("input",{attrs:{id:"data-checkbox"+i,type:"checkbox"},domProps:{checked:t.getVisible()},on:{change:function(a){return e.toggleMapDataLayer(t)}}}),e._v(" "),a("label",{attrs:{for:"data-checkbox"+i}},[e._v(e._s(e.$gettext(t.get("title"),"Map slopes layer")))])])})),e._v(" "),a("header",[e._v("YETI")]),e._v(" "),e._l(e.yetiLayers,(function(t,i){return a("div",{key:t.title,staticClass:"map-control-listitem"},[a("input",{attrs:{id:"yeti-checkbox"+i,type:"checkbox"},domProps:{checked:t.checked},on:{change:t.action}}),e._v(" "),a("label",{attrs:{for:"yeti-checkbox"+i}},[e._v(e._s(t.title))])])}))],2)]),e._v(" "),a("div",{ref:"recenterOnControl",staticClass:"ol-control ol-control-recenter-on"},[a("input",{attrs:{type:"text",placeholder:e.$gettext("Recenter on...")},on:{input:e.searchRecenterPropositions}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showRecenterOnPropositions,expression:"showRecenterOnPropositions"}],ref:"recenterOnPropositions",staticClass:"ol-control ol-control-recenter-on-propositions"},[e.recenterPropositions&&e.recenterPropositions.data&&e.recenterPropositions.data.features?a("ul",e._l(e.recenterPropositions.data.features,(function(t,i){return a("li",{key:i,on:{click:function(a){return e.recenterOn(t)}}},[e._v("\n          "+e._s(t.properties.name)+",\n          "),a("small",[e._v(e._s(t.properties.state)+", "+e._s(t.properties.country))])])})),0):e._e()]),e._v(" "),a("div",{ref:"drawingMode",staticClass:"ol-control ol-control-drawing-mode",class:{"is-primary":e.drawingMode}},[a("div",{staticClass:"ol-control-drawing-mode-inner"},[a("input-checkbox",{attrs:{value:e.drawingMode,disabled:e.validSimplifyTolerance},on:{input:e.onDrawingMode}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{title:"Enable drawing and editing features on map"}},[e._v("Drawing mode")]),e._v(" "),a("span",{staticClass:"yeti-tag"},[e.validSimplifyTolerance?a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("DISABLED")]):e.drawingMode?a("span",[e._v("ON")]):a("span",[e._v("OFF")])])])],1)])],1)])},We=[],Ke=a("9f59"),Xe={computed:{map(){return this.$parent.map},view(){return this.map.getView()}},methods:{getExtent(e){return this.$parent.getExtent(e)},getFeaturesFromData(e){let t=e.data;return(new xe["a"].format.GeoJSON).readFeatures(t,{featureProjection:"EPSG:3857"})},getPropertiesFromFeatures(e){return e.map(e=>e.getProperties())}}};let He=e=>{const t=8,a=10,i=0,r=.8;let n=r,s=1;return e&&(e>=t&&e<=a?n=r/(a-t)*(a-e):e>a&&(n=i),e>a&&(s=2)),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"hsla(20, 90%, 45%, .85)",width:s}),fill:new xe["a"].style.Fill({color:`hsla(20, 90%, 55%, ${n})`})})};var Je,Qe,et={mixins:[Xe],computed:{mapZoom(){return P.mapZoom},areas(){return P.areas},showAreas(){return P.showAreas}},watch:{showAreas(){this.onShowAreas()}},mounted(){this.areasLayer=new xe["a"].layer.Vector({renderMode:"image",source:new xe["a"].source.Vector,style:He()}),this.map.addLayer(this.areasLayer),this.areasLayer.setVisible(this.showAreas),0===this.areas.length&&(P.fetchAreas().then(this.onAreasResult),P.$on("mapMoveEnd",this.onMapMoveEnd))},methods:{onAreasResult(e){let t=this.getFeaturesFromData(e),a=this.getPropertiesFromFeatures(t);P.setAreas(a),this.areasLayer.getSource().addFeatures(t),this.isAreaOK()},isAreaOK(){let e=this.getExtent("EPSG:3857"),t=!0;for(let a in this.areas){let i=this.areas[a].geometry;if(i.intersectsExtent(e))break;t=!1}P.setAreaOk(t)},onShowAreas(){this.areasLayer.setVisible(this.showAreas)},onMapMoveEnd(){this.isAreaOK(),this.areasLayer.setStyle(He(this.mapZoom))}},render(){return null}},tt=et,at=Object(h["a"])(tt,Je,Qe,!1,null,null,null),it=at.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bulletinsOverlay",staticClass:"bulletins-overlay"},[a("button",{staticClass:"delete is-small button-close",on:{click:e.closeOverlay}},[e._v("x")]),e._v(" "),a("div",{staticClass:"bulletins-header pt-5 pb-3 has-text-centered"},[a("p",{staticClass:"title is-5"},[e._v(e._s(e.overlayData.mountainName))])]),e._v(" "),e.overlayData.danger.low?a("div",{staticClass:"py-2"},[a("p",{staticClass:"is-size-7 px-3 pb-5 bulletins-date"},[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Validity date:")]),e._v(" "+e._s(e.overlayValidUntil)+"\n    ")]),e._v(" "),a("div",{staticClass:"is-flex is-justify-content-space-around is-align-items-center px-3"},[a("div",[a("svg",{attrs:{viewBox:e.overlayData.danger.altitude?"0 0 150 100":"0 0 100 100",width:e.overlayData.danger.altitude?120:80,height:"80"}},[a("polygon",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10","stroke-width":"1.5"},attrs:{points:"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 "}}),e._v(" "),a("text",{attrs:{x:"50",y:e.overlayData.danger.high?82:65,"text-anchor":"middle","font-family":"sans-serif","font-size":"20px","font-weight":"bold"}},[a("tspan",[e._v(e._s(e.overlayData.danger.low))]),e._v(" "),e.overlayData.danger.lowEvol?a("tspan",[e._v(" ")]):e._e(),e._v(" "),e.overlayData.danger.lowEvol?a("tspan",[e._v(e._s(e.overlayData.danger.lowEvol))]):e._e()]),e._v(" "),e.overlayData.danger.lowEvol?a("g",{staticStyle:{fill:"none",stroke:"#000","stroke-width":"2"}},[a("line",{attrs:{x1:"45",x2:"55",y1:e.overlayData.danger.high?75:58,y2:e.overlayData.danger.high?75:58}}),e._v(" "),a("line",{attrs:{x1:"50",x2:"55",y1:e.overlayData.danger.high?70:53,y2:e.overlayData.danger.high?75:58}}),e._v(" "),a("line",{attrs:{x1:"50",x2:"55",y1:e.overlayData.danger.high?80:63,y2:e.overlayData.danger.high?75:58}})]):e._e(),e._v(" "),a("g",{directives:[{name:"show",rawName:"v-show",value:e.overlayData.danger.high,expression:"overlayData.danger.high"}]},[a("line",{staticStyle:{fill:"none",stroke:"#000","stroke-miterlimit":"10","stroke-width":"1.5"},attrs:{x1:"10",y1:"61.5",x2:"90",y2:"61.5"}}),e._v(" "),a("text",{attrs:{x:"50",y:"54","text-anchor":"middle","font-family":"sans-serif","font-size":"20px","font-weight":"bold"}},[a("tspan",[e._v(e._s(e.overlayData.danger.high))]),e._v(" "),e.overlayData.danger.highEvol?a("tspan",[e._v(" ")]):e._e(),e._v(" "),e.overlayData.danger.highEvol?a("tspan",[e._v(e._s(e.overlayData.danger.highEvol))]):e._e()]),e._v(" "),e.overlayData.danger.highEvol?a("g",{staticStyle:{fill:"none",stroke:"#000","stroke-width":"2"}},[a("line",{attrs:{x1:"45",x2:"55",y1:"46",y2:"46"}}),e._v(" "),a("line",{attrs:{x1:"50",x2:"55",y1:"41",y2:"46"}}),e._v(" "),a("line",{attrs:{x1:"50",x2:"55",y1:"51",y2:"46"}})]):e._e()]),e._v(" "),e.overlayData.danger.altitude?a("text",{attrs:{x:"92",y:"65","font-family":"sans-serif","font-size":"16px","font-weight":"bold"}},[e._v("\n            "+e._s(e.overlayData.danger.altitude)+"m\n          ")]):e._e()])]),e._v(" "),a("input-orientation",{attrs:{value:e.overlayOrientations}})],1),e._v(" "),e.overlayDangerComment||e.overlayOrientationsComment?a("dl",{staticClass:"is-size-6 px-3 pt-3"},[e.overlayDangerComment?a("div",[a("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Danger:")]),e._v(" "),a("dd",[e._v(e._s(e.overlayDangerComment))])]):e._e(),e._v(" "),e.overlayOrientationsComment?a("div",[a("dt",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Orientations:")]),e._v(" "),a("dd",[e._v(e._s(e.overlayOrientationsComment))])]):e._e()]):e._e()]):a("div",{staticClass:"py-2"},[a("p",{staticClass:"is-size-6 p-3"},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("No avalanche bulletin right now")])])]),e._v(" "),a("p",{staticClass:"is-size-7 px-3 pt-2 pb-2 bulletins-footer"},[a("strong",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Full bulletin:")]),e._v(" "),e._l(e.overlayData.urls,(function(t,i){return a("span",{key:i,staticClass:"pl-1"},[a("a",{attrs:{href:t.url,target:"_blank"}},[a("fa-icon",{attrs:{icon:"external-link-alt"}}),e._v(" "+e._s(t.title))],1)])}))],2),e._v(" "),a("img",{staticClass:"bulletins-overlay-danger-icon",attrs:{src:e.overlayDangerIcon,alt:""}})])},nt=[];a("4e82");function st(e,t,a){void 0===a&&(a={});var i={type:"Feature"};return(0===a.id||a.id)&&(i.id=a.id),a.bbox&&(i.bbox=a.bbox),i.properties=t||{},i.geometry=e,i}function ot(e,t,a){void 0===a&&(a={});for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<n[n.length-1].length;s++)if(n[n.length-1][s]!==n[0][s])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:e};return st(o,t,a)}function lt(e,t,a){void 0===a&&(a={});var i={type:"MultiPolygon",coordinates:e};return st(i,t,a)}function ut(e){return"Feature"===e.type?e.geometry:e}var ct=a("dcbe"),ht=a.n(ct);function dt(e,t,a){void 0===a&&(a={});var i=ut(e),r=ut(t),n=ht.a.intersection(i.coordinates,r.coordinates);return 0===n.length?null:1===n.length?ot(n[0],a.properties):lt(n,a.properties)}let vt=e=>{const t=8,a=10,i=0,r=.8;let n=r,s=1;return e&&(e>=t&&e<=a?n=r/(a-t)*(a-e):e>a&&(n=i),e>a&&(s=2)),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"rgba(0, 0, 0, .85)",width:s}),fill:new xe["a"].style.Fill({color:`rgba(255, 255, 255, ${n})`})})},mt=80,pt=e=>{e=e||0;let t=["#999","#cbdb45","#fff100","#f6921e","#ec1c24","#ec1c24"],a=`\n    <svg xmlns="http://www.w3.org/2000/svg" width="${mt}" height="${mt}" viewBox="-50 0 200 100">\n      <path d="M5,50L50,5L95,50" fill="white" />\n      <path d="M5,50L50,95L95,50" fill="${t[e]}" />\n      <path d="m50,0l50,50-50,50-50-50zv5L21,33l19-10L50,26l9-8L80,38l2-1L50,5M5,50L50,95L95,50" />\n  `;return a+=0!==e?`\n      <text x="50" y="83" text-anchor="middle" font-family="sans-serif" font-size="40px" font-weight="bold">${e}</text>\n    `:'\n      <g stroke-width="5" stroke="black">\n        <line x1="40" x2="60" y1="58" y2="78" />\n        <line x1="40" x2="60" y1="78" y2="58" />\n      </g>\n    ',2===e?a+='\n      <path d="M86,45a7,7,0,106.5-13.5a7,7,0,00-10.5-8a5.4,5.4,0,00-10.2,3" />\n      <path d="M69,27L86,44a5,5,0,104-12a5,5,0,10-9-5a3,3,0,10-8,0" fill="white" />\n      <path d="M85,32a1,1,0,110,8v-2a1,1,0,100-4" />\n    ':3===e?a+='\n      <path d="M54,22L79,50h33a5,5,0,10-4-22.3a11.3,11.3,0,00-20,0q-8-2,-14,6" />\n      <path d="M55,21L82,48h30a5,5,0,10-5-18a9.7,9.7,0,00-18,0q-7-2,-11,3L60,16" fill="white" />\n      <path d="M59,18l25,25-1.5,1.5-25-25M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3" />\n    ':4!==e&&5!==e||(a+='\n      <path d="M54,22L79,50h52a12.5,12.5,0,001.5-24.4a7,7,0,00-8.2-7a11.9,11.9,0,00-22.5-2q-11-1,-14,7q-10-2-14,4" />\n      <path d="M52,24L77,48h50a5,5,0,103-21a5,5,0,00-7-6a10.3,10.3,0,00-20-2q-11-2,-14,7q-10-3-14,4L60,16" fill="white" />\n      <path d="M59,18l25,25-1.5,1.5-25-25m-1.5,1.5l22.5,22.5-1.5,1.5-22.5-22.5M87,38a1,1,0,1110,5l-2-1a1,1,0,10-6-3M96,29a1,1,0,1115,14l-1.7-1.7A1,1,0,1097.7,30.7" />\n    '),a+="</svg>","data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a)},ft=e=>new xe["a"].style.Style({image:new xe["a"].style.Icon({src:pt(e),size:[mt,mt]})}),gt=new xe["a"].layer.Vector({source:new xe["a"].source.Vector,style:vt()}),yt=new xe["a"].layer.Vector({source:new xe["a"].source.Vector}),wt=new xe["a"].layer.Group({layers:[gt,yt]}),_t=new xe["a"].Overlay({positioning:"top-center",offset:[0,0],className:"bulletins-overlay-container"}),bt={animation:{duration:250},margin:10};var xt={mixins:[Xe],data(){return{overlayData:{mountainName:null,validUntil:null,danger:{},orientations:[],urls:[]},panIntoView:!1}},computed:{mapZoom(){return P.mapZoom},showAvalancheBulletins(){return P.showAvalancheBulletins},bulletinsLoaded(){return P.bulletinsLoaded},drawingMode(){return P.drawingMode},overlayOrientations(){return Object.keys(this.overlayData.orientations).filter(e=>"comment"!==e).filter(e=>this.overlayData.orientations[e]).map(e=>e.toUpperCase())},overlayValidUntil(){return Object(ue["a"])(new Date(this.overlayData.validUntil),"dd/MM/yyyy HH:mm")},overlayDangerIcon(){return pt(this.overlayData.danger.max)},overlayDangerComment(){return this.overlayData.danger.low?this.overlayData.danger.comment:null},overlayOrientationsComment(){return this.overlayData.orientations.comment}},watch:{showAvalancheBulletins(){this.onShowAvalancheBulletins()}},mounted(){this.activeBulletins=null,_t.setElement(this.$refs.bulletinsOverlay),this.map.addOverlay(_t),this.map.addLayer(wt),wt.setVisible(!1),0===P.mountains.all.length&&(P.fetchMountains().then(this.onMountainsResult),P.$on("mapMoveEnd",this.onMapMoveEnd),P.$on("mapClick",this.onMapClick))},methods:{onMountainsResult(e){let t=this.getFeaturesFromData(e);t=t.filter(e=>"France"===e.get("country")),gt.getSource().addFeatures(t);let a=this.getPropertiesFromFeatures(t);a=this.sortMountainsByMassif(a),P.setAllMountains(a),this.setVisibleMountains()},sortMountainsByMassif(e){let t={};for(let i=0;i<e.length;i++)t[e[i].mountain]||(t[e[i].mountain]=[]),t[e[i].mountain].push(e[i]);e=Object.keys(t).sort().reduce((e,a)=>(e[a]=t[a],e),{});let a="name";for(let i in e)e[i].sort((e,t)=>e[a]<t[a]?-1:e[a]>t[a]?1:0);return e},setVisibleMountains(){let e=this.getExtent("EPSG:3857"),t=Object.assign({},P.mountains.all);for(let a in t)t[a]=t[a].filter(t=>{let a=t.geometry;return a.intersectsExtent(e)}),0===t[a].length&&delete t[a];P.setVisibleMountains(t)},updateMountainsStyle(){gt.setStyle(vt(this.mapZoom))},onMapMoveEnd(){this.setVisibleMountains(),this.showAvalancheBulletins&&(this.updateMountainsStyle(),this.updateBulletinsGeometry())},onMapClick(e){this.showAvalancheBulletins&&!this.drawingMode&&this.setBulletinsOverlay(e)},onShowAvalancheBulletins(){this.bulletinsLoaded||(P.setBulletinsLoaded(!0),P.fetchBulletins().then(this.onBulletinsResult)),wt.setVisible(this.showAvalancheBulletins),this.updateMountainsStyle(),this.updateBulletinsGeometry()},onBulletinsResult(e){let t=e.data,a=gt.getSource().getFeatures();t.zones.forEach(e=>{a.find(t=>{if(t.get("name")===e.zone){let a=t.getGeometry(),i=a.getType(),r=null;if("MultiPolygon"!==i)throw new Error("Mountain geometry have to be MultiPolygon.");r=a.getInteriorPoints();let n=new xe["a"].Feature({geometry:r,initialGeometry:r,overlayData:{mountainName:t.get("name"),validUntil:e.validUntil,danger:e.danger,orientations:e.orientations,urls:t.get("urls")}});return yt.getSource().addFeature(n),n.setStyle(ft(e.danger.max)),t.setProperties({bulletinsFeature:n}),!0}})}),this.updateBulletinsGeometry()},updateBulletinsGeometry(){if(this.bulletinsLoaded){if(this.panIntoView)return this.panIntoView=!1,void this.updateBulletinsOverlay();if(this.mapZoom>10){let e=this.getExtent("EPSG:3857"),t=new xe["a"].Feature(xe["a"].geom.polygonFromExtent(e)),a=gt.getSource().getFeatures();a.forEach(e=>{let a=dt((new xe["a"].format.GeoJSON).writeFeatureObject(e),(new xe["a"].format.GeoJSON).writeFeatureObject(t));if(a){let t=(new xe["a"].format.GeoJSON).readFeature(a),i=t.getGeometry(),r=i.getType();"Polygon"===r&&(t=new xe["a"].Feature({geometry:new xe["a"].geom.MultiPolygon([i])}));let n=t.getGeometry().getInteriorPoints(),s=e.get("bulletinsFeature");s&&s.setGeometry(n)}})}else{let e=yt.getSource().getFeatures();e.forEach(e=>{e.setGeometry(e.get("initialGeometry"))})}this.updateBulletinsOverlay()}},setBulletinsOverlay(e){let t=this.map.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return e===yt}}),a=t.length?t[0]:void 0;if(a){this.overlayData=a.get("overlayData");let t=a.getGeometry().getClosestPoint(e.coordinate);this.openOverlay(t,!0),this.activeBulletins={feature:a};let i=a.getGeometry().getPoints();i.length>1&&i.forEach((e,a)=>{e.getCoordinates().every((e,a)=>e===t[a])&&(this.activeBulletins.index=a)})}else this.closeOverlay(!0)},updateBulletinsOverlay(){if(this.activeBulletins&&this.showAvalancheBulletins){let e=this.activeBulletins.feature,t=this.activeBulletins.index||0,a=e.getGeometry().getPoint(t);a||(a=e.getGeometry().getPoint(0)),this.openOverlay(a.getCoordinates())}else this.closeOverlay()},openOverlay(e,t=!1){this.$nextTick(()=>{_t.setPosition(e),t&&(this.panIntoView=!0,_t.panIntoView(bt))})},closeOverlay(e=!1){_t.setPosition(void 0),e&&(this.activeBulletins=null)}}},St=xt,Et=(a("f6c4"),a("e7e3"),Object(h["a"])(St,rt,nt,!1,null,"57c862e2",null)),kt=Et.exports;a("ac1f"),a("5319");let Ct=[new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"rgba(0, 0, 0, 0.4)",width:5})}),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"yellow",width:3})})],Mt=[new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"white",width:5})}),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"rgba(0, 0, 0, 0.7)",width:3})})],Lt=[new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"yellow",width:9}),zIndex:1}),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"red",width:3}),zIndex:1})];var Nt,Dt,Ft={mixins:[Xe],data(){return{visibleSimplifiedLayer:!1}},computed:{features(){return P.features},featuresLength(){return P.featuresLength},validMinimumMapZoom(){return P.VALID_MINIMUM_MAP_ZOOM},drawingMode(){return P.drawingMode}},watch:{drawingMode(){this.drawingMode?this.enableInteractions():this.disableInteractions()}},mounted(){this.featuresLayer=new xe["a"].layer.Vector({source:new xe["a"].source.Vector,style:Ct}),this.featuresLayerSource=this.featuresLayer.getSource(),this.map.addLayer(this.featuresLayer),this.simplifiedLayer=new xe["a"].layer.Vector({source:new xe["a"].source.Vector,style:Mt}),this.simplifiedSource=this.simplifiedLayer.getSource(),this.map.addLayer(this.simplifiedLayer),this.simplifiedLayer.setVisible(!1),P.setFeaturesTitle(this.$gettext(P.featuresTitle));let e=this.$route.params.document_id,t=this.$language.current;e&&p["a"]["route"].getCooked(e,t).then(this.addFeaturesFromDocument),this.featuresLayerSource.on("addfeature",this.onFeature),this.simplifiedSource.on("addfeature",this.onFeature),this.addInteractions(),P.$on("removeFeature",this.removeFeature),P.$on("removeFeatures",this.removeFeatures),P.$on("gpx",this.addFeaturesFromGpx),P.$on("previewSimplify",this.previewSimplify),P.$on("simplify",this.simplify)},methods:{addInteractions(){let e=this.featuresLayerSource;this.modifyInteraction=new xe["a"].interaction.Modify({source:e}),this.map.addInteraction(this.modifyInteraction),this.drawInteraction=new xe["a"].interaction.Draw({source:e,type:"LineString"}),this.map.addInteraction(this.drawInteraction),this.snapInteraction=new xe["a"].interaction.Snap({source:e}),this.map.addInteraction(this.snapInteraction),this.drawInteraction.on("drawstart",this.onDrawStart),this.drawInteraction.on("drawend",this.onDrawEnd),this.modifyInteraction.on("modifyend",this.onModifyEnd),this.disableInteractions()},enableInteractions(){this.drawInteraction.setActive(!0),this.modifyInteraction.setActive(!0),this.snapInteraction.setActive(!0)},disableInteractions(){this.drawInteraction.setActive(!1),this.modifyInteraction.setActive(!1),this.snapInteraction.setActive(!1)},onDrawStart(){document.addEventListener("keydown",this.onKeyWhileDrawing),document.addEventListener("keypress",this.onKeyWhileDrawing)},onDrawEnd(){document.removeEventListener("keydown",this.onKeyWhileDrawing),document.removeEventListener("keypress",this.onKeyWhileDrawing)},onModifyEnd(){this.updateFeaturesFromStore()},onKeyWhileDrawing(e){e.preventDefault(),"Backspace"===e.key&&this.drawInteraction.removeLastPoint()},onFeature(e){e.feature.set("highlightedStyle",Lt),this.loadingExternalFeatures||this.updateFeaturesFromStore()},updateFeaturesFromStore(){let e=this.visibleSimplifiedLayer?this.getSimplifiedFeatures():this.getFeaturesLayerFeatures();P.setFeatures(e);let t=this.getFeaturesLayerFeatures().map(e=>e.getGeometry().getCoordinates().length).reduce((e,t)=>e+t,0);P.setFeaturesLength(t),0===e.length&&this.$route.params.document_id&&this.$router.replace({path:"/"+this.$route.name})},getFeaturesLayerFeatures(){return this.featuresLayerSource.getFeatures()},getSimplifiedFeatures(){return this.simplifiedSource.getFeatures()},removeFeature(e){let t=!(1===this.featuresLayerSource.getFeatures().length&&!confirm(this.$gettext("Confirm delete")));t&&(this.visibleSimplifiedLayer?(this.simplifiedSource.removeFeature(e),this.getFeaturesLayerFeatures().forEach(t=>{e.get("id")===t.ol_uid&&this.featuresLayerSource.removeFeature(t)})):this.featuresLayerSource.removeFeature(e),this.updateFeaturesFromStore())},removeFeatures(){this.featuresLayerSource.clear(),this.simplifiedSource.clear(!0),this.hideSimplifiedLayer(),this.updateFeaturesFromStore()},addFeaturesFromGpx(e){if(!e)return;this.featuresLayerSource.clear(),this.loadingExternalFeatures=!0;let t=new xe["a"].format.GPX,a=t.readFeatures(e,{featureProjection:"EPSG:3857"});a.map(this.addFeature),P.setFeaturesTitle(this.getFeaturesTitleFromGpx(a)),this.loadingExternalFeatures=!1,this.updateFeaturesFromStore(),this.fitMapToFeatures()},getFeaturesTitleFromGpx(e){if(e&&e.length){let t=e[0].getProperties();return t.name?t.name:this.$gettext("GPX file")}},addFeaturesFromDocument(e){this.loadingExternalFeatures=!0;let t=e.data.geometry.geom_detail,a=(new xe["a"].format.GeoJSON).readFeature(t);this.addFeature(a),P.setFeaturesTitle(this.getFeaturesTitleFromDocument(e)),this.loadingExternalFeatures=!1,this.updateFeaturesFromStore(),this.fitMapToFeatures()},addFeature(e){if("MultiLineString"===e.getGeometry().getType()){let t=e.getGeometry().getLineStrings();t.map(e=>new xe["a"].Feature({geometry:e})).map(this.addFeature)}else{let t=e.getGeometry().getCoordinates().length;t>=2&&this.featuresLayerSource.addFeature(e)}},getFeaturesTitleFromDocument(e){return this.$documentUtils.getDocumentTitle(e.data)},fitMapToFeatures(){let e=xe["a"].extent.createEmpty();xe["a"].extent.extend(e,this.featuresLayerSource.getExtent()),this.view.fit(e,{size:this.map.getSize()}),this.view.setZoom(Math.max(this.validMinimumMapZoom,this.view.getZoom()))},hideSimplifiedLayer(){this.featuresLayer.setVisible(!0),this.simplifiedLayer.setVisible(!1),this.visibleSimplifiedLayer=!1},showSimplifiedLayer(){this.featuresLayer.setVisible(!1),this.simplifiedLayer.setVisible(!0),this.visibleSimplifiedLayer=!0},previewSimplify(e){if(this.simplifiedSource.clear(!0),0===e)this.hideSimplifiedLayer();else{this.showSimplifiedLayer();let t=this.getFeaturesLayerFeatures();t.map(t=>{let a=t.getGeometry(),i=a;0!==e&&(i=i.simplify(e));let r=new xe["a"].Feature({geometry:i,id:t.ol_uid});this.simplifiedSource.addFeature(r)})}this.updateFeaturesFromStore()},simplify(){this.featuresLayerSource.clear();let e=this.getSimplifiedFeatures();e.forEach(e=>{this.featuresLayerSource.addFeature(e)}),this.hideSimplifiedLayer()}},render(){return null}},Pt=Ft,At=Object(h["a"])(Pt,Nt,Dt,!1,null,null,null),Ot=At.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"legend"},[a("div",[a("div",{staticClass:"legend-button is-pulled-right ol-control"},[a("button",{attrs:{type:"button"},on:{click:function(t){e.showLegend=!e.showLegend}}},[a("span",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Legend")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.showLegend,expression:"showLegend === true"}],staticClass:"legend-content"},[e.mapLegend?a("div",[a("ul",e._l(e.mapLegend.items,(function(t,i){return a("li",{key:i},[a("span",{staticClass:"legend-color",style:"background:"+t.color}),e._v(" "),a("span",[e._v(e._s(e.$gettext(t.text["en"])))])])})),0),e._v(" "),a("p",{staticClass:"is-size-6 is-italic"},[e._v(e._s(e.$gettext(e.mapLegend.comment["en"])))])]):a("p",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"is-italic"},[e._v("Legend will appear automatically with the generated image")])])]),e._v(" "),e.isLayerLoaded?a("div",{staticClass:"ol-control opacity"},[a("div",{staticClass:"opacity-slider"},[a("vue-slider",{attrs:{min:0,max:1,interval:.01,tooltip:"none",direction:"btt","rail-style":{background:"rgba(0,0,0,.25)"},"process-style":{background:"white"}},on:{change:e.onUpdateOpacity},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}})],1)]):e._e()])},Tt=[];a("24df");const $t=.75;var Rt={components:{VueSlider:()=>a.e("slider").then(a.t.bind(null,"4971",7))},mixins:[Xe],props:{data:{type:String,default:null},extent:{type:Array,required:!0}},data(){return{isLayerLoaded:!1,opacity:$t,showLegend:void 0,mapLegend:null}},watch:{data(){this.data?this.drawImage():this.clearLayers()},extent(){this.drawExtent(this.extent)}},created(){this.layer=new xe["a"].layer.Image({source:new xe["a"].source.ImageStatic({url:null,imageExtent:xe["a"].extent.createEmpty()}),opacity:this.opacity}),this.extentLayer=new xe["a"].layer.Vector({source:new xe["a"].source.Vector,style:[new xe["a"].style.Style({fill:new xe["a"].style.Fill({color:"hsla(30, 100%, 60%, .45)"})}),new xe["a"].style.Style({stroke:new xe["a"].style.Stroke({color:"hsla(30, 100%, 40%, 1)",width:2}),geometry:e=>new xe["a"].geom.Polygon([e.getGeometry().getCoordinates()[1]])})]})},mounted(){this.map.addLayer(this.layer),this.map.addLayer(this.extentLayer)},methods:{clearLayers(){this.layer.setSource(null),this.isLayerLoaded=!1,this.extentLayer.getSource().clear()},drawExtent(e){let t=xe["a"].extent.buffer(e,Math.max(e[2]-e[0],e[3]-e[1])/10),a=new xe["a"].Feature(new xe["a"].geom.Polygon([this.toLinearRing(t),this.toLinearRing(e)]));this.extentLayer.getSource().addFeature(a)},drawImage(){let e=(new DOMParser).parseFromString(this.data,"application/xml"),t=e.getElementsByTagName("wps:ComplexData")[0].textContent,a=e.getElementsByTagName("wps:ComplexData")[1].textContent,i=xe["a"].proj.transformExtent(a.split(",").map(Number),"EPSG:4326","EPSG:3857");this.layer.setSource(new xe["a"].source.ImageStatic({imageLoadFunction(e){e.getImage().src="data:image/png;base64,"+t},imageExtent:i})),this.isLayerLoaded=!0,this.setLegend(e)},onUpdateOpacity(){this.layer.setOpacity(this.opacity)},setLegend(e){this.mapLegend=JSON.parse(e.getElementsByTagName("wps:ComplexData")[2].textContent),this.mapLegend.items.forEach(e=>{e.color=`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`}),this.layer.getSource().setAttributions(this.mapLegend.attributions)},toLinearRing(e){let t=e[0],a=e[1],i=e[2],r=e[3];return[[t,a],[t,r],[i,r],[i,a],[t,a]]}}},Bt=Rt,zt=(a("28ff"),Object(h["a"])(Bt,It,Tt,!1,null,"42ee7258",null)),Gt=zt.exports,Vt=a("c13e");const jt=[6.25,45.15],Zt=6,qt=19;var Yt={components:{AreaLayer:it,AvalancheBulletinsLayer:kt,RouteLayer:Ot,YetiLayer:Gt},props:{yetiExtent:{type:Array,required:!0},yetiData:{type:String,default:null}},data(){return{cartoLayers:Object(Ke["a"])(),dataLayers:Object(Ke["b"])(),showLayerSwitcher:!1,recenterPropositions:null,showRecenterOnPropositions:!1}},computed:{mapZoom(){return P.mapZoom},showAvalancheBulletins(){return P.showAvalancheBulletins},showAreas(){return P.showAreas},drawingMode(){return P.drawingMode},validSimplifyTolerance(){return P.validSimplifyTolerance},yetiLayers(){return[{title:this.$gettext("YETI extent"),checked:this.showAreas,action:this.onShowAreas},{title:this.$gettext("Avalanche bulletins"),checked:this.showAvalancheBulletins,action:this.onShowAvalancheBulletins}]},visibleCartoLayer:{get(){return this.cartoLayers.find(e=>!0===e.getVisible())},set(e){this.visibleCartoLayer.setVisible(!1),e.setVisible(!0)}},atLeastOneYetiLayerIsShown(){return this.yetiLayers.filter(e=>e.checked).length}},watch:{showAvalancheBulletins(){this.updateCartoLayersOpacity()},showAreas(){this.updateCartoLayersOpacity()}},created(){this.map=new xe["a"].Map({controls:[new xe["a"].control.Zoom({zoomInTipLabel:this.$gettext("Zoom in","Map controls"),zoomOutTipLabel:this.$gettext("Zoom out","Map controls")}),new xe["a"].control.ScaleLine,new xe["a"].control.Attribution({tipLabel:this.$gettext("Attributions","Map controls")})],layers:[...this.cartoLayers,...this.dataLayers],view:new xe["a"].View({center:xe["a"].proj.transform(jt,"EPSG:4326","EPSG:3857"),zoom:Zt,maxZoom:qt})}),this.view=this.map.getView()},mounted(){this.map.setTarget(this.$refs.map);let e=[new xe["a"].control.FullScreen({source:this.$el,tipLabel:this.$gettext("Toggle full-screen","Map Controls")}),new xe["a"].control.Control({element:this.$refs.layerSwitcherButton}),new xe["a"].control.Control({element:this.$refs.layerSwitcher}),new xe["a"].control.Control({element:this.$refs.drawingMode}),new xe["a"].control.Control({element:this.$refs.recenterOnControl}),new xe["a"].control.Control({element:this.$refs.recenterOnPropositions})];e.map(e=>this.map.addControl(e)),this.map.on("moveend",this.onMapMoveEnd),this.map.on("click",this.onMapClick)},methods:{getExtent(e){let t=this.view.calculateExtent(this.map.getSize()||null);return e&&(t=xe["a"].proj.transformExtent(t,xe["a"].proj.get("EPSG:3857"),xe["a"].proj.get(e))),t},toggleMapDataLayer(e){e.setVisible(!e.getVisible())},searchRecenterPropositions(e){let t=e.target.value;if(t&&t.length>=3){let e=this.view.getCenter(),a=xe["a"].proj.toLonLat(e);this.recenterPropositions=Vt["a"].getPropositions(t,this.$language.current,a),this.showRecenterOnPropositions=!0}},recenterOn(e){let t=(new xe["a"].format.GeoJSON).readFeature(e),a=t.get("extent"),i=t.getGeometry().flatCoordinates;a?(a=xe["a"].proj.transformExtent(a,"EPSG:4326","EPSG:3857"),this.view.fit(a,{size:this.map.getSize(),maxZoom:12})):(i=xe["a"].proj.transform(i,"EPSG:4326","EPSG:3857"),this.view.setCenter(i),this.view.setZoom(16)),this.showRecenterOnPropositions=!1},getMapZoom(){return Math.floor(10*this.view.getZoom())/10},onMapMoveEnd(){let e=this.getMapZoom();this.mapZoom!==e&&P.setMapZoom(e),(this.showAvalancheBulletins||this.showAreas)&&this.updateCartoLayersOpacity(),P.$emit("mapMoveEnd")},onMapClick(e){this.showLayerSwitcher=!1,this.showRecenterOnPropositions=!1,P.$emit("mapClick",e)},updateCartoLayersOpacity(){const e=9;this.cartoLayers.forEach(t=>{t.setOpacity((this.showAvalancheBulletins||this.showAreas)&&this.mapZoom<e?.5:1)})},onShowAvalancheBulletins(){P.setShowAvalancheBulletins(!this.showAvalancheBulletins)},onShowAreas(){P.setShowAreas(!this.showAreas)},onDrawingMode(){P.setDrawingMode(!this.drawingMode)}}},Ut=Yt,Wt=(a("9379"),a("46e4"),Object(h["a"])(Ut,Ue,We,!1,null,"eb255532",null)),Kt=Wt.exports;const Xt="https://api.ensg.eu/yeti-wps?request=Execute&service=WPS&version=1.0.0&identifier=Yeti&datainputs=";var Ht={name:"Yeti",components:{YetiArticle:b,Panel:T,SubPanelBra:se,SubPanelCourse:Me,SubPanelMethods:Oe,Tabs:ze,ValidationButton:Ye,YetiMap:Kt},data(){return{showDisclaimer:!1,checkDisclaimer:!1,articles:{faq:{id:1257569,title:"FAQ"},disclaimer:{id:1257571,title:this.$gettext("Disclaimer")}},tabs:[this.$gettext("Compute"),this.$gettext("Outing")],formError:void 0,currentError:void 0,promise:null,yetiData:null,yetiExtent:[]}},computed:{validMinimumMapZoom(){return P.VALID_MINIMUM_MAP_ZOOM},dangerMaxWhenMrd(){return P.DANGER_MAX_WHEN_MRD},bra(){return P.bra},method(){return P.method},mapZoom(){return P.mapZoom},areaOk(){return P.areaOk},errors(){return{area:{simple:this.$gettext("Area not covered"),full:this.$gettext("Current map view is not covered by YETI. Only french mountains are as of now (determined by a dashed stroke).")},method:{simple:this.$gettext("Missing method"),full:this.$gettext("Please select a method before computing.")},method_bra:{simple:this.$gettext("Conflicting method and danger"),full:this.$gettext("The MRD method (beginner) is allowed when danger is 3 maximum. Choose another method: MRE or MRP.")},bra:{simple:this.$gettext("Missing danger level"),full:this.$gettext("Please set danger level as specified on avalanche bulletin for the specific area.")},altitude:{simple:this.$gettext("Missing altitude"),full:this.$gettext("Altitude is mandatory when danger high and low are different. Please set altitude as specified on avalanche bulletin for the specific area.")},zoom:{simple:this.$gettext("Area too large"),full:this.$gettext("Current map view is too large. Please zoom to level")+" "+this.validMinimumMapZoom},ok:this.$gettext("Seems fine! :)"),yeti:this.$gettext("Service is inactive right now"),yeti_prefix:"YETI Service: ",yeti_unauthorized:this.$gettext("You have to be authorized. Please contact administrators of the service if interested.")}},mrdIsNotApplicable(){return this.isBraMax&&"mrd"===this.method.type},isBraMax(){return this.bra.high>this.dangerMaxWhenMrd||this.bra.low>this.dangerMaxWhenMrd},isValidMapZoom(){return this.mapZoom>=this.validMinimumMapZoom}},watch:{"bra.low":"check","bra.altiThreshold":"check","bra.isDifferent":"check","method.type":"check","method.potentialDanger":"check",mapZoom:"check",areaOk:"check"},created(){this.$localStorage.get("yeti-disclaimer")||(this.showDisclaimer=!0),P.setDefault()},mounted(){this.check()},methods:{check(){this.areaOk?this.isValidMapZoom?this.bra.high?this.bra.low&&this.bra.high!==this.bra.low&&!this.bra.altiThreshold?this.formError="altitude":this.method.type?this.mrdIsNotApplicable?this.formError="method_bra":!this.bra.isDifferent||this.bra.low&&this.bra.high?this.formError=null:this.formError="bra":this.formError="method":this.formError="bra":this.formError="zoom":this.formError="area",this.mrdIsNotApplicable&&(this.method.type=null),this.setCurrentError()},warnAboutMethodBra(e){"mrd"===e&&this.isBraMax&&window.alert(this.errors.method_bra.full)},setCurrentError(){this.formError?(this.currentError=this.errors[this.formError]["simple"],"zoom"===this.formError&&(this.currentError+=" ("+this.$gettext("current zoom:")+" "+this.mapZoom+" "+this.$gettext("on")+" "+this.validMinimumMapZoom+")")):this.currentError=this.errors["ok"]},compute(){if(this.formError)return void window.alert(this.errors[this.formError]["full"]);const e=this.$refs.map.getExtent("EPSG:3857"),t=this.extendExtent(e),a=this.getYetiUrl(t);this.yetiData=null,this.promise=s.a.get(a).then(e=>this.onYetiResult(e,t)).catch(this.onYetiError)},extendExtent(e){const t=Math.min(.5,(this.mapZoom-this.validMinimumMapZoom)/6),a=Math.max(e[2]-e[0],e[3]-e[1])*t;return xe["a"].extent.buffer(e,a)},onYetiResult(e,t){this.yetiData=e.data,this.yetiExtent=t,this.promise=null},onYetiError(e){this.promise=null;let t=this.errors["yeti"];if(400===e.response.status){const a=(new DOMParser).parseFromString(e.response.data,"text/xml");t=[...a.getElementsByTagName("ExceptionText")].map(e=>e.textContent).join(" ")}403===e.response.status&&(t=this.errors["yeti_unauthorized"]),window.alert(this.errors["yeti_prefix"]+t)},getYetiUrl(e){const t=xe["a"].proj.transformExtent(e,"EPSG:3857","EPSG:4326"),a=this.bra.isDifferent?this.bra.low:this.bra.high,i=this.bra.isDifferent?this.bra.altiThreshold:0,r="mre"===this.method.type&&0!==this.method.orientation.length?"none,"+this.method.orientation.join(",").toLowerCase():"none",n="mrp"===this.method.type?this.method.potentialDanger:0,s="mrp"===this.method.type&&this.method.wetSnow,o="mrp"===this.method.type?Math.floor(this.method.groupSize):0;let l=Xt;return l+=`methode=${this.method.type};`,l+=`bbox=${t[0]},${t[1]},${t[2]},${t[3]};`,l+=`risque_haut=${this.bra.high};`,l+=`risque_bas=${a};`,l+="seuil_alti="+i,"mre"===this.method.type?l+=";rdv="+r:"mrp"===this.method.type&&(l+=`;potentiel_danger=${n};`,l+=`neige_mouillee=${s};`,l+="taille_groupe="+o),l},onSubmitDisclaimer(){this.showDisclaimer=!1,this.$localStorage.set("yeti-disclaimer","validated")}}},Jt=Ht,Qt=(a("dc16"),a("2d99"),Object(h["a"])(Jt,i,r,!1,null,"0fd3759c",null));t["default"]=Qt.exports},"936b":function(e,t,a){},9379:function(e,t,a){"use strict";a("ec2f")},"9d66":function(e,t,a){"use strict";a("e457")},"9e38":function(e,t,a){},"9f0d":function(e,t,a){},aa66:function(e,t,a){e.exports=a.p+"img/logo-ensg.e6781953.jpg"},ae47:function(e,t,a){},b2c6:function(e,t,a){},bd20:function(e,t,a){},cb04:function(e,t,a){"use strict";a("936b")},d10a:function(e,t,a){},d315:function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.24ab8a49.webp"},dc16:function(e,t,a){"use strict";a("b2c6")},dcbe:function(e,t,a){(function(t){(function(t,a){e.exports=a()})(0,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}
/**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var r=function(){function e(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return e}();function n(e,t){return e>t?1:e<t?-1:0}function s(e,t,a){var i=new r(null,null),n=i,s=i;while(1){var o=a(e,t.key);if(o<0){if(null===t.left)break;if(a(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,t=l,null===t.left)break}s.left=t,s=t,t=t.left}else{if(!(o>0))break;if(null===t.right)break;if(a(e,t.right.key)>0){l=t.right;if(t.right=l.left,l.left=t,t=l,null===t.right)break}n.right=t,n=t,t=t.right}}return n.right=t.left,s.left=t.right,t.left=i.right,t.right=i.left,t}function o(e,t,a,i){var n=new r(e,t);if(null===a)return n.left=n.right=null,n;a=s(e,a,i);var o=i(e,a.key);return o<0?(n.left=a.left,n.right=a,a.left=null):o>=0&&(n.right=a.right,n.left=a,a.right=null),n}function l(e,t,a){var i=null,r=null;if(t){t=s(e,t,a);var n=a(t.key,e);0===n?(i=t.left,r=t.right):n<0?(r=t.right,t.right=null,i=t):(i=t.left,t.left=null,r=t)}return{left:i,right:r}}function u(e,t,a){return null===t?e:(null===e||(t=s(e.key,t,a),t.left=e),t)}function c(e,t,a,i,r){if(e){i(t+(a?"└── ":"├── ")+r(e)+"\n");var n=t+(a?"    ":"│   ");e.left&&c(e.left,n,!1,i,r),e.right&&c(e.right,n,!0,i,r)}}var h=function(){function e(e){void 0===e&&(e=n),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=o(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var a=new r(e,t);null===this._root&&(a.left=a.right=null,this._size++,this._root=a);var i=this._comparator,n=s(e,this._root,i),o=i(e,n.key);return 0===o?this._root=n:(o<0?(a.left=n.left,a.right=n,n.left=null):o>0&&(a.right=n.right,a.left=n,n.right=null),this._size++,this._root=a),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,a){var i;if(null===t)return null;t=s(e,t,a);var r=a(e,t.key);return 0===r?(null===t.left?i=t.right:(i=s(e,t.left,a),i.right=t.right),this._size--,i):t},e.prototype.pop=function(){var e=this._root;if(e){while(e.left)e=e.left;return this._root=s(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){var t=this._root,a=this._comparator;while(t){var i=a(e,t.key);if(0===i)return t;t=i<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=s(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){var t=this._root,a=this._comparator;while(t){var i=a(e,t.key);if(0===i)return!0;t=i<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){var a=this._root,i=[],r=!1;while(!r)null!==a?(i.push(a),a=a.left):0!==i.length?(a=i.pop(),e.call(t,a),a=a.right):r=!0;return this},e.prototype.range=function(e,t,a,i){var r,n=[],s=this._comparator,o=this._root;while(0!==n.length||o)if(o)n.push(o),o=o.left;else{if(o=n.pop(),r=s(o.key,t),r>0)break;if(s(o.key,e)>=0&&a.call(i,o))return this;o=o.right}return this},e.prototype.keys=function(){var e=[];return this.forEach((function(t){var a=t.key;return e.push(a)})),e},e.prototype.values=function(){var e=[];return this.forEach((function(t){var a=t.data;return e.push(a)})),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)while(e.left)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)while(e.right)e=e.right;return e},e.prototype.at=function(e){var t=this._root,a=!1,i=0,r=[];while(!a)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else a=!0;return null},e.prototype.next=function(e){var t=this._root,a=null;if(e.right){a=e.right;while(a.left)a=a.left;return a}var i=this._comparator;while(t){var r=i(e.key,t.key);if(0===r)break;r<0?(a=t,t=t.left):t=t.right}return a},e.prototype.prev=function(e){var t=this._root,a=null;if(null!==e.left){a=e.left;while(a.right)a=a.right;return a}var i=this._comparator;while(t){var r=i(e.key,t.key);if(0===r)break;r<0?t=t.left:(a=t,t=t.right)}return a},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return m(this._root)},e.prototype.load=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a=!1);var i=e.length,r=this._comparator;if(a&&g(e,t,0,i-1,r),null===this._root)this._root=d(e,t,0,i),this._size=i;else{var n=f(this.toList(),v(e,t),r);i=this._size+i,this._root=p({head:n},0,i)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return c(this._root,"",!0,(function(e){return t.push(e)}),e),t.join("")},e.prototype.update=function(e,t,a){var i=this._comparator,r=l(e,this._root,i),n=r.left,s=r.right;i(e,t)<0?s=o(t,a,s,i):n=o(t,a,n,i),this._root=u(n,s,i)},e.prototype.split=function(e){return l(e,this._root,this._comparator)},e}();function d(e,t,a,i){var n=i-a;if(n>0){var s=a+Math.floor(n/2),o=e[s],l=t[s],u=new r(o,l);return u.left=d(e,t,a,s),u.right=d(e,t,s+1,i),u}return null}function v(e,t){for(var a=new r(null,null),i=a,n=0;n<e.length;n++)i=i.next=new r(e[n],t[n]);return i.next=null,a.next}function m(e){var t=e,a=[],i=!1,n=new r(null,null),s=n;while(!i)t?(a.push(t),t=t.left):a.length>0?(t=s=s.next=a.pop(),t=t.right):i=!0;return s.next=null,n.next}function p(e,t,a){var i=a-t;if(i>0){var r=t+Math.floor(i/2),n=p(e,t,r),s=e.head;return s.left=n,e.head=e.head.next,s.right=p(e,r+1,a),s}return null}function f(e,t,a){var i=new r(null,null),n=i,s=e,o=t;while(null!==s&&null!==o)a(s.key,o.key)<0?(n.next=s,s=s.next):(n.next=o,o=o.next),n=n.next;return null!==s?n.next=s:null!==o&&(n.next=o),i.next}function g(e,t,a,i,r){if(!(a>=i)){var n=e[a+i>>1],s=a-1,o=i+1;while(1){do{s++}while(r(e[s],n)<0);do{o--}while(r(e[o],n)>0);if(s>=o)break;var l=e[s];e[s]=e[o],e[o]=l,l=t[s],t[s]=t[o],t[o]=l}g(e,t,a,o,r),g(e,t,o+1,i,r)}}var y=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},w=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var a=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x,r=e.ll.y<t.ll.y?t.ll.y:e.ll.y,n=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:a,y:r},ur:{x:i,y:n}}},_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var b=_*_,x=function(e,t){if(-_<e&&e<_&&-_<t&&t<_)return 0;var a=e-t;return a*a<b*e*t?0:e<t?-1:1},S=function(){function t(){e(this,t),this.reset()}return i(t,[{key:"reset",value:function(){this.xRounder=new E,this.yRounder=new E}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),t}(),E=function(){function t(){e(this,t),this.tree=new h,this.round(0)}return i(t,[{key:"round",value:function(e){var t=this.tree.add(e),a=this.tree.prev(t);if(null!==a&&0===x(t.key,a.key))return this.tree.remove(e),a.key;var i=this.tree.next(t);return null!==i&&0===x(t.key,i.key)?(this.tree.remove(e),i.key):e}}]),t}(),k=new S,C=function(e,t){return e.x*t.y-e.y*t.x},M=function(e,t){return e.x*t.x+e.y*t.y},L=function(e,t,a){var i={x:t.x-e.x,y:t.y-e.y},r={x:a.x-e.x,y:a.y-e.y},n=C(i,r);return x(n,0)},N=function(e){return Math.sqrt(M(e,e))},D=function(e,t,a){var i={x:t.x-e.x,y:t.y-e.y},r={x:a.x-e.x,y:a.y-e.y};return C(r,i)/N(r)/N(i)},F=function(e,t,a){var i={x:t.x-e.x,y:t.y-e.y},r={x:a.x-e.x,y:a.y-e.y};return M(r,i)/N(r)/N(i)},P=function(e,t,a){return 0===t.y?null:{x:e.x+t.x/t.y*(a-e.y),y:a}},A=function(e,t,a){return 0===t.x?null:{x:a,y:e.y+t.y/t.x*(a-e.x)}},O=function(e,t,a,i){if(0===t.x)return A(a,i,e.x);if(0===i.x)return A(e,t,a.x);if(0===t.y)return P(a,i,e.y);if(0===i.y)return P(e,t,a.y);var r=C(t,i);if(0==r)return null;var n={x:a.x-e.x,y:a.y-e.y},s=C(n,t)/r,o=C(n,i)/r,l=e.x+o*t.x,u=a.x+s*i.x,c=e.y+o*t.y,h=a.y+s*i.y,d=(l+u)/2,v=(c+h)/2;return{x:d,y:v}},I=function(){function t(a,i){e(this,t),void 0===a.events?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=i}return i(t,null,[{key:"compare",value:function(e,a){var i=t.comparePoints(e.point,a.point);return 0!==i?i:(e.point!==a.point&&e.link(a),e.isLeft!==a.isLeft?e.isLeft?1:-1:$.compare(e.segment,a.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),i(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,a=0,i=t.length;a<i;a++){var r=t[a];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var a=this.point.events[t];if(void 0===a.segment.consumedBy)for(var i=t+1;i<e;i++){var r=this.point.events[i];void 0===r.consumedBy&&(a.otherSE.point.events===r.otherSE.point.events&&a.segment.consume(r.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,a=this.point.events.length;t<a;t++){var i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,a=new Map,i=function(i){var r=i.otherSE;a.set(i,{sine:D(t.point,e.point,r.point),cosine:F(t.point,e.point,r.point)})};return function(e,t){a.has(e)||i(e),a.has(t)||i(t);var r=a.get(e),n=r.sine,s=r.cosine,o=a.get(t),l=o.sine,u=o.cosine;return n>=0&&l>=0?s<u?1:s>u?-1:0:n<0&&l<0?s<u?-1:s>u?1:0:l<n?-1:l>n?1:0}}}]),t}(),T=0,$=function(){function t(a,i,r,n){e(this,t),this.id=++T,this.leftSE=a,a.segment=this,a.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=a,this.rings=r,this.windings=n}return i(t,null,[{key:"compare",value:function(e,t){var a=e.leftSE.point.x,i=t.leftSE.point.x,r=e.rightSE.point.x,n=t.rightSE.point.x;if(n<a)return 1;if(r<i)return-1;var s=e.leftSE.point.y,o=t.leftSE.point.y,l=e.rightSE.point.y,u=t.rightSE.point.y;if(a<i){if(o<s&&o<l)return 1;if(o>s&&o>l)return-1;var c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=t.comparePoint(e.rightSE.point);return 0!==h?h:-1}if(a>i){if(s<o&&s<u)return-1;if(s>o&&s>u)return 1;var d=t.comparePoint(e.leftSE.point);if(0!==d)return d;var v=e.comparePoint(t.rightSE.point);return v<0?1:v>0?-1:1}if(s<o)return-1;if(s>o)return 1;if(r<n){var m=t.comparePoint(e.rightSE.point);if(0!==m)return m}if(r>n){var p=e.comparePoint(t.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(r!==n){var f=l-s,g=r-a,y=u-o,w=n-i;if(f>g&&y<w)return 1;if(f<g&&y>w)return-1}return r>n?1:r<n||l<u?-1:l>u?1:e.id<t.id?-1:e.id>t.id?1:0}}]),i(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,a=this.rightSE.point,i=this.vector();if(t.x===a.x)return e.x===t.x?0:e.x<t.x?1:-1;var r=(e.y-t.y)/i.y,n=t.x+r*i.x;if(e.x===n)return 0;var s=(e.x-t.x)/i.x,o=t.y+s*i.y;return e.y===o?0:e.y<o?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),a=e.bbox(),i=w(t,a);if(null===i)return null;var r=this.leftSE.point,n=this.rightSE.point,s=e.leftSE.point,o=e.rightSE.point,l=y(t,s)&&0===this.comparePoint(s),u=y(a,r)&&0===e.comparePoint(r),c=y(t,o)&&0===this.comparePoint(o),h=y(a,n)&&0===e.comparePoint(n);if(u&&l)return h&&!c?n:!h&&c?o:null;if(u)return c&&r.x===o.x&&r.y===o.y?null:r;if(l)return h&&n.x===s.x&&n.y===s.y?null:s;if(h&&c)return null;if(h)return n;if(c)return o;var d=O(r,this.vector(),s,e.vector());return null===d?null:y(i,d)?k.round(d.x,d.y):null}},{key:"split",value:function(e){var a=[],i=void 0!==e.events,r=new I(e,!0),n=new I(e,!1),s=this.rightSE;this.replaceRightSE(n),a.push(n),a.push(r);var o=new t(r,s,this.rings.slice(),this.windings.slice());return I.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),I.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),n.checkForConsuming()),a}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,a=this.windings.length;t<a;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){var a=this,i=e;while(a.consumedBy)a=a.consumedBy;while(i.consumedBy)i=i.consumedBy;var r=t.compare(a,i);if(0!==r){if(r>0){var n=a;a=i,i=n}if(a.prev===i){var s=a;a=i,i=s}for(var o=0,l=i.rings.length;o<l;o++){var u=i.rings[o],c=i.windings[o],h=a.rings.indexOf(u);-1===h?(a.rings.push(u),a.windings.push(c)):a.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=a,i.leftSE.consumedBy=a.leftSE,i.rightSE.consumedBy=a.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,a=this._afterState.windings,i=this._afterState.multiPolys,r=0,n=this.rings.length;r<n;r++){var s=this.rings[r],o=this.windings[r],l=t.indexOf(s);-1===l?(t.push(s),a.push(o)):a[l]+=o}for(var u=[],c=[],h=0,d=t.length;h<d;h++)if(0!==a[h]){var v=t[h],m=v.poly;if(-1===c.indexOf(m))if(v.isExterior)u.push(m);else{-1===c.indexOf(m)&&c.push(m);var p=u.indexOf(v.poly);-1!==p&&u.splice(p,1)}}for(var f=0,g=u.length;f<g;f++){var y=u[f].multiPoly;-1===i.indexOf(y)&&i.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(W.type){case"union":var a=0===e.length,i=0===t.length;this._isInResult=a!==i;break;case"intersection":var r,n;e.length<t.length?(r=e.length,n=t.length):(r=t.length,n=e.length),this._isInResult=n===W.numMultiPolys&&r<n;break;case"xor":var s=Math.abs(e.length-t.length);this._isInResult=s%2===1;break;case"difference":var o=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=o(e)!==o(t);break;default:throw new Error("Unrecognized operation type found ".concat(W.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,a,i){var r,n,s,o=I.comparePoints(e,a);if(o<0)r=e,n=a,s=1;else{if(!(o>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=a,n=e,s=-1}var l=new I(r,!0),u=new I(n,!1);return new t(l,u,[i],[s])}}]),t}(),R=function(){function t(a,i,r){if(e(this,t),!Array.isArray(a)||0===a.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!==typeof a[0][0]||"number"!==typeof a[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var n=k.round(a[0][0],a[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var s=n,o=1,l=a.length;o<l;o++){if("number"!==typeof a[o][0]||"number"!==typeof a[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=k.round(a[o][0],a[o][1]);u.x===s.x&&u.y===s.y||(this.segments.push($.fromRing(s,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),s=u)}n.x===s.x&&n.y===s.y||this.segments.push($.fromRing(s,n,this))}return i(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,a=this.segments.length;t<a;t++){var i=this.segments[t];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),t}(),B=function(){function t(a,i){if(e(this,t),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new R(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,n=a.length;r<n;r++){var s=new R(a[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=i}return i(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,a=this.interiorRings.length;t<a;t++)for(var i=this.interiorRings[t].getSweepEvents(),r=0,n=i.length;r<n;r++)e.push(i[r]);return e}}]),t}(),z=function(){function t(a,i){if(e(this,t),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof a[0][0][0]&&(a=[a])}catch(o){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,n=a.length;r<n;r++){var s=new B(a[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=i}return i(t,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,a=this.polys.length;t<a;t++)for(var i=this.polys[t].getSweepEvents(),r=0,n=i.length;r<n;r++)e.push(i[r]);return e}}]),t}(),G=function(){function t(a){e(this,t),this.events=a;for(var i=0,r=a.length;i<r;i++)a[i].segment.ringOut=this;this.poly=null}return i(t,null,[{key:"factory",value:function(e){for(var a=[],i=0,r=e.length;i<r;i++){var n=e[i];if(n.isInResult()&&!n.ringOut){var s=null,o=n.leftSE,l=n.rightSE,u=[o],c=o.point,h=[];while(1){if(s=o,o=l,u.push(o),o.point===c)break;while(1){var d=o.getAvailableLinkedEvents();if(0===d.length){var v=u[0].point,m=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(v.x,",")+" ".concat(v.y,"]. Last matching segment found ends at")+" [".concat(m.x,", ").concat(m.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var p=null,f=0,g=h.length;f<g;f++)if(h[f].point===o.point){p=f;break}if(null===p){h.push({index:u.length,point:o.point});var y=o.getLeftmostComparator(s);l=d.sort(y)[0].otherSE;break}var w=h.splice(p)[0],_=u.splice(w.index);_.unshift(_[0].otherSE),a.push(new t(_.reverse()))}}a.push(new t(u))}}return a}}]),i(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],a=1,i=this.events.length-1;a<i;a++){var r=this.events[a].point,n=this.events[a+1].point;0!==L(r,e,n)&&(t.push(r),e=r)}if(1===t.length)return null;var s=t[0],o=t[1];0===L(s,e,o)&&t.shift(),t.push(t[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,h=[],d=u;d!=c;d+=l)h.push([t[d].x,t[d].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,a=this.events.length;t<a;t++){var i=this.events[t];I.compare(e,i)>0&&(e=i)}var r=e.segment.prevInResult(),n=r?r.prevInResult():null;while(1){if(!r)return null;if(!n)return r.ringOut;if(n.ringOut!==r.ringOut)return n.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=n.prevInResult(),n=r?r.prevInResult():null}}}]),t}(),V=function(){function t(a){e(this,t),this.exteriorRing=a,a.poly=this,this.interiorRings=[]}return i(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,a=this.interiorRings.length;t<a;t++){var i=this.interiorRings[t].getGeom();null!==i&&e.push(i)}return e}}]),t}(),j=function(){function t(a){e(this,t),this.rings=a,this.polys=this._composePolys(a)}return i(t,[{key:"getGeom",value:function(){for(var e=[],t=0,a=this.polys.length;t<a;t++){var i=this.polys[t].getGeom();null!==i&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var t=[],a=0,i=e.length;a<i;a++){var r=e[a];if(!r.poly)if(r.isExteriorRing())t.push(new V(r));else{var n=r.enclosingRing();n.poly||t.push(new V(n)),n.poly.addInterior(r)}}return t}}]),t}(),Z=function(){function t(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.compare;e(this,t),this.queue=a,this.tree=new h(i),this.segments=[]}return i(t,[{key:"process",value:function(e){var t=e.segment,a=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),a;var i=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!i)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");var r=i,n=i,s=void 0,o=void 0;while(void 0===s)r=this.tree.prev(r),null===r?s=null:void 0===r.key.consumedBy&&(s=r.key);while(void 0===o)n=this.tree.next(n),null===n?o=null:void 0===n.key.consumedBy&&(o=n.key);if(e.isLeft){var l=null;if(s){var u=s.getIntersection(t);if(null!==u&&(t.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var c=this._splitSafely(s,u),h=0,d=c.length;h<d;h++)a.push(c[h])}var v=null;if(o){var m=o.getIntersection(t);if(null!==m&&(t.isAnEndpoint(m)||(v=m),!o.isAnEndpoint(m)))for(var p=this._splitSafely(o,m),f=0,g=p.length;f<g;f++)a.push(p[f])}if(null!==l||null!==v){var y=null;if(null===l)y=v;else if(null===v)y=l;else{var w=I.comparePoints(l,v);y=w<=0?l:v}this.queue.remove(t.rightSE),a.push(t.rightSE);for(var _=t.split(y),b=0,x=_.length;b<x;b++)a.push(_[b])}a.length>0?(this.tree.remove(t),a.push(e)):(this.segments.push(t),t.prev=s)}else{if(s&&o){var S=s.getIntersection(o);if(null!==S){if(!s.isAnEndpoint(S))for(var E=this._splitSafely(s,S),k=0,C=E.length;k<C;k++)a.push(E[k]);if(!o.isAnEndpoint(S))for(var M=this._splitSafely(o,S),L=0,N=M.length;L<N;L++)a.push(M[L])}}this.tree.remove(t)}return a}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var a=e.rightSE;this.queue.remove(a);var i=e.split(t);return i.push(a),void 0===e.consumedBy&&this.tree.insert(e),i}}]),t}(),q="undefined"!==typeof t&&Object({NODE_ENV:"production",BASE_URL:"/c2c_ui/master/"}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y="undefined"!==typeof t&&Object({NODE_ENV:"production",BASE_URL:"/c2c_ui/master/"}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,U=function(){function t(){e(this,t)}return i(t,[{key:"run",value:function(e,t,a){W.type=e,k.reset();for(var i=[new z(t,!0)],r=0,n=a.length;r<n;r++)i.push(new z(a[r],!1));if(W.numMultiPolys=i.length,"difference"===W.type){var s=i[0],o=1;while(o<i.length)null!==w(i[o].bbox,s.bbox)?o++:i.splice(o,1)}if("intersection"===W.type)for(var l=0,u=i.length;l<u;l++)for(var c=i[l],d=l+1,v=i.length;d<v;d++)if(null===w(c.bbox,i[d].bbox))return[];for(var m=new h(I.compare),p=0,f=i.length;p<f;p++)for(var g=i[p].getSweepEvents(),y=0,_=g.length;y<_;y++)if(m.insert(g[y]),m.size>q)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");var b=new Z(m),x=m.size,S=m.pop();while(S){var E=S.key;if(m.size===x){var C=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(m.size>q)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>Y)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=b.process(E),L=0,N=M.length;L<N;L++){var D=M[L];void 0===D.consumedBy&&m.insert(D)}x=m.size,S=m.pop()}k.reset();var F=G.factory(b.segments),P=new j(F);return P.getGeom()}}]),t}(),W=new U,K=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return W.run("union",e,a)},X=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return W.run("intersection",e,a)},H=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return W.run("xor",e,a)},J=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return W.run("difference",e,a)},Q={union:K,intersection:X,xor:H,difference:J};return Q}))}).call(this,a("4362"))},dd90:function(e,t,a){},e004:function(e,t,a){e.exports=a.p+"img/logo-ensg.35fbf647.webp"},e0a2:function(e,t,a){"use strict";a("6d23")},e375:function(e,t,a){"use strict";a("bd20")},e457:function(e,t,a){},e469:function(e,t,a){"use strict";a("9e38")},e7e3:function(e,t,a){"use strict";a("dd90")},ec2f:function(e,t,a){},efa0:function(e,t,a){"use strict";a("03a8")},f6c4:function(e,t,a){"use strict";a("3a24")},fc52:function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.4b665657.jpg"},ff77:function(e,t,a){"use strict";a("d10a")}}]);
//# sourceMappingURL=yeti.b1df00bd.js.map