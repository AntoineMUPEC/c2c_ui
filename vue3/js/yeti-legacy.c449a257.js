(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["yeti"],{"0491":function(e,t,a){},"0c6e":function(e,t,a){e.exports=a.p+"img/logo-ensg.12db1227.avif"},"0e11":function(e,t,a){"use strict";a("3782")},"119b":function(e,t,a){},1247:function(e,t,a){"use strict";a("bd8c")},3782:function(e,t,a){},"3d7f":function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.1d7d0bdd.avif"},"3da0":function(e,t,a){"use strict";a("b6ab")},"48fc":function(e,t,a){},"51c6":function(e,t,a){"use strict";a("48fc")},5514:function(e,t,a){},"60a4":function(e,t,a){e.exports=a.p+"img/levels-danger.ab1771e4.svg"},7474:function(e,t,a){"use strict";a("cf30")},"74f0":function(e,t,a){"use strict";a("a809")},"7e0b":function(e,t,a){"use strict";a("9ef1")},"868c":function(e,t,a){"use strict";a("5514")},"89a1":function(e,t,a){},9209:function(e,t,a){"use strict";a.r(t);var o=a("1786"),c=a("e004"),i=a.n(c),r=a("0c6e"),n=a.n(r),s=a("aa66"),l=a.n(s),d=a("d315"),b=a.n(d),u=a("3d7f"),h=a.n(u),p=a("fc52"),m=a.n(p);const O=Object(o["withScopeId"])("data-v-b6fce666");Object(o["pushScopeId"])("data-v-b6fce666");const j=i.a,g=n.a,v=b.a,f=h.a,V={class:"section"},N={class:"box"},y={class:"title is-1"},w={class:"yeti-icon is-inline-block"},x=Object(o["createTextVNode"])("YETI - A preparation tool for your outing"),k={class:"yeti-app"},D={key:0,class:"box yeti-overlay"},T=Object(o["createTextVNode"])(" I read and understood the interest and limitations of YETI "),S=Object(o["createTextVNode"])("Launch YETI"),F={key:1,class:"box yeti-overlay"},B=Object(o["createTextVNode"])("Go back to YETI"),E={class:"columns yeti-content"},L={class:"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container"},C={class:"columns mb-0 yeti-columns--reverse is-mobile"},I={class:"column is-narrow pb-0"},M=Object(o["createTextVNode"])(" FAQ? "),$={class:"box"},_=Object(o["createVNode"])("div",{class:"box yeti-logos"},[Object(o["createVNode"])("div",{class:"columns is-mobile is-vcentered"},[Object(o["createVNode"])("div",{class:"column has-text-centered"},[Object(o["createVNode"])("a",{href:"http://www.ensg.eu"},[Object(o["createVNode"])("picture",null,[Object(o["createVNode"])("source",{srcset:j,type:"image/webp"}),Object(o["createVNode"])("source",{srcset:g,type:"image/avif"}),Object(o["createVNode"])("img",{src:l.a,alt:"Logo ENSG",width:"120",loading:"lazy"})])])]),Object(o["createVNode"])("div",{class:"column has-text-centered"},[Object(o["createVNode"])("a",{href:"https://www.petzl.com/fondation/fondation-petzl?language=fr"},[Object(o["createVNode"])("picture",null,[Object(o["createVNode"])("source",{srcset:v,type:"image/webp"}),Object(o["createVNode"])("source",{srcset:f,type:"image/avif"}),Object(o["createVNode"])("img",{src:m.a,alt:"Logo Fondation Petzl",width:"90",loading:"lazy"})])])])])],-1);Object(o["popScopeId"])();const z=O((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("html-header"),s=Object(o["resolveComponent"])("icon-yeti"),l=Object(o["resolveComponent"])("yeti-article"),d=Object(o["resolveComponent"])("input-checkbox"),b=Object(o["resolveComponent"])("router-link"),u=Object(o["resolveComponent"])("tabs"),h=Object(o["resolveComponent"])("validation-button"),p=Object(o["resolveComponent"])("sub-panel-bra"),m=Object(o["resolveComponent"])("sub-panel-methods"),j=Object(o["resolveComponent"])("panel"),g=Object(o["resolveComponent"])("sub-panel-course"),v=Object(o["resolveComponent"])("yeti-map"),f=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",V,[Object(o["createVNode"])(n,{title:"Yeti"}),Object(o["createVNode"])("div",N,[Object(o["createVNode"])("h1",y,[Object(o["createVNode"])("div",w,[Object(o["createVNode"])(s)]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[x],512),[[f]])])]),Object(o["createVNode"])("div",k,[i.showDisclaimer?(Object(o["openBlock"])(),Object(o["createBlock"])("div",D,[Object(o["createVNode"])(l,{class:"yeti-article--disclaimer",article:i.articles.disclaimer},null,8,["article"]),Object(o["createVNode"])("form",{action:"#",onSubmit:t[2]||(t[2]=(...e)=>r.onSubmitDisclaimer&&r.onSubmitDisclaimer(...e))},[Object(o["withDirectives"])(Object(o["createVNode"])(d,{modelValue:i.checkDisclaimer,"onUpdate:modelValue":t[1]||(t[1]=e=>i.checkDisclaimer=e)},{default:O(()=>[T],void 0,!0),_:1},8,["modelValue"]),[[f]]),Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:"button is-primary",disabled:!i.checkDisclaimer},[S],8,["disabled"]),[[f]])],32)])):Object(o["createCommentVNode"])("",!0),"faq"===e.$route.params.page?(Object(o["openBlock"])(),Object(o["createBlock"])("div",F,[Object(o["createVNode"])("p",null,[Object(o["withDirectives"])(Object(o["createVNode"])(b,{to:"."},{default:O(()=>[B],void 0,!0),_:1},512),[[f]])]),Object(o["createVNode"])(l,{class:"yeti-article--disclaimer",article:i.articles.disclaimer},null,8,["article"]),Object(o["createVNode"])(l,{article:i.articles.faq},null,8,["article"])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",E,[Object(o["createVNode"])("div",L,[Object(o["createVNode"])("div",C,[Object(o["createVNode"])("ul",I,[Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])(b,{class:"is-block yetitabs-link",to:e.$route.fullPath+"/faq"},{default:O(()=>[M],void 0,!0),_:1},8,["to"]),[[f]])])]),Object(o["createVNode"])(u,{tabs:i.tabs,"active-tab":i.activeTab,"onUpdate:active-tab":t[3]||(t[3]=e=>i.activeTab=e),"has-features":r.hasFeatures},null,8,["tabs","active-tab","has-features"])]),Object(o["createVNode"])("div",$,[Object(o["createVNode"])(j,{ref:"panel0",index:0,"active-tab":i.activeTab,class:"is-relative"},{default:O(()=>[Object(o["createVNode"])(h,{class:"is-hidden-mobile yeti-validation--top","current-error":i.currentError,loading:i.promise,onClick:r.compute,tabindex:"-1"},null,8,["current-error","loading","onClick"]),Object(o["createVNode"])(p,{bra:i.bra,"onUpdate:bra":t[4]||(t[4]=e=>i.bra=e),mountains:i.mountains},null,8,["bra","mountains"]),Object(o["createVNode"])(m,{method:i.method,"onUpdate:method":t[5]||(t[5]=e=>i.method=e),bra:i.bra,onWarnAboutMethodBra:r.warnAboutMethodBra},null,8,["method","bra","onWarnAboutMethodBra"]),Object(o["withDirectives"])(Object(o["createVNode"])(h,{class:"yeti-validation--bottom","current-error":i.currentError,loading:i.promise,onClick:r.compute},null,8,["current-error","loading","onClick"]),[[o["vShow"],i.method.type]])],void 0,!0),_:1},8,["active-tab"]),Object(o["createVNode"])(j,{ref:"panel1",index:1,"active-tab":i.activeTab},{default:O(()=>[Object(o["createVNode"])(g,{map:i.yetiMap,features:i.features,"features-title":i.featuresTitle,"onUpdate:features-title":t[6]||(t[6]=e=>i.featuresTitle=e),onGpx:r.onGpxLoaded},null,8,["map","features","features-title","onGpx"])],void 0,!0),_:1},8,["active-tab"])]),_]),Object(o["createVNode"])(v,{ref:"map",gpx:i.gpx,"active-tab":i.activeTab,"valid-min-zoom":i.validFormData.minZoom,"map-zoom":i.mapZoom,"onUpdate:map-zoom":t[7]||(t[7]=e=>i.mapZoom=e),"computed-extent":i.yetiExtent,"computed-data":i.yetiImage,mountains:i.mountains,"onUpdate:mountains":t[8]||(t[8]=e=>i.mountains=e),"area-ok":i.areaOk,"onUpdate:area-ok":t[9]||(t[9]=e=>i.areaOk=e),features:i.features,"onUpdate:features":t[10]||(t[10]=e=>i.features=e),"features-title":i.featuresTitle,"onUpdate:features-title":t[11]||(t[11]=e=>i.featuresTitle=e)},null,8,["gpx","active-tab","valid-min-zoom","map-zoom","computed-extent","computed-data","mountains","area-ok","features","features-title"])])])])});var P=a("bc3a"),G=a.n(P);const A=Object(o["withScopeId"])("data-v-62129744");Object(o["pushScopeId"])("data-v-62129744");const R={key:0,class:"yeti-article"};Object(o["popScopeId"])();const Y=A((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("sub-panel-title"),s=Object(o["resolveComponent"])("markdown-section");return r.document?(Object(o["openBlock"])(),Object(o["createBlock"])("div",R,[Object(o["createVNode"])(n,null,{default:A(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.title),1)],void 0,!0),_:1}),Object(o["createVNode"])(s,{document:r.document,field:r.fields.description,"hide-title":""},null,8,["document","field"])])):Object(o["createCommentVNode"])("",!0)}),Z=Object(o["withScopeId"])("data-v-43c30758");Object(o["pushScopeId"])("data-v-43c30758");const q={class:"columns is-mobile"},U={class:"column"},K={class:"title is-3"};Object(o["popScopeId"])();const W=Z((e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",q,[Object(o["createVNode"])("div",U,[Object(o["createVNode"])("h2",K,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])])])));a("51c6");const J={};J.render=W,J.__scopeId="data-v-43c30758";var X=J,H=a("188b"),Q=a("25c4"),ee=a("7306"),te={components:{SubPanelTitle:X,MarkdownSection:ee["a"]},props:{article:{type:Object,required:!0}},data(){return{promise:null}},computed:{id(){return this.article.id},title(){return this.article.title},document(){var e,t;return null!==(e=null===(t=this.promise)||void 0===t?void 0:t.data)&&void 0!==e?e:null},fields(){return Q["a"].objectDefinitions.article.fields},lang(){return this.$language.current}},watch:{lang(){this.cookDocument()}},mounted(){this.cookDocument()},methods:{cookDocument(){H["a"].article.getCooked(this.id,this.$language.current).then(e=>{this.promise=e})}}};a("7474");te.render=Y,te.__scopeId="data-v-62129744";var ae=te;const oe=Object(o["withScopeId"])("data-v-6a9ccc68"),ce=oe((e,t,a,c,i,r)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"yeti-panel",role:"tabpanel",id:"panel"+a.index,"aria-labelledby":"tab"+a.index,hidden:a.activeTab!==a.index},[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)],8,["id","aria-labelledby","hidden"])));var ie={props:{index:{type:Number,required:!0},activeTab:{type:Number,required:!0}}};a("0e11");ie.render=ce,ie.__scopeId="data-v-6a9ccc68";var re=ie;const ne=Object(o["withScopeId"])("data-v-df986eea");Object(o["pushScopeId"])("data-v-df986eea");const se={class:"yeti-subpanel"},le=Object(o["createTextVNode"])("Danger level"),de={class:"columns is-mobile"},be={class:"column"},ue={viewBox:"0 0 100 100",width:"120",height:"120"},he=Object(o["createVNode"])("polygon",{style:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},points:"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 "},null,-1),pe={style:{fill:"none",stroke:"#000","stroke-miterlimit":"10"},x1:"10",y1:"61.5",x2:"90",y2:"61.5"},me={class:"input-bra-high select is-small"},Oe=Object(o["createStaticVNode"])('<option selected data-v-df986eea></option><option value="1" data-v-df986eea>1</option><option value="2" data-v-df986eea>2</option><option value="3" data-v-df986eea>3</option><option value="4" data-v-df986eea>4</option>',5),je={class:"input-bra-threshold control"},ge={for:"inputThreshold"},ve=Object(o["createTextVNode"])("Altitude"),fe={class:"input-bra-low select is-small"},Ve=Object(o["createStaticVNode"])('<option selected data-v-df986eea></option><option value="1" data-v-df986eea>1</option><option value="2" data-v-df986eea>2</option><option value="3" data-v-df986eea>3</option><option value="4" data-v-df986eea>4</option>',5),Ne=Object(o["createTextVNode"])("Different high/low danger?"),ye={class:"yetimountains"},we=Object(o["createTextVNode"])("Avalanche bulletins"),xe={key:0},ke={key:0},De={class:"column yetiform-info"},Te=Object(o["createTextVNode"])("Get avalanche bulletins from Météo-France website"),Se={class:"yetimountains-listtitle"},Fe={class:"yetimountains-list"},Be={key:1},Ee={class:"column yetiform-info"},Le=Object(o["createTextVNode"])("Massifs could not be loaded");Object(o["popScopeId"])();const Ce=ne((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("sub-panel-title"),s=Object(o["resolveComponent"])("input-checkbox"),l=Object(o["resolveComponent"])("counter"),d=Object(o["resolveComponent"])("fa-icon"),b=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",se,[Object(o["createVNode"])(n,null,{default:ne(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[le],512),[[b]])],void 0,!0),_:1}),Object(o["createVNode"])("div",de,[Object(o["createVNode"])("div",be,[Object(o["createVNode"])("div",{class:["inputs-bra",{"inputs-bra-different":a.bra.isDifferent}]},[(Object(o["openBlock"])(),Object(o["createBlock"])("svg",ue,[he,Object(o["withDirectives"])(Object(o["createVNode"])("line",pe,null,512),[[o["vShow"],a.bra.isDifferent]])])),Object(o["createVNode"])("div",me,[Object(o["createVNode"])("select",{id:"selectBra",onChange:t[1]||(t[1]=e=>r.onChange(e,"high")),value:a.bra.high,"aria-label":e.$gettext("High danger level from the avalanche bulletin")},[Oe],40,["value","aria-label"])]),Object(o["withDirectives"])(Object(o["createVNode"])("div",je,[Object(o["withDirectives"])(Object(o["createVNode"])("label",ge,[ve],512),[[b]]),Object(o["createVNode"])("input",{id:"inputThreshold",class:"input is-small",type:"number",min:"0",max:"4800",step:"100",maxlength:"4",onChange:t[2]||(t[2]=e=>r.onChange(e,"altiThreshold")),value:a.bra.altiThreshold},null,40,["value"])],512),[[o["vShow"],a.bra.isDifferent]]),Object(o["withDirectives"])(Object(o["createVNode"])("div",fe,[Object(o["createVNode"])("select",{onChange:t[3]||(t[3]=e=>r.onChange(e,"low")),value:a.bra.low,"aria-label":"$gettext('Low danger level from the avalanche bulletin')"},[Ve],40,["value"])],512),[[o["vShow"],a.bra.isDifferent]])],2),Object(o["createVNode"])("div",null,[Object(o["createVNode"])(s,{onInput:t[4]||(t[4]=e=>r.onChange(e,"isDifferent")),value:a.bra.isDifferent,class:"control--bradifferent"},{default:ne(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Ne],512),[[b]])],void 0,!0),_:1},8,["value"])])])]),Object(o["createVNode"])("div",ye,[Object(o["createVNode"])("div",null,[Object(o["createVNode"])("p",{class:"yetimountains-title",onClick:t[5]||(t[5]=e=>i.showMountainsList=!i.showMountainsList)},[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[we],512),[[b]]),r.showVisibleMountains?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0},{default:ne(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.countVisibleMountains),1)],void 0,!0),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(d,{class:"yetimountains-arrow is-size-6 is-pulled-right has-cursor-pointer no-print",icon:"angle-down",rotation:i.showMountainsList?180:void 0},null,8,["rotation"])])]),i.showMountainsList?(Object(o["openBlock"])(),Object(o["createBlock"])("div",xe,[r.showVisibleMountains?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ke,[Object(o["withDirectives"])(Object(o["createVNode"])("p",De,[Te],512),[[b]]),Object(o["createVNode"])("dl",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.mountains.visibleMountains,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t},[Object(o["createVNode"])("dt",Se,Object(o["toDisplayString"])(t),1),Object(o["createVNode"])("div",Fe,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e,e=>(Object(o["openBlock"])(),Object(o["createBlock"])("dd",{class:"yetimountains-listelement",key:e.title},[Object(o["createVNode"])("a",{href:e.urls[0].url,target:"_blank"},[Object(o["createVNode"])(d,{icon:"external-link-alt"}),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.title),1)],8,["href"])]))),128))])]))),128))])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",Be,[Object(o["withDirectives"])(Object(o["createVNode"])("p",Ee,[Le],512),[[b]])]))])):Object(o["createCommentVNode"])("",!0)])])}),Ie=Object(o["withScopeId"])("data-v-79e0b738"),Me=Ie((e,t,a,c,i,r)=>(Object(o["openBlock"])(),Object(o["createBlock"])("span",{class:["yeti-counter",{"has-background-primary":a.isPrimary}]},[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)],2)));var $e={props:{isPrimary:{type:Boolean,default:!1}}};a("cf9c");$e.render=Me,$e.__scopeId="data-v-79e0b738";var _e=$e,ze={components:{Counter:_e,SubPanelTitle:X},props:{bra:{type:Object,default:null},mountains:{type:Object,required:!0}},data(){return{showMountainsList:!1}},computed:{showVisibleMountains(){return this.countVisibleMountains>=0},countVisibleMountains(){return this.mountains.visibleMountains?Object.values(this.mountains.visibleMountains).reduce((e,t)=>e+t.length,0):-1}},watch:{"bra.isDifferent":"checkBraIsDifferent"},methods:{onChange(e,t){const a="isDifferent"===t?e:e.target.value;this.$emit("update:bra",Object.assign(this.bra,{[t]:a}))},checkBraIsDifferent(){this.bra.isDifferent||(this.bra.low=null,this.bra.altiThreshold=null)}}};a("ec32");ze.render=Ce,ze.__scopeId="data-v-df986eea";var Pe=ze;const Ge=Object(o["withScopeId"])("data-v-05c9c091");Object(o["pushScopeId"])("data-v-05c9c091");const Ae={class:"yeti-subpanel"},Re=Object(o["createTextVNode"])("Route"),Ye={key:0},Ze={class:"columns is-mobile"},qe={class:"column"},Ue={class:"features-title"},Ke=Object(o["createTextVNode"])(" Add title… "),We={class:"column is-narrow"},Je=Object(o["createTextVNode"])("Delete route"),Xe={class:"ml-5 mb-5"},He={class:"yetiform-info is-italic is-marginless"},Qe=Object(o["createTextVNode"])("Lines chunks"),et=Object(o["createTextVNode"])("Export"),tt={class:"columns is-vcentered is-mobile"},at={class:"column"},ot={class:"form-export"},ct={class:"column is-narrow"},it=Object(o["createTextVNode"])("Export route"),rt={class:"yetiform-note mt-5"},nt=Object(o["createTextVNode"])("Drawing tips"),st={class:"content-ul"},lt={"translate-context":"yeti"},dt=Object(o["createTextVNode"])("Draw"),bt=Object(o["createTextVNode"])(),ut=Object(o["createTextVNode"])("new lines chunks"),ht={"translate-context":"yeti"},pt=Object(o["createTextVNode"])("Delete"),mt=Object(o["createTextVNode"])("last point with the Backspace key"),Ot=Object(o["createTextVNode"])("On a drawn line"),jt={class:"content-ul"},gt={"translate-context":"yeti"},vt=Object(o["createTextVNode"])("Edit"),ft=Object(o["createTextVNode"])(),Vt=Object(o["createTextVNode"])("points by moving them"),Nt={"translate-context":"yeti"},yt=Object(o["createTextVNode"])("Create"),wt=Object(o["createTextVNode"])("a new point on an existing line"),xt=Object(o["createTextVNode"])("Delete a point"),kt=Object(o["createTextVNode"])(),Dt=Object(o["createTextVNode"])("with Alt + clic"),Tt=Object(o["createTextVNode"])("From the interface"),St={class:"content-ul"},Ft=Object(o["createTextVNode"])("Delete a line chunk"),Bt=Object(o["createTextVNode"])("Delete route"),Et=Object(o["createTextVNode"])(),Lt=Object(o["createTextVNode"])("to start or load a new one"),Ct={key:1},It=Object(o["createTextVNode"])("No route right now"),Mt={class:"load-gpx"},$t=Object(o["createTextVNode"])(" Upload a GPS track "),_t={class:"control upload-button"},zt={class:"yetiform-note mt-5"},Pt=Object(o["createTextVNode"])("Draw right on the map"),Gt=Object(o["createTextVNode"])(),At=Object(o["createTextVNode"])("to start a new route");Object(o["popScopeId"])();const Rt=Ge((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("sub-panel-title"),s=Object(o["resolveComponent"])("icon-route"),l=Object(o["resolveComponent"])("fa-icon"),d=Object(o["resolveComponent"])("features-list"),b=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Ae,[Object(o["createVNode"])(n,null,{default:Ge(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Re],512),[[b]])],void 0,!0),_:1}),a.features.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",Ye,[Object(o["createVNode"])("div",Ze,[Object(o["createVNode"])("div",qe,[Object(o["createVNode"])("p",Ue,[Object(o["createVNode"])(s,{class:"icon document-icon"}),Object(o["createVNode"])(l,{icon:"pen",class:"icon edit-icon"}),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"features-title-text features-title-placeholder",onClick:t[1]||(t[1]=(...e)=>r.onEditNewFeaturesTitle&&r.onEditNewFeaturesTitle(...e))},[Ke],512),[[o["vShow"],!r.hasFeaturesTitle],[b]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",{class:"features-title-text features-title-content",ref:"featuresTitle",tabindex:"0",contenteditable:"",spellcheck:"false",onBlur:t[2]||(t[2]=(...e)=>r.onEditFeaturesTitle&&r.onEditFeaturesTitle(...e)),onKeypress:t[3]||(t[3]=Object(o["withKeys"])(Object(o["withModifiers"])(()=>{},["prevent"]),["13"]))},Object(o["toDisplayString"])(i.editableFeaturesTitle),545),[[o["vShow"],r.hasFeaturesTitle]])])]),Object(o["createVNode"])("div",We,[Object(o["createVNode"])("button",{class:"button is-secondary is-small",onClick:t[4]||(t[4]=(...e)=>r.onRemoveFeatures&&r.onRemoveFeatures(...e))},[Object(o["createVNode"])(l,{icon:"trash",class:"trash-icon"}),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Je],512),[[b]])])])]),Object(o["createVNode"])("div",Xe,[Object(o["withDirectives"])(Object(o["createVNode"])("p",He,[Qe],512),[[b]]),Object(o["createVNode"])(d,{features:a.features,map:a.map},null,8,["features","map"])]),Object(o["createVNode"])(n,null,{default:Ge(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[et],512),[[b]])],void 0,!0),_:1}),Object(o["createVNode"])("div",tt,[Object(o["createVNode"])("div",at,[Object(o["createVNode"])("ul",ot,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(i.formats,e=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:e,class:"control is-flex"},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{id:"format"+e,type:"radio",name:"exportFormat",class:"is-checkradio is-primary",value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>i.format=e)},null,8,["id","value"]),[[o["vModelRadio"],i.format]]),Object(o["createVNode"])("label",{for:"format"+e},Object(o["toDisplayString"])(e),9,["for"])]))),128))])]),Object(o["createVNode"])("div",ct,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:"button is-primary",onClick:t[6]||(t[6]=(...e)=>r.downloadCourse&&r.downloadCourse(...e))},[it],512),[[b]])])]),Object(o["createVNode"])("div",rt,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[nt],512),[[b]]),Object(o["createVNode"])("ul",st,[Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",lt,[dt],512),[[b]]),bt,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[ut],512),[[b]])]),Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",ht,[pt],512),[[b]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[mt],512),[[b]])])]),Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[Ot],512),[[b]]),Object(o["createVNode"])("ul",jt,[Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",gt,[vt],512),[[b]]),ft,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Vt],512),[[b]])]),Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",Nt,[yt],512),[[b]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[wt],512),[[b]])]),Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[xt],512),[[b]]),kt,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Dt],512),[[b]])])]),Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[Tt],512),[[b]]),Object(o["createVNode"])("ul",St,[Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Ft],512),[[b]])]),Object(o["createVNode"])("li",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Bt],512),[[b]]),Et,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Lt],512),[[b]])])])])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",Ct,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[It],512),[[b]]),Object(o["createVNode"])("div",Mt,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:["button is-primary",{"is-loading":i.loading}],disabled:i.loading,onClick:t[7]||(t[7]=(...e)=>r.onLoadGpx&&r.onLoadGpx(...e))},[$t],10,["disabled"]),[[b]]),Object(o["createVNode"])("div",_t,[Object(o["createVNode"])("input",{ref:"gpxFileInput",type:"file",onChange:t[8]||(t[8]=(...e)=>r.uploadGpx&&r.uploadGpx(...e)),accept:".gpx"},null,544)]),Object(o["createVNode"])("div",zt,[Object(o["createVNode"])("p",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Pt],512),[[b]]),Gt,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[At],512),[[b]])])])])]))])});var Yt=a("b166");const Zt=Object(o["withScopeId"])("data-v-6c22161a");Object(o["pushScopeId"])("data-v-6c22161a");const qt={class:"featureslist"};Object(o["popScopeId"])();const Ut=Zt((e,t,a,c,i,r)=>(Object(o["openBlock"])(),Object(o["createBlock"])("ul",qt,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.features,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:t,class:"featureslist-item tag",onMouseenter:t=>r.showFeature(e),onMouseleave:t=>r.hideFeature(e)},[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(r.nbPointsOnFeature(e))+" points",1),Object(o["createVNode"])("button",{class:"delete is-small",onClick:t=>r.removeFeature(e)},"x",8,["onClick"])],40,["onMouseenter","onMouseleave"]))),128))])));var Kt={props:{map:{type:Object,default:null},features:{type:Array,required:!0}},methods:{removeFeature(e){this.map.removeFeature(e)},showFeature(e){e.setStyle(e.get("highlightedStyle"))},hideFeature(e){e.setStyle(e.get("normalStyle"))},nbPointsOnFeature(e){return e.getGeometry().getCoordinates().length}}};a("f816");Kt.render=Ut,Kt.__scopeId="data-v-6c22161a";var Wt=Kt,Jt=a("dac7"),Xt=a("9944"),Ht={components:{FeaturesList:Wt,SubPanelTitle:X},props:{map:{type:Object,default:null},features:{type:Array,default:null},featuresTitle:{type:String,default:null}},data(){return{editableFeaturesTitle:"",newFeaturesTitle:!1,loading:!1,formats:["GPX","KML"],format:"GPX"}},computed:{hasFeaturesTitle(){return!(!this.editableFeaturesTitle.length&&!this.newFeaturesTitle)}},watch:{featuresTitle(){this.editableFeaturesTitle=this.featuresTitle}},mounted(){this.editableFeaturesTitle=this.featuresTitle},methods:{onEditFeaturesTitle(e){e.target.innerText.length||(this.newFeaturesTitle=!1),this.$emit("update:featuresTitle",e.target.innerText)},onEditNewFeaturesTitle(){this.newFeaturesTitle=!0,this.$nextTick(()=>{this.$refs.featuresTitle.focus()})},onLoadGpx(){this.$refs.gpxFileInput.click()},onRemoveFeatures(){this.map.removeFeatures()},uploadGpx(e){this.loading=!0;const t=new FileReader;t.onload=()=>{this.loading=!1,this.$emit("gpx",t.result)},t.readAsText(e.target.files[0]),this.$refs.gpxFileInput.value="",this.$emit("gpx",null)},downloadCourse(){"GPX"===this.format?this.downloadFeatures(new Jt["a"].format.GPX,".gpx","application/gpx+xml"):"KML"===this.format&&this.downloadFeatures(new Jt["a"].format.KML,".kml","application/vnd.google-earth.kml+xml")},downloadFeatures(e,t,a){const o=this.features;o[0].set("name",this.featuresTitle);const c=this.setFilename(t),i=e.writeFeatures(o,{featureProjection:"EPSG:3857"});Xt["a"].download(i,c,a+";charset=utf-8")},setFilename(e){return Object(Yt["a"])(new Date,"yyyy-MM-dd_HH-mm-ss")+e}}};a("3da0");Ht.render=Rt,Ht.__scopeId="data-v-05c9c091";var Qt=Ht,ea=a("60a4"),ta=a.n(ea);const aa=Object(o["withScopeId"])("data-v-b13e18f2");Object(o["pushScopeId"])("data-v-b13e18f2");const oa=ta.a+"#level1",ca={class:"yeti-subpanel"},ia=Object(o["createTextVNode"])("Methods"),ra={class:"columns is-mobile yetitabs"},na={class:"yetiform-info"},sa=Object(o["createTextVNode"])("With the"),la=Object(o["createTextVNode"])("Beginner Reduction Method"),da=Object(o["createTextVNode"])(" (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin. "),ba={class:"yetiform-note"},ua=Object(o["createTextVNode"])(" As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly important. No parameter other than the danger level is specified. Orientation is ignored. "),ha={class:"yetiform-danger"},pa=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:oa,loading:"lazy"})],-1),ma=Object(o["createTextVNode"])("Danger rating - low"),Oa=Object(o["createTextVNode"])("I must not use slopes > 40°"),ja=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),ga=Object(o["createTextVNode"])("Danger rating - moderate"),va=Object(o["createTextVNode"])("I must not use slopes > 35°"),fa={class:"multiline"},Va=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),Na=Object(o["createTextVNode"])("Danger rating - considerable"),ya=Object(o["createTextVNode"])("I must not use slopes > 30°"),wa=Object(o["createVNode"])("br",null,null,-1),xa=Object(o["createTextVNode"])("including dominant slopes"),ka=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),Da=Object(o["createTextVNode"])("Danger rating - high to very high"),Ta=Object(o["createTextVNode"])("I choose to cancel the outing"),Sa=Object(o["createTextVNode"])("With the"),Fa=Object(o["createTextVNode"])("Elementary Reduction Method"),Ba=Object(o["createTextVNode"])(" (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin. "),Ea={key:0,class:"yetiform-info"},La={key:"tr1"},Ca=Object(o["createTextVNode"])("Orientations"),Ia={key:1,class:"yetiform-info"},Ma={key:"tr2"},$a=Object(o["createTextVNode"])("No orientation selected"),_a={class:"yetiform-note"},za=Object(o["createTextVNode"])(" Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most critical sectors presenting an increased risk. "),Pa={class:"yetiform-danger"},Ga={class:"multiline"},Aa=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),Ra=Object(o["createTextVNode"])("Danger rating - low"),Ya=Object(o["createTextVNode"])("Stay careful while skiing"),Za=Object(o["createVNode"])("br",null,null,-1),qa=Object(o["createTextVNode"])("risk of a rough fall on hard snow"),Ua=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),Ka=Object(o["createTextVNode"])("Danger rating - moderate"),Wa=Object(o["createTextVNode"])("I must not use slopes > 40°"),Ja={class:"multiline"},Xa=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),Ha=Object(o["createTextVNode"])("Danger rating - considerable"),Qa=Object(o["createTextVNode"])("I must not use slopes > 35°"),eo=Object(o["createVNode"])("br",null,null,-1),to=Object(o["createTextVNode"])("including dominant slopes"),ao={class:"multiline"},oo=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),co=Object(o["createTextVNode"])("Danger rating - high"),io=Object(o["createTextVNode"])("I must not use slopes > 30°"),ro=Object(o["createVNode"])("br",null,null,-1),no=Object(o["createTextVNode"])("including dominant slopes"),so=Object(o["createVNode"])("td",null,[Object(o["createVNode"])("img",{src:ta.a,loading:"lazy"})],-1),lo=Object(o["createTextVNode"])("Danger rating - very high"),bo=Object(o["createTextVNode"])("I choose to cancel the outing"),uo=Object(o["createTextVNode"])("With the"),ho=Object(o["createTextVNode"])("Professional Reduction Method"),po=Object(o["createTextVNode"])(" (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered. "),mo={class:"title is-3"},Oo=Object(o["createTextVNode"])("Hazard potential"),jo={class:"potential-danger-labels has-text-black"},go={key:0,class:"yetiform-info"},vo={key:"tr1"},fo=Object(o["createTextVNode"])("Hazard potential:"),Vo=Object(o["createTextVNode"])("Danger level:"),No={key:1,class:"yetiform-info"},yo={key:"tr2"},wo=Object(o["createTextVNode"])("No selected hazard potential. Set danger level first."),xo={class:"yetiform-note"},ko=Object(o["createTextVNode"])(" The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by selecting a potential within the danger level’s corresponding range. For example: the avalanche bulletin evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8. "),Do=Object(o["createTextVNode"])("Wet snow: orientation not taken into account"),To={class:"yetiform-note"},So=Object(o["createTextVNode"])("Be careful, in wet snow, no factor to reduce orientation or attendance can be applied."),Fo={class:"title is-3"},Bo=Object(o["createTextVNode"])("Group"),Eo={class:"yetiform-note"},Lo=Object(o["createTextVNode"])("Group size"),Co={class:"content-ul"},Io=Object(o["createTextVNode"])("Large group = 5 people and more"),Mo=Object(o["createTextVNode"])("Small group = 2 to 4 people"),$o=Object(o["createTextVNode"])("Load shedding distance"),_o={class:"content-ul"},zo=Object(o["createTextVNode"])("10 meters minimum while ascending"),Po=Object(o["createTextVNode"])("50 meters while descending"),Go=Object(o["createTextVNode"])(" The “slope traveled frequently” factor is not taken into account by the application, as it is often difficult to ascertain when preparing for an outing. ");Object(o["popScopeId"])();const Ao=aa((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("sub-panel-title"),s=Object(o["resolveComponent"])("input-orientation"),l=Object(o["resolveComponent"])("input-checkbox"),d=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ca,[Object(o["createVNode"])(n,null,{default:aa(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[ia],512),[[d]])],void 0,!0),_:1}),Object(o["createVNode"])("div",ra,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Object.keys(i.methods),e=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:e,class:"column yetitab"},[Object(o["createVNode"])("div",{class:["control yetitab-control",{"yetitab-control--selected":a.method.type===e}]},[Object(o["createVNode"])("input",{id:"c2c-method-"+e,type:"radio",name:"method",class:"is-checkradio is-primary",value:e,checked:e===a.method.type,disabled:"mrd"===e&&(4==a.bra.high||4==a.bra.low),onChange:t[1]||(t[1]=e=>r.onChange(e,"type"))},null,40,["id","value","checked","disabled"]),Object(o["createVNode"])("label",{for:"c2c-method-"+e,class:"yetitab-label",onClick:t=>r.warnAboutMethodBra(e)},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(i.methods[e][0])+" ",1),Object(o["createVNode"])("span",na,Object(o["toDisplayString"])(i.methods[e][1]),1)],8,["for","onClick"])],2)]))),128))]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])("p",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[sa],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[la],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[da],512),[[d]])]),Object(o["createVNode"])("div",ba,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[ua],512),[[d]])]),Object(o["createVNode"])("table",ha,[Object(o["createVNode"])("tr",null,[pa,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[ma],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("td",null,[Oa],512),[[d]])]),Object(o["createVNode"])("tr",null,[ja,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[ga],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("td",null,[va],512),[[d]])]),Object(o["createVNode"])("tr",fa,[Va,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Na],512),[[d]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[ya],512),[[d]]),wa,Object(o["withDirectives"])(Object(o["createVNode"])("small",null,[xa],512),[[d]])])]),Object(o["createVNode"])("tr",null,[ka,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Da],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("td",null,[Ta],512),[[d]])])])],512),[[o["vShow"],"mrd"==a.method.type]]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])("p",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Sa],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Fa],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Ba],512),[[d]])]),Object(o["createVNode"])(s,{value:a.method.orientation,onInput:t[2]||(t[2]=e=>r.onChange(e,"orientation")),class:"has-text-centered"},null,8,["value"]),0!=a.method.orientation.length?(Object(o["openBlock"])(),Object(o["createBlock"])("p",Ea,[Object(o["withDirectives"])(Object(o["createVNode"])("span",La,[Ca],512),[[d]]),Object(o["createTextVNode"])(": "+Object(o["toDisplayString"])(a.method.orientation.join(", ")),1)])):(Object(o["openBlock"])(),Object(o["createBlock"])("p",Ia,[Object(o["withDirectives"])(Object(o["createVNode"])("span",Ma,[$a],512),[[d]])])),Object(o["createVNode"])("div",_a,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[za],512),[[d]])]),Object(o["createVNode"])("table",Pa,[Object(o["createVNode"])("tr",Ga,[Aa,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Ra],512),[[d]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Ya],512),[[d]]),Za,Object(o["withDirectives"])(Object(o["createVNode"])("small",null,[qa],512),[[d]])])]),Object(o["createVNode"])("tr",null,[Ua,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Ka],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("td",null,[Wa],512),[[d]])]),Object(o["createVNode"])("tr",Ja,[Xa,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[Ha],512),[[d]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Qa],512),[[d]]),eo,Object(o["withDirectives"])(Object(o["createVNode"])("small",null,[to],512),[[d]])])]),Object(o["createVNode"])("tr",ao,[oo,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[co],512),[[d]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[io],512),[[d]]),ro,Object(o["withDirectives"])(Object(o["createVNode"])("small",null,[no],512),[[d]])])]),Object(o["createVNode"])("tr",null,[so,Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[lo],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("td",null,[bo],512),[[d]])])])],512),[[o["vShow"],"mre"==a.method.type]]),Object(o["withDirectives"])(Object(o["createVNode"])("div",null,[Object(o["createVNode"])("p",null,[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[uo],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("strong",null,[ho],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[po],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("h3",mo,[Oo],512),[[d]]),Object(o["createVNode"])("ul",jo,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(r.potentialDangerLabels,e=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:e.text,disabled:!a.bra.high||e.text<r.potentialDangerOptions.min||e.text>r.potentialDangerOptions.max,selected:a.method.potentialDanger==e.text,class:"potential-danger-label is-size-5",onClick:t=>r.onChange(e.text,"potentialDanger")},[Object(o["createVNode"])("span",{class:{"is-size-3 has-text-weight-bold":e.val}},Object(o["toDisplayString"])(e.text),3)],8,["disabled","selected","onClick"]))),128))]),a.method.potentialDanger?(Object(o["openBlock"])(),Object(o["createBlock"])("p",go,[Object(o["withDirectives"])(Object(o["createVNode"])("span",vo,[fo],512),[[d]]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(a.method.potentialDanger)+" (",1),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Vo],512),[[d]]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(a.bra.high)+") ",1)])):(Object(o["openBlock"])(),Object(o["createBlock"])("p",No,[Object(o["withDirectives"])(Object(o["createVNode"])("span",yo,[wo],512),[[d]])])),Object(o["createVNode"])("div",xo,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[ko],512),[[d]])]),Object(o["createVNode"])("p",null,[Object(o["createVNode"])(l,{value:a.method.wetSnow,onInput:t[3]||(t[3]=e=>r.onChange(e,"wetSnow"))},{default:aa(()=>[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Do],512),[[d]])],void 0,!0),_:1},8,["value"])]),Object(o["createVNode"])("div",To,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[So],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("h3",Fo,[Bo],512),[[d]]),Object(o["createVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(i.groupSizes,(e,c)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"control",key:c},[Object(o["createVNode"])("input",{id:"c2c-group-size-"+c,type:"radio",name:"groupSize",class:"is-checkradio is-primary",value:e.value,checked:e.value===a.method.groupSize,onChange:t[4]||(t[4]=e=>r.onChange(e,"groupSize"))},null,40,["id","value","checked"]),Object(o["createVNode"])("label",{for:"c2c-group-size-"+c},Object(o["toDisplayString"])(e.text),9,["for"])]))),128))]),Object(o["createVNode"])("div",Eo,[Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[Lo],512),[[d]]),Object(o["createVNode"])("ul",Co,[Object(o["withDirectives"])(Object(o["createVNode"])("li",null,[Io],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("li",null,[Mo],512),[[d]])]),Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[$o],512),[[d]]),Object(o["createVNode"])("ul",_o,[Object(o["withDirectives"])(Object(o["createVNode"])("li",null,[zo],512),[[d]]),Object(o["withDirectives"])(Object(o["createVNode"])("li",null,[Po],512),[[d]])])]),Object(o["withDirectives"])(Object(o["createVNode"])("p",null,[Go],512),[[d]])],512),[[o["vShow"],"mrp"==a.method.type]])])}),Ro={min:1,max:16,bra:[{min:1,max:2,val:2},{min:3,max:6,val:4},{min:6,max:12,val:8},{min:13,max:16,val:16}]};var Yo={components:{SubPanelTitle:X},props:{method:{type:Object,default:null},bra:{type:Object,default:null}},data(){return{methods:{mrd:["MRD",this.$gettext("Beginner")],mre:["MRE",this.$gettext("Elementary")],mrp:["MRP",this.$gettext("Expert")]},groupSizes:[{value:1,text:this.$gettext("No reduction factor")},{value:2.1,text:this.$gettext("Large group with load shedding distance")},{value:2.2,text:this.$gettext("Small group without distance")},{value:3,text:this.$gettext("Small group with load shedding distance")}]}},computed:{potentialDangerLabels(){const e=[];for(let t=Ro.min;t<=Ro.max;t++){const a={text:t};2!==t&&4!==t&&8!==t&&16!==t||(a.val=t),e.push(a)}return e},potentialDangerOptions(){return this.bra.high?Ro.bra[this.bra.high-1]:{val:void 0,min:1,max:16}}},watch:{"bra.high":"onBraChange"},methods:{onChange(e,t){let a=null;a="orientation"===t||"wetSnow"===t||"potentialDanger"===t?e:e.target.value,this.$emit("update:method",Object.assign(this.method,{[t]:a}))},warnAboutMethodBra(e){this.$emit("warn-about-method-bra",e)},onBraChange(){this.onChange(this.potentialDangerOptions.val,"potentialDanger")}}};a("74f0");Yo.render=Ao,Yo.__scopeId="data-v-b13e18f2";var Zo=Yo;const qo=Object(o["withScopeId"])("data-v-c6260810");Object(o["pushScopeId"])("data-v-c6260810");const Uo={class:"column pb-0 mb-0 tabs is-boxed yetitabs"},Ko={role:"tablist"},Wo=Object(o["createTextVNode"])("1");Object(o["popScopeId"])();const Jo=qo((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("counter");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Uo,[Object(o["createVNode"])("ul",Ko,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.tabs,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{role:"presentation",key:e,class:{"is-active":a.activeTab===t}},[Object(o["createVNode"])("a",{class:"yetitabs-link",role:"tab",href:"#panel"+t,id:"tab"+t,ref:"tab",refInFor:!0,"aria-selected":a.activeTab===t,tabindex:a.activeTab!==t&&-1,onClick:Object(o["withModifiers"])(e=>r.setActiveTab(t),["prevent"]),onKeydown:e=>r.setActiveTabKeyboard(e,t)},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e)+" ",1),1===t&&a.hasFeatures?(Object(o["openBlock"])(),Object(o["createBlock"])(n,{key:0,"is-primary":""},{default:qo(()=>[Wo],void 0,!0),_:1})):Object(o["createCommentVNode"])("",!0)],40,["href","id","aria-selected","tabindex","onClick","onKeydown"])],2))),128))])])});var Xo={components:{Counter:_e},props:{tabs:{type:Array,required:!0},activeTab:{type:Number,required:!0},hasFeatures:{type:Boolean,default:!1}},methods:{setActiveTab(e){this.$refs.tab[e].focus(),this.$emit("update:activeTab",e)},setActiveTabKeyboard(e,t){const a=37,o=39,c=40;let i=e.which===a?t-1:e.which===o?t+1:e.which===c?"down":null;null!==i&&(e.preventDefault(),"down"===i?this.$parent.$refs["panel"+t].$el.focus():this.tabs[i]&&this.setActiveTab(i))}}};a("7e0b");Xo.render=Jo,Xo.__scopeId="data-v-c6260810";var Ho=Xo;const Qo=Object(o["withScopeId"])("data-v-ad96ba08");Object(o["pushScopeId"])("data-v-ad96ba08");const ec={class:"columns"},tc={class:"column has-text-right"},ac=Object(o["createTextVNode"])(" Compute risk "),oc={key:0,class:"yetiform-error"};Object(o["popScopeId"])();const cc=Qo((e,t,a,c,i,r)=>{const n=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ec,[Object(o["createVNode"])("div",tc,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:["button is-primary",{"is-loading":a.loading}],disabled:a.loading,tabindex:a.tabindex,onClick:t[1]||(t[1]=t=>e.$emit("click"))},[ac],10,["disabled","tabindex"]),[[n]]),a.currentError?(Object(o["openBlock"])(),Object(o["createBlock"])("p",oc,[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(a.currentError),1)])):Object(o["createCommentVNode"])("",!0)])])});var ic={props:{currentError:{type:String,default:""},loading:{type:[Promise,Object],default:null},tabindex:{type:String,default:"0"}}};a("1247");ic.render=cc,ic.__scopeId="data-v-ad96ba08";var rc=ic;const nc=Object(o["withScopeId"])("data-v-28368954");Object(o["pushScopeId"])("data-v-28368954");const sc={class:"column map-container"},lc={class:"legend"},dc={class:"legend-button is-pulled-right ol-control"},bc=Object(o["createTextVNode"])("Legend"),uc={class:"legend-content"},hc={key:0,class:"is-italic"},pc=Object(o["createTextVNode"])("Legend will appear automatically with the generated image"),mc={key:1},Oc={class:"is-size-6 is-italic"},jc={key:0,class:"ol-control opacity"},gc={class:"opacity-slider"};Object(o["popScopeId"])();const vc=nc((e,t,a,c,i,r)=>{const n=Object(o["resolveComponent"])("vue-slider"),s=Object(o["resolveComponent"])("map-view"),l=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",sc,[Object(o["createVNode"])("div",lc,[Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",dc,[Object(o["createVNode"])("button",{type:"button",onClick:t[1]||(t[1]=e=>i.showLegend=!i.showLegend)},[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[bc],512),[[l]])])])]),Object(o["withDirectives"])(Object(o["createVNode"])("div",uc,[i.mapLegend?(Object(o["openBlock"])(),Object(o["createBlock"])("div",mc,[Object(o["createVNode"])("ul",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(i.mapLegend.items,(t,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:a},[Object(o["createVNode"])("span",{class:"legend-color",style:"background:"+t.color},null,4),Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(e.$gettext(t.text["en"])),1)]))),128))]),Object(o["createVNode"])("p",Oc,Object(o["toDisplayString"])(e.$gettext(i.mapLegend.comment["en"])),1)])):Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("p",hc,[pc],512)),[[l]])],512),[[o["vShow"],!0===i.showLegend]])]),i.yetiLayerLoaded?(Object(o["openBlock"])(),Object(o["createBlock"])("div",jc,[Object(o["createVNode"])("div",gc,[Object(o["createVNode"])(n,{modelValue:i.opacityYetiLayer,"onUpdate:modelValue":t[2]||(t[2]=e=>i.opacityYetiLayer=e),min:0,max:1,interval:.01,tooltip:"none",direction:"btt","rail-style":{background:"rgba(0,0,0,.25)"},"process-style":{background:"white"},onChange:r.onUpdateOpacityYetiLayer},null,8,["modelValue","interval","rail-style","onChange"])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{ref:"map","show-recenter-on":""},null,512)])});a("5319"),a("24df");const fc="RGE ALTI®",Vc=.75,Nc="/mountains_WGS84.json",yc="https://api.ensg.eu/yeti-extent",wc=new Jt["a"].style.Style({stroke:new Jt["a"].style.Stroke({color:"yellow",width:3})}),xc=[new Jt["a"].style.Style({stroke:new Jt["a"].style.Stroke({color:"rgba(255, 255, 0, .5)",width:8}),zIndex:1}),new Jt["a"].style.Style({stroke:new Jt["a"].style.Stroke({color:"red",width:3}),zIndex:1})];var kc={components:{VueSlider:()=>a.e("slider").then(a.t.bind(null,"4971",7))},props:{activeTab:{type:Number,required:!0},validMinZoom:{type:Number,required:!0},mapZoom:{type:Number,required:!0},computedExtent:{type:Array,required:!0},computedData:{type:String,default:null},mountains:{type:Object,required:!0},areaOk:{type:Boolean,required:!0},features:{type:Array,required:!0},gpx:{type:String,default:null},featuresTitle:{type:String,required:!0}},data(){return{featuresTitleFromSource:null,promiseDocument:null,yetiLayerLoaded:!1,showLegend:void 0,mapLegend:null,opacityYetiLayer:Vc,areas:[]}},computed:{localFeaturesTitle(){return this.featuresTitleFromSource?this.featuresTitleFromSource:this.features.length?this.featuresTitle:null},areasLayerStyle(){const e=2,t=4,a=Math.max(0,Math.min(this.mapZoom-6,e)),o=Math.max(0,Math.min(this.mapZoom-6,t))/4,c=6*o;return new Jt["a"].style.Style({stroke:new Jt["a"].style.Stroke({color:"hsla(30, 100%, 40%,"+o+")",width:a,lineDash:[c]})})}},watch:{gpx(){this.gpx&&this.addFeaturesFromGpx(this.gpx)},localFeaturesTitle(){this.$emit("update:featuresTitle",this.localFeaturesTitle)},activeTab(){0===this.activeTab?(this.drawInteraction.setActive(!1),this.modifyInteraction.setActive(!1),this.snapInteraction.setActive(!1)):(this.drawInteraction.setActive(!0),this.modifyInteraction.setActive(!0),this.snapInteraction.setActive(!0))},computedData(){this.drawYetiImage()},computedExtent(){this.drawExtent(this.computedExtent)}},mounted(){this.yetiLayer=new Jt["a"].layer.Image({source:new Jt["a"].source.ImageStatic({url:null,imageExtent:Jt["a"].extent.createEmpty()}),opacity:this.opacityYetiLayer}),this.extentLayer=new Jt["a"].layer.Vector({source:new Jt["a"].source.Vector,style:[new Jt["a"].style.Style({fill:new Jt["a"].style.Fill({color:"hsla(30, 100%, 60%, .45)"})}),new Jt["a"].style.Style({stroke:new Jt["a"].style.Stroke({color:"hsla(30, 100%, 40%, 1)",width:2}),geometry:e=>new Jt["a"].geom.Polygon([e.getGeometry().getCoordinates()[1]])})]}),this.areasLayer=new Jt["a"].layer.Vector({renderMode:"image",source:new Jt["a"].source.Vector,style:this.areasLayerStyle}),this.featuresLayer=new Jt["a"].layer.Vector({source:new Jt["a"].source.Vector,style:wc}),this.featuresLayerSource=this.featuresLayer.getSource(),this.mapView=this.$refs.map,this.map=this.$refs.map.map,this.view=this.map.getView(),this.map.addLayer(this.areasLayer),this.map.addLayer(this.yetiLayer),this.map.addLayer(this.extentLayer),this.map.addLayer(this.featuresLayer);const e=this.$route.params.document_id,t=this.$language.current;e&&H["a"]["route"].getCooked(e,t).then(this.addFeaturesFromDocument),this.addEvents(),this.addInteractions(),G.a.get(Nc).then(this.onMountainsResult),G.a.get(yc).then(this.onAreasResult)},methods:{getExtent(e){return this.mapView.getExtent(e)},clearLayers(){this.yetiLayer.setSource(null),this.yetiLayerLoaded=!1,this.extentLayer.getSource().clear()},addEvents(){this.map.un("pointermove",this.mapView.onPointerMove),this.map.un("click",this.mapView.onClick),this.map.on("moveend",this.onMapMoveEnd),this.featuresLayerSource.on("addfeature",this.onFeature)},addInteractions(){const e=this.featuresLayerSource;this.modifyInteraction=new Jt["a"].interaction.Modify({source:e}),this.map.addInteraction(this.modifyInteraction),this.drawInteraction=new Jt["a"].interaction.Draw({source:e,type:"LineString"}),this.map.addInteraction(this.drawInteraction),this.snapInteraction=new Jt["a"].interaction.Snap({source:e}),this.map.addInteraction(this.snapInteraction),this.drawInteraction.on("drawstart",this.onDrawStart),this.drawInteraction.on("drawend",this.onDrawEnd),this.modifyInteraction.on("modifyend",this.onModifyEnd),this.drawInteraction.setActive(!1),this.modifyInteraction.setActive(!1),this.snapInteraction.setActive(!1)},onMapMoveEnd(e){const t=Math.floor(10*e.map.getView().getZoom())/10;this.$emit("update:mapZoom",t),this.setVisibleMountains(),this.isAreaOK(),this.areasLayer.setStyle(this.areasLayerStyle)},fitMapToFeatures(){let e=Jt["a"].extent.createEmpty();Jt["a"].extent.extend(e,this.featuresLayerSource.getExtent()),this.view.fit(e,{size:this.map.getSize()}),this.view.setZoom(Math.max(this.validMinZoom,this.view.getZoom()))},addFeaturesFromGpx(e){this.promiseDocument=null,this.featuresLayerSource.clear(!0),this.loadingExternalFeatures=!0;const t=new Jt["a"].format.GPX,a=t.readFeatures(e,{featureProjection:"EPSG:3857"});a.map(this.addFeature),this.featuresTitleFromSource=this.getFeaturesTitleFromGpx(a),this.loadingExternalFeatures=!1,this.emitFeaturesEvent(),this.fitMapToFeatures()},addFeaturesFromDocument(e){this.loadingExternalFeatures=!0;const t=e.data.geometry.geom_detail,a=(new Jt["a"].format.GeoJSON).readFeature(t);this.addFeature(a),this.featuresTitleFromSource=this.getFeaturesTitleFromDocument(e),this.loadingExternalFeatures=!1,this.emitFeaturesEvent(),this.fitMapToFeatures()},addFeature(e){if("MultiLineString"===e.getGeometry().getType()){const t=e.getGeometry().getLineStrings();t.map(e=>new Jt["a"].Feature({geometry:e})).map(this.addFeature)}else{const t=e.getGeometry().getCoordinates().length;t>=2&&this.featuresLayerSource.addFeature(e)}},removeFeature(e){let t=!(1===this.featuresLayerSource.getFeatures().length&&!confirm(this.$gettext("Confirm delete")));t&&(this.featuresLayerSource.removeFeature(e),this.emitFeaturesEvent())},removeFeatures(){confirm(this.$gettext("Confirm delete"))&&(this.featuresLayerSource.clear(!0),this.emitFeaturesEvent())},emitFeaturesEvent(){const e=this.getFeaturesLayerFeatures();this.$emit("update:features",e),0===e.length&&(this.featuresTitleFromSource=null,this.$route.params.document_id&&this.$router.replace({path:"/"+this.$route.name}))},getFeaturesLayerFeatures(){return this.featuresLayerSource.getFeatures()},getFeaturesTitleFromGpx(e){if(e&&e.length){const t=e[0].getProperties();return t.name?t.name:this.$gettext("GPX file")}},getFeaturesTitleFromDocument(e){return this.$documentUtils.getDocumentTitle(e.data)},onFeature(e){e.feature.set("highlightedStyle",xc),this.loadingExternalFeatures||this.emitFeaturesEvent()},onDrawStart(){document.addEventListener("keydown",this.onKeyWhileDrawing),document.addEventListener("keypress",this.onKeyWhileDrawing)},onDrawEnd(){document.removeEventListener("keydown",this.onKeyWhileDrawing),document.removeEventListener("keypress",this.onKeyWhileDrawing)},onModifyEnd(){this.emitFeaturesEvent()},onKeyWhileDrawing(e){e.preventDefault(),"Backspace"===e.key&&this.drawInteraction.removeLastPoint()},drawYetiImage(){const e=(new DOMParser).parseFromString(this.computedData,"application/xml"),t=e.getElementsByTagName("wps:ComplexData")[0].textContent,a=e.getElementsByTagName("wps:ComplexData")[1].textContent,o=Jt["a"].proj.transformExtent(a.split(",").map(Number),"EPSG:4326","EPSG:3857");this.yetiLayer.setSource(new Jt["a"].source.ImageStatic({imageLoadFunction(e){e.getImage().src="data:image/png;base64,"+t},attributions:fc,imageExtent:o})),this.yetiLayerLoaded=!0,this.setLegend(e)},setLegend(e){this.mapLegend=JSON.parse(e.getElementsByTagName("wps:ComplexData")[2].textContent),this.mapLegend.items.forEach(e=>{e.color=`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`})},drawExtent(e){const t=Jt["a"].extent.buffer(e,Math.max(e[2]-e[0],e[3]-e[1])/10),a=new Jt["a"].Feature(new Jt["a"].geom.Polygon([this.toLinearRing(t),this.toLinearRing(e)]));this.extentLayer.getSource().addFeature(a)},toLinearRing(e){const t=e[0],a=e[1],o=e[2],c=e[3];return[[t,a],[t,c],[o,c],[o,a],[t,a]]},onUpdateOpacityYetiLayer(){this.yetiLayer.setOpacity(this.opacityYetiLayer)},onMountainsResult(e){const t=e.data;let a=(new Jt["a"].format.GeoJSON).readFeatures(t).map(e=>e.getProperties());this.allMountains=this.sortMountainsByMassif(a),this.setVisibleMountains()},sortMountainsByMassif(e){const t={};for(let a=0;a<e.length;a++)t[e[a].mountain]||(t[e[a].mountain]=[]),t[e[a].mountain].push(e[a]);e=t;for(const a in e)e[a].sort((e,t)=>e.title<t.title?-1:t.title>e.title?1:0);return e},setVisibleMountains(){if(!this.allMountains)return;const e=this.getExtent("EPSG:4326"),t=Object.assign({},this.allMountains);for(const o in t)t[o]=t[o].filter(t=>{const a=t.geometry;return a.intersectsExtent(e)}),0===t[o].length&&delete t[o];const a={visibleMountains:t};this.$emit("update:mountains",a)},onAreasResult(e){const t=e.data,a=(new Jt["a"].format.GeoJSON).readFeatures(t);a[0].getGeometry().transform("EPSG:4326","EPSG:3857"),this.areas=a.map(e=>e.getProperties());const o=a[0].getGeometry().getCoordinates(),c=[];for(let r=0;r<o.length;r++)c.push(...o[r]);const i=[];for(let r=0;r<c.length;r++)for(let e=0;e<c[r].length-1;e++)i.push(new Jt["a"].Feature(new Jt["a"].geom.LineString([c[r][e],c[r][e+1]])));this.areasLayer.getSource().addFeatures(i),this.isAreaOK()},isAreaOK(){const e=this.getExtent("EPSG:3857");let t=!0;for(const a in this.areas){const o=this.areas[a].geometry;if(o.intersectsExtent(e))break;t=!1}this.$emit("update:areaOk",t)}}};a("9dd1");kc.render=vc,kc.__scopeId="data-v-28368954";var Dc=kc;const Tc="https://api.ensg.eu/yeti-wps?request=Execute&service=WPS&version=1.0.0&identifier=Yeti&datainputs=",Sc={minZoom:13,braMaxMrd:3};var Fc={name:"Yeti",components:{YetiArticle:ae,Panel:re,SubPanelBra:Pe,SubPanelCourse:Qt,SubPanelMethods:Zo,Tabs:Ho,ValidationButton:rc,YetiMap:Dc},data(){return{showDisclaimer:!1,checkDisclaimer:!1,articles:{faq:{id:1257569,title:"FAQ"},disclaimer:{id:1257571,title:this.$gettext("Disclaimer")}},yetiMap:null,tabs:[this.$gettext("Compute"),this.$gettext("Outing")],activeTab:0,errors:{area:{simple:this.$gettext("Area not covered"),full:this.$gettext("Current map view is not covered by YETI. Only french mountains are as of now (determined by a dashed stroke).")},method:{simple:this.$gettext("Missing method"),full:this.$gettext("Please select a method before computing.")},method_bra:{simple:this.$gettext("Conflicting method and danger"),full:this.$gettext("The MRD method (beginner) is allowed when danger is 3 maximum. Choose another method: MRE or MRP.")},bra:{simple:this.$gettext("Missing danger level"),full:this.$gettext("Please set danger level as specified on avalanche bulletin for the specific area.")},altitude:{simple:this.$gettext("Missing altitude"),full:this.$gettext("Altitude is mandatory when danger high and low are different. Please set altitude as specified on avalanche bulletin for the specific area.")},zoom:{simple:this.$gettext("Area too large"),full:this.$gettext("Current map view is too large. Please zoom to level "+Sc.minZoom)},ok:this.$gettext("Seems fine! :)"),yeti:this.$gettext("Service is inactive right now"),yeti_prefix:"YETI Service: ",yeti_unauthorized:this.$gettext("You have to be authorized. Please contact administrators of the service if interested.")},validFormData:Sc,bra:{high:null,low:null,altiThreshold:null,isDifferent:!1},method:{type:null,orientation:[],potentialDanger:void 0,wetSnow:!1,groupSize:1},mapZoom:0,formError:void 0,currentError:void 0,promise:null,yetiImage:null,yetiLayer:null,yetiExtent:[],features:[],gpx:null,featuresTitle:this.$gettext("New route"),mountains:{},areaOk:!0}},computed:{mrdIsNotApplicable(){return this.isBraMax&&"mrd"===this.method.type},isBraMax(){return this.bra.high>this.validFormData.braMaxMrd||this.bra.low>this.validFormData.braMaxMrd},isValidMapZoom(){return this.mapZoom>=this.validFormData.minZoom},hasFeatures(){return!!this.features.length}},watch:{"bra.low":"check","bra.altiThreshold":"check","bra.isDifferent":"check","method.type":"check","method.potentialDanger":"check",mapZoom:"check",areaOk:"check",featuresTitle(e){null===e&&(this.featuresTitle=this.$gettext("New route"))}},created(){this.$localStorage.get("yeti-disclaimer")||(this.showDisclaimer=!0)},mounted(){this.yetiMap=this.$refs.map,this.check()},methods:{check(){this.areaOk?this.isValidMapZoom?this.bra.high?this.bra.low&&this.bra.high!==this.bra.low&&!this.bra.altiThreshold?this.formError="altitude":this.method.type?this.mrdIsNotApplicable?this.formError="method_bra":!this.bra.isDifferent||this.bra.low&&this.bra.high?this.formError=null:this.formError="bra":this.formError="method":this.formError="bra":this.formError="zoom":this.formError="area",this.mrdIsNotApplicable&&(this.method.type=null),this.setCurrentError()},warnAboutMethodBra(e){"mrd"===e&&this.isBraMax&&window.alert(this.errors.method_bra.full)},setCurrentError(){this.formError?(this.currentError=this.errors[this.formError]["simple"],"zoom"===this.formError&&(this.currentError+=" ("+this.$gettext("current zoom:")+" "+this.mapZoom+" "+this.$gettext("on")+" "+this.validFormData.minZoom+")")):this.currentError=this.errors["ok"]},compute(){if(this.formError)return void window.alert(this.errors[this.formError]["full"]);const e=this.$refs.map.getExtent("EPSG:3857"),t=this.extendExtent(e),a=this.getYetiUrl(t);this.yetiMap.clearLayers(),this.promise=G.a.get(a).then(e=>this.onYetiResult(e,t)).catch(this.onYetiError)},extendExtent(e){const t=Math.min(.5,(this.mapZoom-this.validFormData.minZoom)/6),a=Math.max(e[2]-e[0],e[3]-e[1])*t;return Jt["a"].extent.buffer(e,a)},onYetiResult(e,t){this.yetiImage=e.data,this.yetiExtent=t,this.promise=null},onYetiError(e){this.promise=null;let t=this.errors["yeti"];if(400===e.response.status){const a=(new DOMParser).parseFromString(e.response.data,"text/xml");t=[...a.getElementsByTagName("ExceptionText")].map(e=>e.textContent).join(" ")}403===e.response.status&&(t=this.errors["yeti_unauthorized"]),window.alert(this.errors["yeti_prefix"]+t)},getYetiUrl(e){const t=Jt["a"].proj.transformExtent(e,"EPSG:3857","EPSG:4326"),a=this.bra.isDifferent?this.bra.low:this.bra.high,o=this.bra.isDifferent?this.bra.altiThreshold:0,c="mre"===this.method.type&&0!==this.method.orientation.length?"none,"+this.method.orientation.join(",").toLowerCase():"none",i="mrp"===this.method.type?this.method.potentialDanger:0,r="mrp"===this.method.type&&this.method.wetSnow,n="mrp"===this.method.type?Math.floor(this.method.groupSize):0;let s=Tc;return s+=`methode=${this.method.type};`,s+=`bbox=${t[0]},${t[1]},${t[2]},${t[3]};`,s+=`risque_haut=${this.bra.high};`,s+=`risque_bas=${a};`,s+=`seuil_alti=${o};`,s+=`rdv=${c};`,s+=`potentiel_danger=${i};`,s+=`neige_mouillee=${r};`,s+="taille_groupe="+n,s},onSubmitDisclaimer(){this.showDisclaimer=!1,this.$localStorage.set("yeti-disclaimer","validated")},onGpxLoaded(e){this.gpx=e}}};a("cdc3"),a("868c");Fc.render=z,Fc.__scopeId="data-v-b6fce666";t["default"]=Fc},"9b50":function(e,t,a){},"9dd1":function(e,t,a){"use strict";a("89a1")},"9ef1":function(e,t,a){},a809:function(e,t,a){},aa66:function(e,t,a){e.exports=a.p+"img/logo-ensg.e6781953.jpg"},b6ab:function(e,t,a){},bd8c:function(e,t,a){},bf64:function(e,t,a){},cdc3:function(e,t,a){"use strict";a("119b")},cf30:function(e,t,a){},cf9c:function(e,t,a){"use strict";a("bf64")},d315:function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.24ab8a49.webp"},e004:function(e,t,a){e.exports=a.p+"img/logo-ensg.35fbf647.webp"},ec32:function(e,t,a){"use strict";a("0491")},f816:function(e,t,a){"use strict";a("9b50")},fc52:function(e,t,a){e.exports=a.p+"img/logo-fondation-petzl.4b665657.jpg"}}]);
//# sourceMappingURL=yeti-legacy.c449a257.js.map