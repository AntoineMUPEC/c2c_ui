{"version":3,"sources":["webpack:///./src/assets/img/yeti/logo-ensg.avif","webpack:///./src/components/yeti/Panel.vue?6e44","webpack:///./src/components/yeti/ValidationButton.vue?e9f8","webpack:///./src/assets/img/yeti/logo-fondation-petzl.avif","webpack:///./src/components/yeti/SubPanelCourse.vue?7636","webpack:///./src/components/yeti/SubPanelTitle.vue?e97d","webpack:///./src/assets/img/yeti/levels-danger.svg","webpack:///./src/components/yeti/Article.vue?32ee","webpack:///./src/components/yeti/SubPanelMethods.vue?961d","webpack:///./src/components/yeti/Tabs.vue?7520","webpack:///./src/views/portals/YetiView.vue?b27d","webpack:///./src/views/portals/YetiView.vue","webpack:///./src/components/yeti/Article.vue","webpack:///./src/components/yeti/SubPanelTitle.vue","webpack:///./src/components/yeti/SubPanelTitle.vue?cf98","webpack:///./src/components/yeti/Article.vue?d6fe","webpack:///./src/components/yeti/Panel.vue","webpack:///./src/components/yeti/Panel.vue?68b4","webpack:///./src/components/yeti/SubPanelBra.vue","webpack:///./src/components/yeti/Counter.vue","webpack:///./src/components/yeti/Counter.vue?45c1","webpack:///./src/components/yeti/SubPanelBra.vue?1e62","webpack:///./src/components/yeti/SubPanelCourse.vue","webpack:///./src/components/yeti/FeaturesList.vue","webpack:///./src/components/yeti/FeaturesList.vue?75ce","webpack:///./src/components/yeti/SubPanelCourse.vue?7ca4","webpack:///./src/components/yeti/SubPanelMethods.vue","webpack:///./src/components/yeti/SubPanelMethods.vue?2eef","webpack:///./src/components/yeti/Tabs.vue","webpack:///./src/components/yeti/Tabs.vue?93a0","webpack:///./src/components/yeti/ValidationButton.vue","webpack:///./src/components/yeti/ValidationButton.vue?c8d1","webpack:///./src/components/yeti/YetiMap.vue","webpack:///./src/components/yeti/YetiMap.vue?d796","webpack:///./src/views/portals/YetiView.vue?dc6a","webpack:///./src/components/yeti/YetiMap.vue?0dac","webpack:///./src/assets/img/yeti/logo-ensg.jpg","webpack:///./src/views/portals/YetiView.vue?b665","webpack:///./src/components/yeti/Counter.vue?7cc2","webpack:///./src/assets/img/yeti/logo-fondation-petzl.webp","webpack:///./src/assets/img/yeti/logo-ensg.webp","webpack:///./src/components/yeti/SubPanelBra.vue?5008","webpack:///./src/components/yeti/FeaturesList.vue?9d25","webpack:///./src/assets/img/yeti/logo-fondation-petzl.jpg"],"names":["module","exports","class","href","srcset","type","src","alt","width","loading","title","showDisclaimer","article","articles","disclaimer","action","onSubmitDisclaimer","checkDisclaimer","disabled","$route","params","page","to","faq","fullPath","tabs","active-tab","activeTab","has-features","hasFeatures","ref","index","current-error","currentError","promise","compute","tabindex","bra","mountains","method","warnAboutMethodBra","map","yetiMap","features","features-title","featuresTitle","onGpxLoaded","gpx","valid-min-zoom","validFormData","minZoom","map-zoom","mapZoom","computed-extent","yetiExtent","computed-data","yetiImage","area-ok","areaOk","document","field","fields","description","hide-title","script","render","__scopeId","components","SubPanelTitle","MarkdownSection","props","Object","required","computed","this","id","data","constants","objectDefinitions","$language","current","watch","cookDocument","methods","c2c","getCooked","then","result","role","aria-labelledby","hidden","Number","viewBox","height","style","points","x1","y1","x2","y2","for","isDifferent","onChange","$event","value","high","aria-label","$gettext","min","max","step","maxlength","altiThreshold","low","showMountainsList","showVisibleMountains","countVisibleMountains","icon","rotation","undefined","visibleMountains","mountainsForMassif","massif","key","mountain","urls","url","target","isPrimary","Boolean","default","Counter","values","reduce","a","b","length","event","prop","$emit","assign","translate-context","onEditNewFeaturesTitle","hasFeaturesTitle","contenteditable","spellcheck","onEditFeaturesTitle","editableFeaturesTitle","onRemoveFeatures","formats","name","format","downloadCourse","onLoadGpx","uploadGpx","accept","feature","i","showFeature","hideFeature","nbPointsOnFeature","removeFeature","Array","setStyle","get","getGeometry","getCoordinates","FeaturesList","String","newFeaturesTitle","e","innerText","$nextTick","$refs","focus","gpxFileInput","click","removeFeatures","reader","FileReader","onload","readAsText","files","downloadFeatures","ol","GPX","KML","olFormat","extension","mimetype","set","filename","setFilename","content","writeFeatures","featureProjection","utils","download","ext","Date","keys","item","checked","orientation","join","potentialDangerLabels","label","text","potentialDangerOptions","selected","potentialDanger","val","wetSnow","groupSizes","groupSize","DANGER","mrd","mre","mrp","push","tab","aria-selected","setActiveTab","setActiveTabKeyboard","is-primary","ARROW_LEFT","ARROW_RIGHT","ARROW_DOWN","dir","which","preventDefault","$parent","$el","Promise","showLegend","mapLegend","items","color","comment","yetiLayerLoaded","opacityYetiLayer","interval","tooltip","direction","rail-style","process-style","onUpdateOpacityYetiLayer","show-recenter-on","YETI_ATTRIBUTION","YETI_LAYER_OPACITY","YETI_URL_MOUNTAINS","YETI_URL_AREAS","normalLineStyle","Style","stroke","Stroke","highlightedLineStyle","zIndex","VueSlider","validMinZoom","computedExtent","computedData","featuresTitleFromSource","promiseDocument","areas","levelStrokeWidth","levelStrokeOpacity","lineWidthStroke","Math","opacityStroke","lineDashStroke","lineDash","addFeaturesFromGpx","localFeaturesTitle","drawInteraction","setActive","modifyInteraction","snapInteraction","drawYetiImage","drawExtent","yetiLayer","layer","Image","source","ImageStatic","imageExtent","extent","createEmpty","opacity","extentLayer","Vector","fill","Fill","geometry","geom","Polygon","areasLayer","renderMode","areasLayerStyle","featuresLayer","featuresLayerSource","getSource","mapView","view","getView","addLayer","doc","document_id","lang","addFeaturesFromDocument","addEvents","addInteractions","onMountainsResult","onAreasResult","projection","getExtent","setSource","clear","un","onPointerMove","onClick","on","onMapMoveEnd","onFeature","interaction","Modify","addInteraction","Draw","Snap","onDrawStart","onDrawEnd","onModifyEnd","floor","getZoom","setVisibleMountains","isAreaOK","extend","fit","size","getSize","setZoom","loadingExternalFeatures","gpxFormat","readFeatures","addFeature","getFeaturesTitleFromGpx","emitFeaturesEvent","fitMapToFeatures","documentGeometry","geom_detail","GeoJSON","readFeature","getFeaturesTitleFromDocument","getType","lines","getLineStrings","line","Feature","toBeRemoved","getFeatures","confirm","getFeaturesLayerFeatures","$router","replace","path","properties","getProperties","$documentUtils","getDocumentTitle","addEventListener","onKeyWhileDrawing","removeEventListener","removeLastPoint","xml","DOMParser","parseFromString","imageBase64","getElementsByTagName","textContent","imageBbox","proj","transformExtent","split","image","getImage","attributions","setLegend","JSON","parse","forEach","extentFill","buffer","toLinearRing","minX","minY","maxX","maxY","setOpacity","allMountains","sortMountainsByMassif","sortedMountains","sort","mapExtent","filter","polygon","intersectsExtent","rawFeatures","transform","area","rawCoords","coords","j","LineString","addFeatures","YETI_URL_BASE","VALID_FORM_DATA","braMaxMrd","YetiArticle","Panel","SubPanelBra","SubPanelCourse","SubPanelMethods","Tabs","ValidationButton","YetiMap","errors","simple","full","method_bra","altitude","zoom","ok","yeti","yeti_prefix","yeti_unauthorized","formError","isBraMax","newValue","$localStorage","check","isValidMapZoom","mrdIsNotApplicable","setCurrentError","window","alert","extendedExtent","extendExtent","yetiUrl","getYetiUrl","clearLayers","onYetiResult","catch","onYetiError","extendedFactor","extendedValue","err","errorText","response","status","_","bbox","braLow","braAltiThreshold","compass","toLowerCase"],"mappings":"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","file":"js/yeti-legacy.c449a257.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/logo-ensg.12db1227.avif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Panel.vue?vue&type=style&index=0&id=6a9ccc68&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ValidationButton.vue?vue&type=style&index=0&id=ad96ba08&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/logo-fondation-petzl.1d7d0bdd.avif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubPanelCourse.vue?vue&type=style&index=0&id=05c9c091&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubPanelTitle.vue?vue&type=style&index=0&id=43c30758&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/levels-danger.ab1771e4.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Article.vue?vue&type=style&index=0&id=62129744&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubPanelMethods.vue?vue&type=style&index=0&id=b13e18f2&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tabs.vue?vue&type=style&index=0&id=c6260810&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./YetiView.vue?vue&type=style&index=1&id=b6fce666&lang=scss\"","<template>\n  <!-- eslint-disable no-irregular-whitespace -->\n  <div class=\"section\">\n    <html-header title=\"Yeti\" />\n    <div class=\"box\">\n      <h1 class=\"title is-1\">\n        <div class=\"yeti-icon is-inline-block\">\n          <icon-yeti />\n        </div>\n        <span v-translate>YETI - A preparation tool for your outing</span>\n      </h1>\n    </div>\n\n    <div class=\"yeti-app\">\n      <div class=\"box yeti-overlay\" v-if=\"showDisclaimer\">\n        <yeti-article class=\"yeti-article--disclaimer\" :article=\"articles.disclaimer\"></yeti-article>\n        <form action=\"#\" @submit=\"onSubmitDisclaimer\">\n          <input-checkbox v-model=\"checkDisclaimer\" v-translate>\n            I read and understood the interest and limitations of YETI\n          </input-checkbox>\n          <button class=\"button is-primary\" :disabled=\"!checkDisclaimer\" v-translate>Launch YETI</button>\n        </form>\n      </div>\n\n      <div class=\"box yeti-overlay\" v-if=\"$route.params.page === 'faq'\">\n        <p><router-link to=\".\" v-translate>Go back to YETI</router-link></p>\n        <yeti-article class=\"yeti-article--disclaimer\" :article=\"articles.disclaimer\"></yeti-article>\n        <yeti-article :article=\"articles.faq\"></yeti-article>\n      </div>\n\n      <div class=\"columns yeti-content\">\n        <div class=\"column is-6-tablet is-6-desktop is-5-widescreen is-4-fullhd form-container\">\n          <div class=\"columns mb-0 yeti-columns--reverse is-mobile\">\n            <ul class=\"column is-narrow pb-0\">\n              <li>\n                <router-link class=\"is-block yetitabs-link\" :to=\"$route.fullPath + '/faq'\" v-translate>\n                  FAQ?\n                </router-link>\n              </li>\n            </ul>\n            <tabs :tabs=\"tabs\" :active-tab.sync=\"activeTab\" :has-features=\"hasFeatures\" />\n          </div>\n          <div class=\"box\">\n            <panel ref=\"panel0\" :index=\"0\" :active-tab=\"activeTab\" class=\"is-relative\">\n              <validation-button\n                class=\"is-hidden-mobile yeti-validation--top\"\n                :current-error=\"currentError\"\n                :loading=\"promise\"\n                @click=\"compute\"\n                tabindex=\"-1\"\n              />\n              <sub-panel-bra :bra.sync=\"bra\" :mountains=\"mountains\" />\n              <sub-panel-methods :method.sync=\"method\" :bra=\"bra\" @warn-about-method-bra=\"warnAboutMethodBra\" />\n              <validation-button\n                v-show=\"method.type\"\n                class=\"yeti-validation--bottom\"\n                :current-error=\"currentError\"\n                :loading=\"promise\"\n                @click=\"compute\"\n              />\n            </panel>\n\n            <panel ref=\"panel1\" :index=\"1\" :active-tab=\"activeTab\">\n              <sub-panel-course\n                :map=\"yetiMap\"\n                :features=\"features\"\n                :features-title.sync=\"featuresTitle\"\n                @gpx=\"onGpxLoaded\"\n              />\n            </panel>\n          </div>\n\n          <div class=\"box yeti-logos\">\n            <div class=\"columns is-mobile is-vcentered\">\n              <div class=\"column has-text-centered\">\n                <a href=\"http://www.ensg.eu\">\n                  <picture>\n                    <source srcset=\"@/assets/img/yeti/logo-ensg.webp\" type=\"image/webp\" />\n                    <source srcset=\"@/assets/img/yeti/logo-ensg.avif\" type=\"image/avif\" />\n                    <img src=\"@/assets/img/yeti/logo-ensg.jpg\" alt=\"Logo ENSG\" width=\"120\" loading=\"lazy\" />\n                  </picture>\n                </a>\n              </div>\n              <div class=\"column has-text-centered\">\n                <a href=\"https://www.petzl.com/fondation/fondation-petzl?language=fr\">\n                  <picture>\n                    <source srcset=\"@/assets/img/yeti/logo-fondation-petzl.webp\" type=\"image/webp\" />\n                    <source srcset=\"@/assets/img/yeti/logo-fondation-petzl.avif\" type=\"image/avif\" />\n                    <img\n                      src=\"@/assets/img/yeti/logo-fondation-petzl.jpg\"\n                      alt=\"Logo Fondation Petzl\"\n                      width=\"90\"\n                      loading=\"lazy\"\n                    />\n                  </picture>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <yeti-map\n          ref=\"map\"\n          :gpx=\"gpx\"\n          :active-tab=\"activeTab\"\n          :valid-min-zoom=\"validFormData.minZoom\"\n          :map-zoom.sync=\"mapZoom\"\n          :computed-extent=\"yetiExtent\"\n          :computed-data=\"yetiImage\"\n          :mountains.sync=\"mountains\"\n          :area-ok.sync=\"areaOk\"\n          :features.sync=\"features\"\n          :features-title.sync=\"featuresTitle\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nimport YetiArticle from '@/components/yeti/Article';\nimport Panel from '@/components/yeti/Panel';\nimport SubPanelBra from '@/components/yeti/SubPanelBra';\nimport SubPanelCourse from '@/components/yeti/SubPanelCourse';\nimport SubPanelMethods from '@/components/yeti/SubPanelMethods';\nimport Tabs from '@/components/yeti/Tabs';\nimport ValidationButton from '@/components/yeti/ValidationButton';\nimport YetiMap from '@/components/yeti/YetiMap';\nimport ol from '@/js/libs/ol';\n\nconst YETI_URL_BASE =\n  'https://api.ensg.eu/yeti-wps?request=Execute&service=WPS&version=1.0.0&identifier=Yeti&datainputs=';\n\nconst VALID_FORM_DATA = {\n  minZoom: 13,\n  braMaxMrd: 3,\n};\n\nexport default {\n  name: 'Yeti',\n\n  components: {\n    YetiArticle,\n    Panel,\n    SubPanelBra,\n    SubPanelCourse,\n    SubPanelMethods,\n    Tabs,\n    ValidationButton,\n    YetiMap,\n  },\n\n  data() {\n    return {\n      showDisclaimer: false,\n      checkDisclaimer: false,\n\n      articles: {\n        faq: {\n          id: 1257569,\n          title: 'FAQ',\n        },\n        disclaimer: {\n          id: 1257571,\n          title: this.$gettext('Disclaimer'),\n        },\n      },\n\n      yetiMap: null,\n\n      tabs: [this.$gettext('Compute'), this.$gettext('Outing')],\n      activeTab: 0,\n\n      errors: {\n        area: {\n          simple: this.$gettext('Area not covered'),\n          full: this.$gettext(\n            'Current map view is not covered by YETI. Only french mountains are as of now (determined by a dashed stroke).'\n          ),\n        },\n        method: {\n          simple: this.$gettext('Missing method'),\n          full: this.$gettext('Please select a method before computing.'),\n        },\n        method_bra: {\n          simple: this.$gettext('Conflicting method and danger'),\n          full: this.$gettext(\n            'The MRD method (beginner) is allowed when danger is 3 maximum. Choose another method: MRE or MRP.'\n          ),\n        },\n        bra: {\n          simple: this.$gettext('Missing danger level'),\n          full: this.$gettext('Please set danger level as specified on avalanche bulletin for the specific area.'),\n        },\n        altitude: {\n          simple: this.$gettext('Missing altitude'),\n          full: this.$gettext(\n            'Altitude is mandatory when danger high and low are different. Please set altitude as specified on avalanche bulletin for the specific area.'\n          ),\n        },\n        zoom: {\n          simple: this.$gettext('Area too large'),\n          full: this.$gettext('Current map view is too large. Please zoom to level ' + VALID_FORM_DATA.minZoom),\n        },\n        ok: this.$gettext('Seems fine! :)'),\n        yeti: this.$gettext('Service is inactive right now'),\n        yeti_prefix: 'YETI Service: ',\n        yeti_unauthorized: this.$gettext(\n          'You have to be authorized. Please contact administrators of the service if interested.'\n        ),\n      },\n\n      validFormData: VALID_FORM_DATA,\n\n      bra: {\n        high: null,\n        low: null,\n        altiThreshold: null,\n        isDifferent: false,\n      },\n      method: {\n        type: null,\n        orientation: [],\n        potentialDanger: undefined,\n        wetSnow: false,\n        groupSize: 1,\n      },\n\n      mapZoom: 0,\n      formError: undefined,\n      currentError: undefined,\n\n      promise: null,\n      yetiImage: null,\n      yetiLayer: null,\n      yetiExtent: [],\n\n      features: [],\n      gpx: null,\n      featuresTitle: this.$gettext('New route'),\n\n      mountains: {},\n\n      areaOk: true,\n    };\n  },\n\n  computed: {\n    mrdIsNotApplicable() {\n      return this.isBraMax && this.method.type === 'mrd';\n    },\n\n    isBraMax() {\n      return this.bra.high > this.validFormData.braMaxMrd || this.bra.low > this.validFormData.braMaxMrd;\n    },\n\n    isValidMapZoom() {\n      return this.mapZoom >= this.validFormData.minZoom;\n    },\n\n    hasFeatures() {\n      return !!this.features.length;\n    },\n  },\n\n  watch: {\n    'bra.low': 'check',\n    'bra.altiThreshold': 'check',\n    'bra.isDifferent': 'check',\n    'method.type': 'check',\n    'method.potentialDanger': 'check',\n    mapZoom: 'check',\n    areaOk: 'check',\n    featuresTitle(newValue) {\n      // set default featuresTitle if null (from yeti map)\n      if (newValue === null) {\n        this.featuresTitle = this.$gettext('New route');\n      }\n    },\n  },\n\n  created() {\n    // show disclaimer if not already validated\n    if (!this.$localStorage.get('yeti-disclaimer')) {\n      this.showDisclaimer = true;\n    }\n  },\n\n  mounted() {\n    // yeti app is loaded: store yetiMap\n    this.yetiMap = this.$refs.map;\n\n    this.check();\n  },\n\n  methods: {\n    check() {\n      if (!this.areaOk) {\n        this.formError = 'area';\n      } else if (!this.isValidMapZoom) {\n        this.formError = 'zoom';\n      } else if (!this.bra.high) {\n        this.formError = 'bra';\n      } else if (this.bra.low && this.bra.high !== this.bra.low && !this.bra.altiThreshold) {\n        this.formError = 'altitude';\n      } else if (!this.method.type) {\n        this.formError = 'method';\n      } else if (this.mrdIsNotApplicable) {\n        this.formError = 'method_bra';\n      } else if (this.bra.isDifferent && (!this.bra.low || !this.bra.high)) {\n        this.formError = 'bra';\n      } else {\n        this.formError = null;\n      }\n      // also\n      // verif if bra = 4, method MRD forbidden\n      if (this.mrdIsNotApplicable) {\n        this.method.type = null;\n      }\n\n      // then set errors\n      this.setCurrentError();\n    },\n\n    warnAboutMethodBra(item) {\n      if (item === 'mrd' && this.isBraMax) {\n        window.alert(this.errors.method_bra.full);\n      }\n    },\n\n    setCurrentError() {\n      if (this.formError) {\n        this.currentError = this.errors[this.formError]['simple'];\n        if (this.formError === 'zoom') {\n          this.currentError +=\n            ' (' +\n            this.$gettext('current zoom:') +\n            ' ' +\n            this.mapZoom +\n            ' ' +\n            this.$gettext('on') +\n            ' ' +\n            this.validFormData.minZoom +\n            ')';\n        }\n      } else {\n        this.currentError = this.errors['ok'];\n      }\n    },\n\n    compute() {\n      if (this.formError) {\n        window.alert(this.errors[this.formError]['full']);\n        return;\n      }\n\n      const extent = this.$refs.map.getExtent('EPSG:3857');\n      const extendedExtent = this.extendExtent(extent);\n\n      const yetiUrl = this.getYetiUrl(extendedExtent);\n\n      // remove old layers first\n      this.yetiMap.clearLayers();\n\n      // fetch img\n      this.promise = axios\n        .get(yetiUrl)\n        .then((result) => this.onYetiResult(result, extendedExtent))\n        .catch(this.onYetiError);\n    },\n\n    extendExtent(extent) {\n      const extendedFactor = Math.min(0.5, (this.mapZoom - this.validFormData.minZoom) / 6);\n      const extendedValue = Math.max(extent[2] - extent[0], extent[3] - extent[1]) * extendedFactor;\n      return ol.extent.buffer(extent, extendedValue);\n    },\n\n    onYetiResult(result, extendedExtent) {\n      this.yetiImage = result.data;\n      this.yetiExtent = extendedExtent;\n\n      this.promise = null;\n    },\n\n    onYetiError(err) {\n      this.promise = null;\n\n      let errorText = this.errors['yeti'];\n\n      if (err.response.status === 400) {\n        const xml = new DOMParser().parseFromString(err.response.data, 'text/xml');\n        errorText = [...xml.getElementsByTagName('ExceptionText')].map((_) => _.textContent).join(' ');\n      }\n\n      if (err.response.status === 403) {\n        errorText = this.errors['yeti_unauthorized'];\n      }\n\n      window.alert(this.errors['yeti_prefix'] + errorText);\n    },\n\n    getYetiUrl(extent) {\n      // project extent\n      const bbox = ol.proj.transformExtent(extent, 'EPSG:3857', 'EPSG:4326');\n\n      // set bra.low / altiThreshold\n      const braLow = this.bra.isDifferent ? this.bra.low : this.bra.high;\n      const braAltiThreshold = this.bra.isDifferent ? this.bra.altiThreshold : 0;\n\n      // mre\n      const compass =\n        this.method.type === 'mre' && this.method.orientation.length !== 0\n          ? 'none,' + this.method.orientation.join(',').toLowerCase()\n          : 'none';\n\n      // mrp\n      const potentialDanger = this.method.type === 'mrp' ? this.method.potentialDanger : 0;\n      const wetSnow = this.method.type === 'mrp' ? this.method.wetSnow : false;\n      const groupSize = this.method.type === 'mrp' ? Math.floor(this.method.groupSize) : 0;\n\n      // create url\n      let result = YETI_URL_BASE;\n      result += `methode=${this.method.type};`;\n      result += `bbox=${bbox[0]},${bbox[1]},${bbox[2]},${bbox[3]};`;\n      result += `risque_haut=${this.bra.high};`;\n      result += `risque_bas=${braLow};`;\n      result += `seuil_alti=${braAltiThreshold};`;\n      result += `rdv=${compass};`;\n      result += `potentiel_danger=${potentialDanger};`;\n      result += `neige_mouillee=${wetSnow};`;\n      result += `taille_groupe=${groupSize}`;\n\n      return result;\n    },\n\n    onSubmitDisclaimer() {\n      this.showDisclaimer = false;\n      this.$localStorage.set('yeti-disclaimer', 'validated');\n    },\n\n    onGpxLoaded(data) {\n      this.gpx = data;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n$section-padding: 1.5rem; //TODO find this variable\n$box-padding: 1.25rem; //TODO find this variable\n$header-height: 34px;\n$box-margin: 1.5rem; //TODO find this variable\n$yeti-height: calc(\n  100vh - #{$navbar-height} - #{$section-padding} - 2 *#{$box-padding} - #{$header-height} - #{$box-margin} - #{$box-margin}\n);\n\n.yeti-app {\n  position: relative;\n}\n\n.yeti-icon {\n  transform: scale(0.9);\n}\n\n.yeti-columns--reverse {\n  flex-direction: row-reverse;\n}\n\n@media screen and (max-width: $tablet) {\n  .mobile-result-map {\n    margin-top: 0;\n    height: $yeti-height;\n\n    .documents-container {\n      display: None;\n    }\n  }\n\n  .mobile-result-card {\n    .map-container {\n      visibility: hidden; // map does not like to be in a display none...\n    }\n  }\n}\n\n@media screen and (min-width: $tablet) {\n  .yeti-content {\n    height: $yeti-height;\n\n    .form-container {\n      height: 100%;\n      overflow: auto;\n    }\n  }\n}\n\n.yeti-validation--top {\n  position: absolute;\n  right: 0;\n  top: 0.75rem;\n  width: 50%;\n  z-index: 1;\n}\n\n.yeti-validation--bottom {\n  margin-top: 1rem;\n}\n\n.yeti-logos {\n  box-shadow: none;\n  background: none;\n  mix-blend-mode: multiply;\n\n  img {\n    max-width: 65%;\n  }\n}\n\n.yeti-overlay {\n  position: absolute;\n  z-index: 10;\n  top: 0.75rem;\n  right: 0;\n  left: 0;\n  min-height: 100%;\n\n  & ~ .yeti-content {\n    visibility: hidden;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n/* Not scoped styles */\n.yeti-app {\n  .input-orientation {\n    width: 120px;\n    height: 120px;\n  }\n}\n</style>\n","<template>\n  <div class=\"yeti-article\" v-if=\"document\">\n    <sub-panel-title>{{ title }}</sub-panel-title>\n    <markdown-section :document=\"document\" :field=\"fields.description\" hide-title></markdown-section>\n  </div>\n</template>\n\n<script>\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport c2c from '@/js/apis/c2c';\nimport constants from '@/js/constants';\nimport MarkdownSection from '@/views/document/utils/field-viewers/MarkdownSection';\n\nexport default {\n  components: {\n    SubPanelTitle,\n    MarkdownSection,\n  },\n  props: {\n    article: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      promise: null,\n    };\n  },\n  computed: {\n    id() {\n      return this.article.id;\n    },\n    title() {\n      return this.article.title;\n    },\n    document() {\n      return this.promise?.data ?? null;\n    },\n    fields() {\n      return constants.objectDefinitions.article.fields;\n    },\n    lang() {\n      return this.$language.current;\n    },\n  },\n  watch: {\n    lang() {\n      this.cookDocument();\n    },\n  },\n  mounted() {\n    this.cookDocument();\n  },\n  methods: {\n    cookDocument() {\n      // get document, and set promise only in then (no FOIT)\n      c2c.article.getCooked(this.id, this.$language.current).then((result) => {\n        this.promise = result;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yeti-article {\n  max-width: 1039px;\n  margin-top: 1.75em;\n}\n::v-deep {\n  h3 {\n    margin-top: 2em;\n  }\n  p {\n    margin: 1em 0;\n  }\n  ul {\n    list-style-type: disc;\n  }\n  figure img {\n    max-width: 90%;\n    max-height: 500px;\n  }\n}\n.yeti-article--disclaimer ::v-deep li {\n  margin: 2em 0;\n}\n</style>\n","<template>\n  <div class=\"columns is-mobile\">\n    <div class=\"column\">\n      <h2 class=\"title is-3\">\n        <slot></slot>\n      </h2>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\nh2 {\n  display: inline-block;\n  margin-left: -1.25rem;\n  padding: 0.25em 1.25rem;\n  background: $grey-lighter;\n}\n</style>\n","import { render } from \"./SubPanelTitle.vue?vue&type=template&id=43c30758&scoped=true\"\nconst script = {}\n\nimport \"./SubPanelTitle.vue?vue&type=style&index=0&id=43c30758&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-43c30758\"\n\nexport default script","import { render } from \"./Article.vue?vue&type=template&id=62129744&scoped=true\"\nimport script from \"./Article.vue?vue&type=script&lang=js\"\nexport * from \"./Article.vue?vue&type=script&lang=js\"\n\nimport \"./Article.vue?vue&type=style&index=0&id=62129744&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-62129744\"\n\nexport default script","<template>\n  <div\n    class=\"yeti-panel\"\n    role=\"tabpanel\"\n    :id=\"'panel' + index\"\n    :aria-labelledby=\"'tab' + index\"\n    :hidden=\"activeTab !== index\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    index: {\n      type: Number,\n      required: true,\n    },\n    activeTab: {\n      type: Number,\n      required: true,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\n::v-deep {\n  a:hover,\n  a:focus {\n    text-decoration: underline;\n  }\n\n  h4 {\n    margin-top: 1rem;\n    margin-bottom: 0.25rem !important;\n  }\n\n  abbr {\n    text-decoration: none;\n    border-bottom: dotted 2px #aaa;\n  }\n\n  strong,\n  dt {\n    font-weight: bold;\n    color: $grey-dark;\n  }\n\n  .yeti-subpanel + .yeti-subpanel {\n    margin-top: 2rem;\n  }\n\n  .content-ul {\n    list-style: disc outside;\n    margin-left: 2em;\n  }\n\n  .yetiform-info {\n    font-size: 0.8em;\n    opacity: 0.75;\n  }\n\n  .yetiform-note {\n    position: relative;\n    font-size: 0.9em;\n    padding: 1em;\n    padding-left: 4em;\n    margin-bottom: 2em;\n    background-color: $white-ter;\n    border-radius: 2px;\n  }\n\n  .yetiform-note::before {\n    content: '?';\n    position: absolute;\n    top: 1em;\n    left: 1em;\n    color: white;\n    font-size: 1.14em;\n    font-weight: bold;\n    text-align: center;\n    height: 1.375em;\n    width: 1.375em;\n    line-height: 1.4em;\n    background-color: rgba(0, 60, 136, 0.5);\n    border-radius: 2px;\n  }\n}\n</style>\n","import { render } from \"./Panel.vue?vue&type=template&id=6a9ccc68&scoped=true\"\nimport script from \"./Panel.vue?vue&type=script&lang=js\"\nexport * from \"./Panel.vue?vue&type=script&lang=js\"\n\nimport \"./Panel.vue?vue&type=style&index=0&id=6a9ccc68&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6a9ccc68\"\n\nexport default script","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Danger level</span></sub-panel-title>\n    <div class=\"columns is-mobile\">\n      <div class=\"column\">\n        <div class=\"inputs-bra\" :class=\"{ 'inputs-bra-different': bra.isDifferent }\">\n          <svg viewBox=\"0 0 100 100\" width=\"120\" height=\"120\">\n            <polygon\n              style=\"fill: none; stroke: #000; stroke-miterlimit: 10\"\n              points=\"2.2,89.5 97.5,89.5 62.7,11.9 48,32.9 31.8,25.5 \"\n            />\n            <line\n              v-show=\"bra.isDifferent\"\n              style=\"fill: none; stroke: #000; stroke-miterlimit: 10\"\n              x1=\"10\"\n              y1=\"61.5\"\n              x2=\"90\"\n              y2=\"61.5\"\n            />\n          </svg>\n          <div class=\"input-bra-high select is-small\">\n            <select\n              id=\"selectBra\"\n              @change=\"onChange($event, 'high')\"\n              :value=\"bra.high\"\n              :aria-label=\"$gettext('High danger level from the avalanche bulletin')\"\n            >\n              <option :value=\"null\" selected />\n              <option :value=\"1\">1</option>\n              <option :value=\"2\">2</option>\n              <option :value=\"3\">3</option>\n              <option :value=\"4\">4</option>\n            </select>\n          </div>\n          <div v-show=\"bra.isDifferent\" class=\"input-bra-threshold control\">\n            <label for=\"inputThreshold\" v-translate>Altitude</label>\n            <input\n              id=\"inputThreshold\"\n              class=\"input is-small\"\n              type=\"number\"\n              min=\"0\"\n              max=\"4800\"\n              step=\"100\"\n              maxlength=\"4\"\n              @change=\"onChange($event, 'altiThreshold')\"\n              :value=\"bra.altiThreshold\"\n            />\n          </div>\n\n          <div v-show=\"bra.isDifferent\" class=\"input-bra-low select is-small\">\n            <select\n              @change=\"onChange($event, 'low')\"\n              :value=\"bra.low\"\n              aria-label=\"$gettext('Low danger level from the avalanche bulletin')\"\n            >\n              <option :value=\"null\" selected />\n              <option :value=\"1\">1</option>\n              <option :value=\"2\">2</option>\n              <option :value=\"3\">3</option>\n              <option :value=\"4\">4</option>\n            </select>\n          </div>\n        </div>\n\n        <div>\n          <input-checkbox\n            @input=\"onChange($event, 'isDifferent')\"\n            :value=\"bra.isDifferent\"\n            class=\"control--bradifferent\"\n          >\n            <span v-translate>Different high/low danger?</span>\n          </input-checkbox>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"yetimountains\">\n      <div>\n        <p class=\"yetimountains-title\" @click=\"showMountainsList = !showMountainsList\">\n          <span v-translate>Avalanche bulletins</span>\n          <counter v-if=\"showVisibleMountains\">{{ countVisibleMountains }}</counter>\n          <fa-icon\n            class=\"yetimountains-arrow is-size-6 is-pulled-right has-cursor-pointer no-print\"\n            icon=\"angle-down\"\n            :rotation=\"showMountainsList ? 180 : undefined\"\n          />\n        </p>\n      </div>\n      <div v-if=\"showMountainsList\">\n        <div v-if=\"showVisibleMountains\">\n          <p class=\"column yetiform-info\" v-translate>Get avalanche bulletins from Mto-France website</p>\n          <dl>\n            <div v-for=\"(mountainsForMassif, massif) of mountains.visibleMountains\" :key=\"massif\">\n              <dt class=\"yetimountains-listtitle\">\n                {{ massif }}\n              </dt>\n              <div class=\"yetimountains-list\">\n                <dd class=\"yetimountains-listelement\" v-for=\"mountain of mountainsForMassif\" :key=\"mountain.title\">\n                  <a :href=\"mountain.urls[0].url\" target=\"_blank\">\n                    <fa-icon icon=\"external-link-alt\" />\n                    {{ mountain.title }}\n                  </a>\n                </dd>\n              </div>\n            </div>\n          </dl>\n        </div>\n        <div v-else>\n          <p class=\"column yetiform-info\" v-translate>Massifs could not be loaded</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Counter from '@/components/yeti/Counter.vue';\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\n\nexport default {\n  components: { Counter, SubPanelTitle },\n  props: {\n    bra: {\n      type: Object,\n      default: null,\n    },\n    mountains: {\n      type: Object,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      showMountainsList: false,\n    };\n  },\n  computed: {\n    showVisibleMountains() {\n      return this.countVisibleMountains >= 0;\n    },\n    countVisibleMountains() {\n      // if visibleMountains are set\n      if (this.mountains.visibleMountains) {\n        return Object.values(this.mountains.visibleMountains).reduce((a, b) => a + b.length, 0);\n      }\n      // else, return -1 (because 0 is not an error)\n      return -1;\n    },\n  },\n  watch: {\n    'bra.isDifferent': 'checkBraIsDifferent',\n  },\n  methods: {\n    onChange(event, prop) {\n      const value = prop === 'isDifferent' ? event : event.target.value;\n      this.$emit('update:bra', Object.assign(this.bra, { [prop]: value }));\n    },\n\n    checkBraIsDifferent() {\n      if (!this.bra.isDifferent) {\n        this.bra.low = null;\n        this.bra.altiThreshold = null;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\n.inputs-bra {\n  margin-left: 2rem;\n  position: relative;\n\n  .input-bra-high {\n    position: absolute;\n    left: 39px;\n    top: 62px;\n  }\n\n  .input-bra-threshold {\n    position: absolute;\n    left: 115px;\n    top: 40px;\n    width: 85px;\n  }\n\n  .input-bra-low {\n    position: absolute;\n    left: 39px;\n    top: 78px;\n  }\n}\n\n.inputs-bra-different {\n  .input-bra-high {\n    top: 45px;\n  }\n}\n\n.yetimountains {\n  border: 1px solid #dbdbdb;\n  border-radius: 4px;\n\n  &:hover {\n    border-color: #b5b5b5;\n  }\n\n  &-title {\n    cursor: pointer;\n    padding: 0.25rem 0.75rem;\n  }\n\n  &-arrow {\n    color: $primary;\n    margin-top: 0.25rem;\n  }\n\n  &-list {\n    columns: 3 170px;\n    padding: 0.75rem 2rem;\n  }\n\n  &-listtitle {\n    font-weight: bold;\n    padding: 0 0.75rem;\n  }\n}\n\n.yetimountains-listelement + .yetimountains-listtitle {\n  margin-top: 0.5rem;\n}\n</style>\n","<template>\n  <span class=\"yeti-counter\" :class=\"{ 'has-background-primary': isPrimary }\">\n    <slot />\n  </span>\n</template>\n\n<script>\nexport default {\n  props: {\n    isPrimary: {\n      type: Boolean,\n      default: false,\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\n.yeti-counter {\n  display: inline-block;\n  width: 1.1rem;\n  height: 1.1rem;\n  vertical-align: 0.1rem;\n  margin-left: 0.25rem;\n  background: $grey-lighter;\n  color: $grey-darker;\n  border-radius: 50%;\n  font-size: 0.72em;\n  text-align: center;\n\n  &.has-background-primary {\n    color: $white;\n  }\n}\n</style>\n","import { render } from \"./Counter.vue?vue&type=template&id=79e0b738&scoped=true\"\nimport script from \"./Counter.vue?vue&type=script&lang=js\"\nexport * from \"./Counter.vue?vue&type=script&lang=js\"\n\nimport \"./Counter.vue?vue&type=style&index=0&id=79e0b738&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-79e0b738\"\n\nexport default script","import { render } from \"./SubPanelBra.vue?vue&type=template&id=df986eea&scoped=true\"\nimport script from \"./SubPanelBra.vue?vue&type=script&lang=js\"\nexport * from \"./SubPanelBra.vue?vue&type=script&lang=js\"\n\nimport \"./SubPanelBra.vue?vue&type=style&index=0&id=df986eea&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-df986eea\"\n\nexport default script","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Route</span></sub-panel-title>\n    <div v-if=\"features.length\">\n      <div class=\"columns is-mobile\">\n        <div class=\"column\">\n          <p class=\"features-title\">\n            <icon-route class=\"icon document-icon\" />\n            <fa-icon icon=\"pen\" class=\"icon edit-icon\" />\n            <span\n              v-show=\"!hasFeaturesTitle\"\n              class=\"features-title-text features-title-placeholder\"\n              @click=\"onEditNewFeaturesTitle\"\n              v-translate\n            >\n              Add title\n            </span>\n            <span\n              v-show=\"hasFeaturesTitle\"\n              class=\"features-title-text features-title-content\"\n              ref=\"featuresTitle\"\n              tabindex=\"0\"\n              contenteditable\n              spellcheck=\"false\"\n              @blur=\"onEditFeaturesTitle\"\n              @keypress.13.prevent\n              >{{ editableFeaturesTitle }}</span\n            >\n          </p>\n        </div>\n        <div class=\"column is-narrow\">\n          <button class=\"button is-secondary is-small\" @click=\"onRemoveFeatures\">\n            <fa-icon icon=\"trash\" class=\"trash-icon\" />\n            <span v-translate>Delete route</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"ml-5 mb-5\">\n        <p class=\"yetiform-info is-italic is-marginless\" v-translate>Lines chunks</p>\n        <features-list :features=\"features\" :map=\"map\" />\n      </div>\n      <sub-panel-title><span v-translate>Export</span></sub-panel-title>\n      <div class=\"columns is-vcentered is-mobile\">\n        <div class=\"column\">\n          <ul class=\"form-export\">\n            <li v-for=\"type of formats\" :key=\"type\" class=\"control is-flex\">\n              <input\n                :id=\"'format' + type\"\n                type=\"radio\"\n                name=\"exportFormat\"\n                class=\"is-checkradio is-primary\"\n                :value=\"type\"\n                v-model=\"format\"\n              />\n              <label :for=\"'format' + type\">{{ type }}</label>\n            </li>\n          </ul>\n        </div>\n        <div class=\"column is-narrow\">\n          <button class=\"button is-primary\" @click=\"downloadCourse\" v-translate>Export route</button>\n        </div>\n      </div>\n      <div class=\"yetiform-note mt-5\">\n        <p v-translate>Drawing tips</p>\n        <ul class=\"content-ul\">\n          <li><strong v-translate translate-context=\"yeti\">Draw</strong> <span v-translate>new lines chunks</span></li>\n          <li>\n            <strong v-translate translate-context=\"yeti\">Delete</strong>\n            <span v-translate>last point with the Backspace key</span>\n          </li>\n        </ul>\n        <p v-translate>On a drawn line</p>\n        <ul class=\"content-ul\">\n          <li>\n            <strong v-translate translate-context=\"yeti\">Edit</strong> <span v-translate>points by moving them</span>\n          </li>\n          <li>\n            <strong v-translate translate-context=\"yeti\">Create</strong>\n            <span v-translate>a new point on an existing line</span>\n          </li>\n          <li><strong v-translate>Delete a point</strong> <span v-translate>with Alt + clic</span></li>\n        </ul>\n        <p v-translate>From the interface</p>\n        <ul class=\"content-ul\">\n          <li><strong v-translate>Delete a line chunk</strong></li>\n          <li><strong v-translate>Delete route</strong> <span v-translate>to start or load a new one</span></li>\n        </ul>\n      </div>\n    </div>\n    <div v-else>\n      <p v-translate>No route right now</p>\n      <div class=\"load-gpx\">\n        <button\n          class=\"button is-primary\"\n          :class=\"{ 'is-loading': loading }\"\n          :disabled=\"loading\"\n          @click=\"onLoadGpx\"\n          v-translate\n        >\n          Upload a GPS track\n        </button>\n        <div class=\"control upload-button\">\n          <input ref=\"gpxFileInput\" type=\"file\" @change=\"uploadGpx\" accept=\".gpx\" />\n        </div>\n        <div class=\"yetiform-note mt-5\">\n          <p><strong v-translate>Draw right on the map</strong> <span v-translate>to start a new route</span></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { format } from 'date-fns';\n\nimport FeaturesList from '@/components/yeti/FeaturesList.vue';\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\nimport ol from '@/js/libs/ol';\nimport utils from '@/js/utils';\n\nexport default {\n  components: { FeaturesList, SubPanelTitle },\n  props: {\n    map: {\n      type: Object,\n      default: null,\n    },\n    features: {\n      type: Array,\n      default: null,\n    },\n    featuresTitle: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      editableFeaturesTitle: '',\n      newFeaturesTitle: false,\n      loading: false,\n      formats: ['GPX', 'KML'],\n      format: 'GPX',\n    };\n  },\n  computed: {\n    hasFeaturesTitle() {\n      return !(!this.editableFeaturesTitle.length && !this.newFeaturesTitle);\n    },\n  },\n  watch: {\n    featuresTitle() {\n      // if featuresTitle was changed (load document), set to editableFeaturesTitle\n      this.editableFeaturesTitle = this.featuresTitle;\n    },\n  },\n  mounted() {\n    // when mounted, set editableFeaturesTitle to featuresTitle\n    this.editableFeaturesTitle = this.featuresTitle;\n  },\n  methods: {\n    onEditFeaturesTitle(e) {\n      if (!e.target.innerText.length) {\n        this.newFeaturesTitle = false;\n      }\n      this.$emit('update:featuresTitle', e.target.innerText);\n    },\n\n    onEditNewFeaturesTitle() {\n      this.newFeaturesTitle = true;\n      this.$nextTick(() => {\n        this.$refs.featuresTitle.focus();\n      });\n    },\n\n    onLoadGpx() {\n      this.$refs.gpxFileInput.click();\n    },\n\n    onRemoveFeatures() {\n      this.map.removeFeatures();\n    },\n\n    uploadGpx(event) {\n      this.loading = true;\n\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        this.loading = false;\n        this.$emit('gpx', reader.result);\n      };\n\n      reader.readAsText(event.target.files[0]);\n\n      // empty the input, because if user wan't to upload same trace\n      // change event is not fired\n      // and emit gpx event\n      this.$refs.gpxFileInput.value = '';\n      this.$emit('gpx', null);\n    },\n\n    downloadCourse() {\n      if (this.format === 'GPX') {\n        this.downloadFeatures(new ol.format.GPX(), '.gpx', 'application/gpx+xml');\n      } else if (this.format === 'KML') {\n        this.downloadFeatures(new ol.format.KML(), '.kml', 'application/vnd.google-earth.kml+xml');\n      }\n    },\n\n    downloadFeatures(olFormat, extension, mimetype) {\n      const features = this.features;\n      features[0].set('name', this.featuresTitle);\n\n      const filename = this.setFilename(extension);\n\n      const content = olFormat.writeFeatures(features, {\n        featureProjection: 'EPSG:3857',\n      });\n\n      utils.download(content, filename, mimetype + ';charset=utf-8');\n    },\n\n    setFilename(ext) {\n      return format(new Date(), 'yyyy-MM-dd_HH-mm-ss') + ext;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.features-title {\n  display: flex;\n  line-height: 1.4;\n\n  &-text {\n    min-width: 100px;\n    border: solid 1px transparent;\n    border-radius: 2px;\n    padding: 2px 2em 2px 2px;\n    box-decoration-break: clone;\n\n    &:hover,\n    &:focus {\n      border-color: #b5b5b5;\n    }\n  }\n\n  &-placeholder {\n    font-style: italic;\n  }\n\n  &-content {\n    font-weight: bold;\n  }\n}\n\n.icon {\n  margin-top: 2px;\n}\n\n.edit-icon {\n  order: 1;\n  opacity: 0;\n  margin-left: -1.5em;\n  pointer-events: none;\n  transform: scale(0.75);\n}\n\n.features-title:hover .edit-icon {\n  opacity: 0.75;\n}\n\n.document-icon {\n  margin-right: 3px;\n}\n\n.trash-icon {\n  margin-right: 3px;\n}\n\n.upload-button {\n  position: relative;\n}\n\ninput[type='file'] {\n  opacity: 0; /* invisible but it's there! */\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  cursor: pointer;\n}\n\n.load-gpx {\n  margin-top: 2rem;\n}\n\n.form-export {\n  display: flex;\n}\n\n.control {\n  align-items: center;\n\n  .is-checkradio[type='radio'] + label {\n    line-height: 1.2rem;\n  }\n}\n\n@media screen and (max-width: 350px) {\n  .form-export {\n    display: block;\n  }\n}\n</style>\n","<template>\n  <ul class=\"featureslist\">\n    <li\n      v-for=\"(feature, i) of features\"\n      :key=\"i\"\n      class=\"featureslist-item tag\"\n      @mouseenter=\"showFeature(feature)\"\n      @mouseleave=\"hideFeature(feature)\"\n    >\n      <span>{{ nbPointsOnFeature(feature) }} points</span>\n      <button class=\"delete is-small\" @click=\"removeFeature(feature)\">x</button>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  props: {\n    map: {\n      type: Object,\n      default: null,\n    },\n    features: {\n      type: Array,\n      required: true,\n    },\n  },\n  methods: {\n    removeFeature(feature) {\n      this.map.removeFeature(feature);\n    },\n\n    showFeature(feature) {\n      feature.setStyle(feature.get('highlightedStyle'));\n    },\n\n    hideFeature(feature) {\n      feature.setStyle(feature.get('normalStyle'));\n    },\n\n    nbPointsOnFeature(feature) {\n      return feature.getGeometry().getCoordinates().length;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\n.featureslist {\n  margin: 0 -0.5rem;\n\n  &-item {\n    margin: 0.25rem;\n    font-size: 0.7em;\n\n    &:hover,\n    &:focus {\n      background: $grey-lighter;\n      cursor: default;\n    }\n  }\n}\n</style>\n","import { render } from \"./FeaturesList.vue?vue&type=template&id=6c22161a&scoped=true\"\nimport script from \"./FeaturesList.vue?vue&type=script&lang=js\"\nexport * from \"./FeaturesList.vue?vue&type=script&lang=js\"\n\nimport \"./FeaturesList.vue?vue&type=style&index=0&id=6c22161a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-6c22161a\"\n\nexport default script","import { render } from \"./SubPanelCourse.vue?vue&type=template&id=05c9c091&scoped=true\"\nimport script from \"./SubPanelCourse.vue?vue&type=script&lang=js\"\nexport * from \"./SubPanelCourse.vue?vue&type=script&lang=js\"\n\nimport \"./SubPanelCourse.vue?vue&type=style&index=0&id=05c9c091&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-05c9c091\"\n\nexport default script","<template>\n  <div class=\"yeti-subpanel\">\n    <sub-panel-title><span v-translate>Methods</span></sub-panel-title>\n    <div class=\"columns is-mobile yetitabs\">\n      <div v-for=\"item of Object.keys(methods)\" :key=\"item\" class=\"column yetitab\">\n        <div class=\"control yetitab-control\" :class=\"{ 'yetitab-control--selected': method.type === item }\">\n          <input\n            :id=\"'c2c-method-' + item\"\n            type=\"radio\"\n            name=\"method\"\n            class=\"is-checkradio is-primary\"\n            :value=\"item\"\n            :checked=\"item === method.type\"\n            :disabled=\"item === 'mrd' ? bra.high == 4 || bra.low == 4 : false\"\n            @change=\"onChange($event, 'type')\"\n          />\n          <label :for=\"'c2c-method-' + item\" class=\"yetitab-label\" @click=\"warnAboutMethodBra(item)\">\n            {{ methods[item][0] }}\n            <span class=\"yetiform-info\">{{ methods[item][1] }}</span>\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <div v-show=\"method.type == 'mrd'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Beginner Reduction Method</strong>\n        <span v-translate>\n          (MRD), you do not have to enter any parameters other than the danger level(s) given by the avalanche bulletin.\n        </span>\n      </p>\n      <div class=\"yetiform-note\">\n        <p v-translate>\n          As the name suggests, this method is intended for beginners. Therefore, the safety margin must be particularly\n          important. No parameter other than the danger level is specified. Orientation is ignored.\n        </p>\n      </div>\n\n      <table class=\"yetiform-danger\">\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level1\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - low</strong></td>\n          <td v-translate>I must not use slopes > 40</td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level2\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - moderate</strong></td>\n          <td v-translate>I must not use slopes > 35</td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level3\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - considerable</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 30</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - high to very high</strong></td>\n          <td v-translate>I choose to cancel the outing</td>\n        </tr>\n      </table>\n    </div>\n\n    <div v-show=\"method.type == 'mre'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Elementary Reduction Method</strong>\n        <span v-translate>\n          (MRE), you can enter the sectors of the compass rose that are reported as critical in the avalanche bulletin.\n        </span>\n      </p>\n\n      <input-orientation\n        :value=\"method.orientation\"\n        @input=\"onChange($event, 'orientation')\"\n        class=\"has-text-centered\"\n      />\n\n      <p v-if=\"method.orientation.length != 0\" class=\"yetiform-info\">\n        <span v-translate key=\"tr1\">Orientations</span>: {{ method.orientation.join(', ') }}\n      </p>\n      <p v-else class=\"yetiform-info\">\n        <span v-translate key=\"tr2\">No orientation selected</span>\n      </p>\n\n      <div class=\"yetiform-note\">\n        <p v-translate>\n          Danger level from the avalanche bulletin applies to all orientations. The compass rose distinguishes the most\n          critical sectors presenting an increased risk.\n        </p>\n      </div>\n\n      <table class=\"yetiform-danger\">\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level1\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - low</strong></td>\n          <td>\n            <span v-translate>Stay careful while skiing</span>\n            <br />\n            <small v-translate>risk of a rough fall on hard snow</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level2\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - moderate</strong></td>\n          <td v-translate>I must not use slopes > 40</td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level3\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - considerable</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 35</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr class=\"multiline\">\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - high</strong></td>\n          <td>\n            <span v-translate>I must not use slopes > 30</span>\n            <br />\n            <small v-translate>including dominant slopes</small>\n          </td>\n        </tr>\n        <tr>\n          <td><img src=\"@/assets/img/yeti/levels-danger.svg#level4\" loading=\"lazy\" /></td>\n          <td><strong v-translate>Danger rating - very high</strong></td>\n          <td v-translate>I choose to cancel the outing</td>\n        </tr>\n      </table>\n    </div>\n\n    <div v-show=\"method.type == 'mrp'\">\n      <p>\n        <span v-translate>With the</span>\n        <strong v-translate>Professional Reduction Method</strong>\n        <span v-translate>\n          (MRP), you can refine the hazard potential, set group size and any precautionary measures being considered.\n        </span>\n      </p>\n\n      <h3 class=\"title is-3\" v-translate>Hazard potential</h3>\n      <ul class=\"potential-danger-labels has-text-black\">\n        <li\n          v-for=\"label of potentialDangerLabels\"\n          :key=\"label.text\"\n          :disabled=\"!bra.high || label.text < potentialDangerOptions.min || label.text > potentialDangerOptions.max\"\n          :selected=\"method.potentialDanger == label.text\"\n          class=\"potential-danger-label is-size-5\"\n          @click=\"onChange(label.text, 'potentialDanger')\"\n        >\n          <span :class=\"{ 'is-size-3 has-text-weight-bold': label.val }\">\n            {{ label.text }}\n          </span>\n        </li>\n      </ul>\n\n      <p v-if=\"method.potentialDanger\" class=\"yetiform-info\">\n        <span v-translate key=\"tr1\">Hazard potential:</span>\n        {{ method.potentialDanger }}\n        (<span v-translate>Danger level:</span> {{ bra.high }})\n      </p>\n      <p v-else class=\"yetiform-info\">\n        <span v-translate key=\"tr2\">No selected hazard potential. Set danger level first.</span>\n      </p>\n\n      <div class=\"yetiform-note\">\n        <p v-translate>\n          The hazard potential is calculated from the danger level of the avalanche bulletin. It can be fine-tuned by\n          selecting a potential within the danger levels corresponding range. For example: the avalanche bulletin\n          evokes a danger 3 just after a period in danger 4. We can then indicate a hazard potential of 12 instead of 8.\n        </p>\n      </div>\n\n      <p>\n        <input-checkbox :value=\"method.wetSnow\" @input=\"onChange($event, 'wetSnow')\">\n          <span v-translate>Wet snow: orientation not taken into account</span>\n        </input-checkbox>\n      </p>\n\n      <div class=\"yetiform-note\">\n        <p v-translate>Be careful, in wet snow, no factor to reduce orientation or attendance can be applied.</p>\n      </div>\n\n      <h3 class=\"title is-3\" v-translate>Group</h3>\n\n      <ul>\n        <li class=\"control\" v-for=\"(item, i) of groupSizes\" :key=\"i\">\n          <input\n            :id=\"'c2c-group-size-' + i\"\n            type=\"radio\"\n            name=\"groupSize\"\n            class=\"is-checkradio is-primary\"\n            :value=\"item.value\"\n            :checked=\"item.value === method.groupSize\"\n            @change=\"onChange($event, 'groupSize')\"\n          />\n          <label :for=\"'c2c-group-size-' + i\">{{ item.text }}</label>\n        </li>\n      </ul>\n\n      <div class=\"yetiform-note\">\n        <p v-translate>Group size</p>\n        <ul class=\"content-ul\">\n          <li v-translate>Large group = 5 people and more</li>\n          <li v-translate>Small group = 2 to 4 people</li>\n        </ul>\n        <p v-translate>Load shedding distance</p>\n        <ul class=\"content-ul\">\n          <li v-translate>10 meters minimum while ascending</li>\n          <li v-translate>50 meters while descending</li>\n        </ul>\n      </div>\n\n      <p v-translate>\n        The slope traveled frequently factor is not taken into account by the application, as it is often difficult to\n        ascertain when preparing for an outing.\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SubPanelTitle from '@/components/yeti/SubPanelTitle.vue';\n\nconst DANGER = {\n  min: 1,\n  max: 16,\n  bra: [\n    { min: 1, max: 2, val: 2 },\n    { min: 3, max: 6, val: 4 },\n    { min: 6, max: 12, val: 8 },\n    { min: 13, max: 16, val: 16 },\n  ],\n};\n\nexport default {\n  components: { SubPanelTitle },\n  props: {\n    method: {\n      type: Object,\n      default: null,\n    },\n    bra: {\n      type: Object,\n      default: null,\n    },\n  },\n  data() {\n    return {\n      methods: {\n        mrd: ['MRD', this.$gettext('Beginner')],\n        mre: ['MRE', this.$gettext('Elementary')],\n        mrp: ['MRP', this.$gettext('Expert')],\n      },\n      groupSizes: [\n        {\n          value: 1,\n          text: this.$gettext('No reduction factor'),\n        },\n        {\n          value: 2.1,\n          text: this.$gettext('Large group with load shedding distance'),\n        },\n        {\n          value: 2.2,\n          text: this.$gettext('Small group without distance'),\n        },\n        {\n          value: 3,\n          text: this.$gettext('Small group with load shedding distance'),\n        },\n      ],\n    };\n  },\n  computed: {\n    potentialDangerLabels() {\n      const result = [];\n      for (let i = DANGER.min; i <= DANGER.max; i++) {\n        const data = { text: i };\n        if (i === 2 || i === 4 || i === 8 || i === 16) {\n          data.val = i;\n        }\n        result.push(data);\n      }\n\n      return result;\n    },\n    potentialDangerOptions() {\n      if (!this.bra.high) {\n        return { val: undefined, min: 1, max: 16 };\n      }\n\n      return DANGER.bra[this.bra.high - 1];\n    },\n  },\n  watch: {\n    'bra.high': 'onBraChange',\n  },\n  methods: {\n    onChange(event, prop) {\n      let value = null;\n      if (prop === 'orientation' || prop === 'wetSnow' || prop === 'potentialDanger') {\n        value = event;\n      } else {\n        value = event.target.value;\n      }\n      this.$emit('update:method', Object.assign(this.method, { [prop]: value }));\n    },\n    warnAboutMethodBra(item) {\n      this.$emit('warn-about-method-bra', item);\n    },\n    onBraChange() {\n      this.onChange(this.potentialDangerOptions.val, 'potentialDanger');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\np:not(:last-child),\nul:not(:last-child),\ntable:not(:last-child) {\n  margin-bottom: 1rem;\n}\n\n.yetiform-danger {\n  width: 100%;\n  table-layout: fixed;\n  color: $dark;\n  background-color: $white-ter;\n\n  tr {\n    border: 1px solid $white;\n    border-left: 0;\n    border-right: 0;\n  }\n\n  td {\n    vertical-align: middle;\n    height: 45px;\n  }\n\n  .multiline td {\n    vertical-align: baseline;\n  }\n\n  td:first-child {\n    width: 60px;\n  }\n\n  td:first-child + td {\n    width: 40%;\n  }\n\n  td img {\n    vertical-align: -12px;\n    height: 35px;\n  }\n}\n\n.yetitabs {\n  margin: 0;\n  padding: 0.75rem 0;\n}\n\n.yetitab {\n  padding: 0;\n}\n\n.yetitab-control {\n  .yetitab-label {\n    display: block;\n    margin: 0;\n    padding: 0.25rem;\n    padding-left: 2rem;\n    border: 1px solid transparent;\n    border-radius: 4px;\n\n    &:hover,\n    &:focus {\n      border-color: $grey-lighter;\n    }\n\n    &.yetitab-label:before {\n      top: 0.25rem !important;\n      left: 0.25rem !important;\n    }\n    &.yetitab-label:after {\n      top: 1em !important;\n      left: 1em !important;\n    }\n  }\n\n  .is-checkradio:checked + label:after {\n    top: 0.25rem !important;\n    left: 0.25rem !important;\n  }\n}\n\n.yetitab-control--selected {\n  .yetitab-label {\n    color: $primary;\n    border-color: $primary;\n\n    &:hover,\n    &:focus {\n      border-color: $primary;\n    }\n  }\n}\n\n@media screen and (max-width: 490px),\n  screen and (min-width: $tablet) and (max-width: 970px),\n  screen and (min-width: $desktop) and (max-width: 1180px),\n  screen and (min-width: $widescreen) and (max-width: 1370px),\n  screen and (min-width: $fullhd) and (max-width: 1650px) {\n  .yetitabs {\n    flex-wrap: wrap;\n  }\n  .yetitab {\n    flex: 0 0 50%;\n  }\n  .yetiform-danger {\n    tr,\n    td {\n      display: block;\n    }\n    tr {\n      padding: 0.5em 0;\n    }\n    td:first-child {\n      float: left;\n    }\n    td:first-child ~ td {\n      height: auto;\n      width: calc(100% - 60px);\n      margin-left: 60px;\n    }\n  }\n}\n\n.potential-danger-labels {\n  display: flex;\n  align-items: stretch;\n  user-select: none;\n  background: linear-gradient(\n    to right,\n    #bfe12b,\n    #bfe12b 12%,\n    #fff200 20%,\n    #fff200 32%,\n    #f68712 40%,\n    #f68712 72%,\n    #ed1c24 80%,\n    #ed1c24 95%,\n    #c01a2c\n  );\n\n  .potential-danger-label {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex: 1 1 20px;\n    text-align: center;\n    border: 3px solid transparent;\n\n    &[disabled] {\n      cursor: not-allowed;\n      pointer-events: none;\n      background-color: rgba(255, 255, 255, 0.8);\n      color: grey;\n    }\n\n    &[selected] {\n      border-color: black;\n    }\n  }\n}\n</style>\n","import { render } from \"./SubPanelMethods.vue?vue&type=template&id=b13e18f2&scoped=true\"\nimport script from \"./SubPanelMethods.vue?vue&type=script&lang=js\"\nexport * from \"./SubPanelMethods.vue?vue&type=script&lang=js\"\n\nimport \"./SubPanelMethods.vue?vue&type=style&index=0&id=b13e18f2&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-b13e18f2\"\n\nexport default script","<template>\n  <div class=\"column pb-0 mb-0 tabs is-boxed yetitabs\">\n    <ul role=\"tablist\">\n      <li v-for=\"(tab, i) in tabs\" role=\"presentation\" :key=\"tab\" :class=\"{ 'is-active': activeTab === i }\">\n        <a\n          class=\"yetitabs-link\"\n          role=\"tab\"\n          :href=\"'#panel' + i\"\n          :id=\"'tab' + i\"\n          ref=\"tab\"\n          :aria-selected=\"activeTab === i\"\n          :tabindex=\"activeTab === i ? false : -1\"\n          @click.prevent=\"setActiveTab(i)\"\n          @keydown=\"setActiveTabKeyboard($event, i)\"\n        >\n          {{ tab }} <counter is-primary v-if=\"i === 1 && hasFeatures\">1</counter>\n        </a>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport Counter from '@/components/yeti/Counter.vue';\nexport default {\n  components: { Counter },\n  props: {\n    tabs: {\n      type: Array,\n      required: true,\n    },\n    activeTab: {\n      type: Number,\n      required: true,\n    },\n    hasFeatures: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  methods: {\n    setActiveTab(index) {\n      // focus active tab\n      this.$refs.tab[index].focus();\n      // then set\n      this.$emit('update:activeTab', index);\n    },\n\n    setActiveTabKeyboard(event, index) {\n      // Set arrow keys: left/right = switch active tabs / down = focus panel\n      const ARROW_LEFT = 37;\n      const ARROW_RIGHT = 39;\n      const ARROW_DOWN = 40;\n      let dir =\n        event.which === ARROW_LEFT\n          ? index - 1\n          : event.which === ARROW_RIGHT\n          ? index + 1\n          : event.which === ARROW_DOWN\n          ? 'down'\n          : null;\n\n      if (dir !== null) {\n        event.preventDefault();\n\n        // If the down key is pressed, move focus to the open panel,\n        // otherwise switch to the adjacent tab\n        dir === 'down'\n          ? this.$parent.$refs['panel' + index].$el.focus()\n          : this.tabs[dir]\n          ? this.setActiveTab(dir)\n          : void 0;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yetitabs {\n  margin: 0 0 0 -1px !important;\n  overflow: visible;\n\n  &-link {\n    font-size: 0.9em;\n    padding: 0.25em 1em;\n  }\n\n  li,\n  a {\n    height: 100%;\n  }\n\n  li {\n    margin-right: 1px;\n  }\n}\n</style>\n","import { render } from \"./Tabs.vue?vue&type=template&id=c6260810&scoped=true\"\nimport script from \"./Tabs.vue?vue&type=script&lang=js\"\nexport * from \"./Tabs.vue?vue&type=script&lang=js\"\n\nimport \"./Tabs.vue?vue&type=style&index=0&id=c6260810&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-c6260810\"\n\nexport default script","<template>\n  <div class=\"columns\">\n    <div class=\"column has-text-right\">\n      <button\n        class=\"button is-primary\"\n        :class=\"{ 'is-loading': loading }\"\n        :disabled=\"loading\"\n        :tabindex=\"tabindex\"\n        @click=\"$emit('click')\"\n        v-translate\n      >\n        Compute risk\n      </button>\n      <p class=\"yetiform-error\" v-if=\"currentError\">\n        <span>\n          {{ currentError }}\n        </span>\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    currentError: {\n      type: String,\n      default: '',\n    },\n    loading: {\n      type: [Promise, Object],\n      default: null,\n    },\n    tabindex: {\n      type: String,\n      default: '0',\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.yetiform-error {\n  font-size: 0.8em;\n  font-style: italic;\n  margin-top: 10px;\n  text-align: right;\n  opacity: 0.75;\n\n  span::before {\n    content: 'i';\n    display: inline-block;\n    width: 1rem;\n    height: 1rem;\n    background: rgba(0, 60, 136, 0.5);\n    color: #fff;\n    border-radius: 50%;\n    font-size: 0.71rem;\n    font-weight: bold;\n    text-align: center;\n  }\n}\n</style>\n","import { render } from \"./ValidationButton.vue?vue&type=template&id=ad96ba08&scoped=true\"\nimport script from \"./ValidationButton.vue?vue&type=script&lang=js\"\nexport * from \"./ValidationButton.vue?vue&type=script&lang=js\"\n\nimport \"./ValidationButton.vue?vue&type=style&index=0&id=ad96ba08&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-ad96ba08\"\n\nexport default script","<template>\n  <div class=\"column map-container\">\n    <div class=\"legend\">\n      <div>\n        <div class=\"legend-button is-pulled-right ol-control\">\n          <button type=\"button\" @click=\"showLegend = !showLegend\">\n            <span v-translate>Legend</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"legend-content\" v-show=\"showLegend === true\">\n        <p class=\"is-italic\" v-if=\"!mapLegend\" v-translate>Legend will appear automatically with the generated image</p>\n        <div v-else>\n          <ul>\n            <li v-for=\"(item, i) of mapLegend.items\" :key=\"i\">\n              <span class=\"legend-color\" :style=\"'background:' + item.color\" />\n              <!-- $gettext('Risky slopes') -->\n              <!-- $gettext('Risky slopes, increased risk due to orientation') -->\n              <!-- $gettext('Residual risk >1') -->\n              <!-- $gettext('Residual risk >1.3') -->\n              <!-- $gettext('Residual risk >1.5') -->\n              <span>{{ $gettext(item.text['en']) }}</span>\n            </li>\n          </ul>\n          <!-- $gettext('From danger 3, consider the slopes which dominate the route') -->\n          <p class=\"is-size-6 is-italic\">{{ $gettext(mapLegend.comment['en']) }}</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"ol-control opacity\" v-if=\"yetiLayerLoaded\">\n      <div class=\"opacity-slider\">\n        <vue-slider\n          v-model=\"opacityYetiLayer\"\n          :min=\"0\"\n          :max=\"1\"\n          :interval=\"0.01\"\n          tooltip=\"none\"\n          direction=\"btt\"\n          :rail-style=\"{ background: 'rgba(0,0,0,.25)' }\"\n          :process-style=\"{ background: 'white' }\"\n          @change=\"onUpdateOpacityYetiLayer\"\n        />\n      </div>\n    </div>\n    <map-view ref=\"map\" show-recenter-on />\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport 'vue-slider-component/theme/default.css';\n\nimport c2c from '@/js/apis/c2c';\nimport ol from '@/js/libs/ol';\n\nconst YETI_ATTRIBUTION = 'RGE ALTI';\nconst YETI_LAYER_OPACITY = 0.75;\nconst YETI_URL_MOUNTAINS = '/mountains_WGS84.json';\nconst YETI_URL_AREAS = 'https://api.ensg.eu/yeti-extent';\n\nconst normalLineStyle = new ol.style.Style({\n  stroke: new ol.style.Stroke({\n    color: 'yellow',\n    width: 3,\n  }),\n});\n\nconst highlightedLineStyle = [\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'rgba(255, 255, 0, .5)',\n      width: 8,\n    }),\n    zIndex: 1,\n  }),\n  new ol.style.Style({\n    stroke: new ol.style.Stroke({\n      color: 'red',\n      width: 3,\n    }),\n    zIndex: 1,\n  }),\n];\n\nexport default {\n  components: { VueSlider: () => import(/* webpackChunkName: \"slider\" */ 'vue-slider-component') },\n  props: {\n    activeTab: {\n      type: Number,\n      required: true,\n    },\n    validMinZoom: {\n      type: Number,\n      required: true,\n    },\n    mapZoom: {\n      type: Number,\n      required: true,\n    },\n    computedExtent: {\n      type: Array,\n      required: true,\n    },\n    computedData: {\n      type: String,\n      default: null,\n    },\n    mountains: {\n      type: Object,\n      required: true,\n    },\n    areaOk: {\n      type: Boolean,\n      required: true,\n    },\n    features: {\n      type: Array,\n      required: true,\n    },\n    gpx: {\n      type: String,\n      default: null,\n    },\n    featuresTitle: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      featuresTitleFromSource: null,\n      promiseDocument: null,\n\n      yetiLayerLoaded: false,\n      showLegend: undefined,\n      mapLegend: null,\n      opacityYetiLayer: YETI_LAYER_OPACITY,\n\n      areas: [],\n    };\n  },\n  computed: {\n    localFeaturesTitle() {\n      if (this.featuresTitleFromSource) {\n        return this.featuresTitleFromSource;\n      }\n      if (this.features.length) {\n        return this.featuresTitle;\n      }\n      return null;\n    },\n    areasLayerStyle() {\n      const levelStrokeWidth = 2;\n      const levelStrokeOpacity = 4;\n      const lineWidthStroke = Math.max(0, Math.min(this.mapZoom - 6, levelStrokeWidth));\n      const opacityStroke = Math.max(0, Math.min(this.mapZoom - 6, levelStrokeOpacity)) / 4;\n      const lineDashStroke = opacityStroke * 6;\n\n      return new ol.style.Style({\n        stroke: new ol.style.Stroke({\n          color: 'hsla(30, 100%, 40%,' + opacityStroke + ')',\n          width: lineWidthStroke,\n          lineDash: [lineDashStroke],\n        }),\n      });\n    },\n  },\n  watch: {\n    gpx() {\n      if (this.gpx) {\n        this.addFeaturesFromGpx(this.gpx);\n      }\n    },\n    localFeaturesTitle() {\n      this.$emit('update:featuresTitle', this.localFeaturesTitle);\n    },\n    activeTab() {\n      if (this.activeTab === 0) {\n        this.drawInteraction.setActive(false);\n        this.modifyInteraction.setActive(false);\n        this.snapInteraction.setActive(false);\n      } else {\n        this.drawInteraction.setActive(true);\n        this.modifyInteraction.setActive(true);\n        this.snapInteraction.setActive(true);\n      }\n    },\n    computedData() {\n      this.drawYetiImage();\n    },\n    computedExtent() {\n      this.drawExtent(this.computedExtent);\n    },\n  },\n  mounted() {\n    // New layers\n    // yeti layer\n    this.yetiLayer = new ol.layer.Image({\n      source: new ol.source.ImageStatic({\n        url: null,\n        imageExtent: ol.extent.createEmpty(),\n      }),\n      opacity: this.opacityYetiLayer,\n    });\n    // extent layer\n    this.extentLayer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: [\n        new ol.style.Style({\n          fill: new ol.style.Fill({\n            color: 'hsla(30, 100%, 60%, .45)',\n          }),\n        }),\n        new ol.style.Style({\n          stroke: new ol.style.Stroke({\n            color: 'hsla(30, 100%, 40%, 1)',\n            width: 2,\n          }),\n          geometry: (feature) => {\n            return new ol.geom.Polygon([feature.getGeometry().getCoordinates()[1]]);\n          },\n        }),\n      ],\n    });\n    // areas layer\n    this.areasLayer = new ol.layer.Vector({\n      renderMode: 'image',\n      source: new ol.source.Vector(),\n      style: this.areasLayerStyle,\n    });\n    // features layer\n    this.featuresLayer = new ol.layer.Vector({\n      source: new ol.source.Vector(),\n      style: normalLineStyle,\n    });\n    this.featuresLayerSource = this.featuresLayer.getSource();\n\n    // store map component and map/view\n    this.mapView = this.$refs.map;\n    this.map = this.$refs.map.map;\n    this.view = this.map.getView();\n\n    // add layers to map\n    this.map.addLayer(this.areasLayer);\n    this.map.addLayer(this.yetiLayer);\n    this.map.addLayer(this.extentLayer);\n    this.map.addLayer(this.featuresLayer);\n\n    // load camptocamp document\n    const doc = this.$route.params.document_id;\n    const lang = this.$language.current;\n    if (doc) {\n      c2c['route'].getCooked(doc, lang).then(this.addFeaturesFromDocument);\n    }\n\n    // add events\n    this.addEvents();\n    // add interactions\n    this.addInteractions();\n\n    // set mountains\n    axios.get(YETI_URL_MOUNTAINS).then(this.onMountainsResult);\n\n    // set areas (yeti valid areas)\n    axios.get(YETI_URL_AREAS).then(this.onAreasResult);\n  },\n  methods: {\n    getExtent(projection) {\n      return this.mapView.getExtent(projection);\n    },\n\n    clearLayers() {\n      this.yetiLayer.setSource(null);\n      this.yetiLayerLoaded = false;\n\n      this.extentLayer.getSource().clear();\n    },\n\n    addEvents() {\n      // remove hover/click events on map\n      this.map.un('pointermove', this.mapView.onPointerMove);\n      this.map.un('click', this.mapView.onClick);\n      // global events\n      this.map.on('moveend', this.onMapMoveEnd);\n      // features events (added feature)\n      this.featuresLayerSource.on('addfeature', this.onFeature);\n    },\n\n    addInteractions() {\n      const source = this.featuresLayerSource;\n\n      this.modifyInteraction = new ol.interaction.Modify({ source });\n      this.map.addInteraction(this.modifyInteraction);\n\n      this.drawInteraction = new ol.interaction.Draw({\n        source,\n        type: 'LineString',\n      });\n      this.map.addInteraction(this.drawInteraction);\n\n      this.snapInteraction = new ol.interaction.Snap({ source });\n      this.map.addInteraction(this.snapInteraction);\n\n      this.drawInteraction.on('drawstart', this.onDrawStart);\n      this.drawInteraction.on('drawend', this.onDrawEnd);\n      this.modifyInteraction.on('modifyend', this.onModifyEnd);\n\n      this.drawInteraction.setActive(false);\n      this.modifyInteraction.setActive(false);\n      this.snapInteraction.setActive(false);\n    },\n\n    onMapMoveEnd(event) {\n      const mapZoom = Math.floor(event.map.getView().getZoom() * 10) / 10;\n      this.$emit('update:mapZoom', mapZoom);\n\n      // set visible mountains\n      this.setVisibleMountains();\n\n      // is area OK ?\n      this.isAreaOK();\n      // update areas layer style\n      this.areasLayer.setStyle(this.areasLayerStyle);\n    },\n\n    fitMapToFeatures() {\n      let extent = ol.extent.createEmpty();\n\n      ol.extent.extend(extent, this.featuresLayerSource.getExtent());\n\n      this.view.fit(extent, { size: this.map.getSize() });\n\n      // set a minimum zoom level\n      this.view.setZoom(Math.max(this.validMinZoom, this.view.getZoom()));\n    },\n\n    addFeaturesFromGpx(gpx) {\n      // first, remove camptocamp document\n      this.promiseDocument = null;\n      // and clear geometry\n      this.featuresLayerSource.clear(true);\n\n      // before reading gpx, set what we are doing\n      this.loadingExternalFeatures = true;\n\n      const gpxFormat = new ol.format.GPX();\n      const features = gpxFormat.readFeatures(gpx, { featureProjection: 'EPSG:3857' });\n      features.map(this.addFeature);\n      this.featuresTitleFromSource = this.getFeaturesTitleFromGpx(features);\n\n      // gpx is loaded, go back to normal case\n      this.loadingExternalFeatures = false;\n      // and emit new features\n      this.emitFeaturesEvent();\n      // fit map to new features\n      this.fitMapToFeatures();\n    },\n\n    addFeaturesFromDocument(doc) {\n      // before reading document, set what we are doing\n      this.loadingExternalFeatures = true;\n\n      const documentGeometry = doc.data.geometry.geom_detail;\n      const feature = new ol.format.GeoJSON().readFeature(documentGeometry);\n      this.addFeature(feature);\n      this.featuresTitleFromSource = this.getFeaturesTitleFromDocument(doc);\n\n      // document is loaded, go back to normal case\n      this.loadingExternalFeatures = false;\n      // and emit new features\n      this.emitFeaturesEvent();\n      // fit map to new features\n      this.fitMapToFeatures();\n    },\n\n    addFeature(feature) {\n      // split multilinestrings into linestrings\n      if (feature.getGeometry().getType() === 'MultiLineString') {\n        const lines = feature.getGeometry().getLineStrings();\n        lines.map((line) => new ol.Feature({ geometry: line })).map(this.addFeature);\n      } else {\n        const nbPointsOnFeature = feature.getGeometry().getCoordinates().length;\n        if (nbPointsOnFeature >= 2) {\n          this.featuresLayerSource.addFeature(feature);\n        }\n      }\n    },\n\n    removeFeature(feature) {\n      // remove feature\n      // when only one left, ask for user to confirm\n      let toBeRemoved = !(\n        this.featuresLayerSource.getFeatures().length === 1 && !confirm(this.$gettext('Confirm delete'))\n      );\n      if (toBeRemoved) {\n        this.featuresLayerSource.removeFeature(feature);\n        this.emitFeaturesEvent();\n      }\n    },\n\n    removeFeatures() {\n      if (confirm(this.$gettext('Confirm delete'))) {\n        this.featuresLayerSource.clear(true);\n        this.emitFeaturesEvent();\n      }\n    },\n\n    emitFeaturesEvent() {\n      // updates features\n      const features = this.getFeaturesLayerFeatures();\n      this.$emit('update:features', features);\n\n      if (features.length === 0) {\n        this.featuresTitleFromSource = null;\n\n        // if user come from a document url, remove url\n        if (this.$route.params.document_id) {\n          this.$router.replace({ path: '/' + this.$route.name });\n        }\n      }\n    },\n\n    getFeaturesLayerFeatures() {\n      return this.featuresLayerSource.getFeatures();\n    },\n\n    getFeaturesTitleFromGpx(features) {\n      if (features && features.length) {\n        const properties = features[0].getProperties();\n        if (properties.name) {\n          return properties.name;\n        } else {\n          return this.$gettext('GPX file');\n        }\n      }\n    },\n\n    getFeaturesTitleFromDocument(document) {\n      return this.$documentUtils.getDocumentTitle(document.data);\n    },\n\n    onFeature(event) {\n      // set features styles\n      event.feature.set('highlightedStyle', highlightedLineStyle);\n      // emit new features, only in normal case (drawing)\n      // not in gpx/document case (prevent multiple update for each lines)\n      if (!this.loadingExternalFeatures) {\n        this.emitFeaturesEvent();\n      }\n    },\n\n    onDrawStart() {\n      document.addEventListener('keydown', this.onKeyWhileDrawing);\n      document.addEventListener('keypress', this.onKeyWhileDrawing);\n    },\n\n    onDrawEnd() {\n      document.removeEventListener('keydown', this.onKeyWhileDrawing);\n      document.removeEventListener('keypress', this.onKeyWhileDrawing);\n    },\n\n    onModifyEnd() {\n      this.emitFeaturesEvent();\n    },\n\n    onKeyWhileDrawing(event) {\n      event.preventDefault();\n      // backspace key\n      if (event.key === 'Backspace') {\n        this.drawInteraction.removeLastPoint();\n      }\n    },\n\n    drawYetiImage() {\n      const xml = new DOMParser().parseFromString(this.computedData, 'application/xml');\n      const imageBase64 = xml.getElementsByTagName('wps:ComplexData')[0].textContent;\n      const imageBbox = xml.getElementsByTagName('wps:ComplexData')[1].textContent;\n      const imageExtent = ol.proj.transformExtent(imageBbox.split(',').map(Number), 'EPSG:4326', 'EPSG:3857');\n\n      this.yetiLayer.setSource(\n        new ol.source.ImageStatic({\n          imageLoadFunction(image) {\n            image.getImage().src = 'data:image/png;base64,' + imageBase64;\n          },\n          attributions: YETI_ATTRIBUTION,\n          imageExtent,\n        })\n      );\n      // source is set\n      this.yetiLayerLoaded = true;\n      // set map legend\n      this.setLegend(xml);\n    },\n\n    setLegend(xml) {\n      this.mapLegend = JSON.parse(xml.getElementsByTagName('wps:ComplexData')[2].textContent);\n      this.mapLegend.items.forEach((item) => {\n        item.color = `rgb(${item.color[0]}, ${item.color[1]}, ${item.color[2]})`;\n      });\n    },\n\n    drawExtent(extent) {\n      // extend extent\n      const extentFill = ol.extent.buffer(extent, Math.max(extent[2] - extent[0], extent[3] - extent[1]) / 10);\n      // then, create a donut polygon\n      const feature = new ol.Feature(new ol.geom.Polygon([this.toLinearRing(extentFill), this.toLinearRing(extent)]));\n      // add feature to extentlayer\n      this.extentLayer.getSource().addFeature(feature);\n    },\n\n    toLinearRing(extent) {\n      const minX = extent[0];\n      const minY = extent[1];\n      const maxX = extent[2];\n      const maxY = extent[3];\n      return [\n        [minX, minY],\n        [minX, maxY],\n        [maxX, maxY],\n        [maxX, minY],\n        [minX, minY],\n      ];\n    },\n\n    onUpdateOpacityYetiLayer() {\n      this.yetiLayer.setOpacity(this.opacityYetiLayer);\n    },\n\n    onMountainsResult(data) {\n      const features = data.data;\n      let mountains = new ol.format.GeoJSON().readFeatures(features).map((mountain) => {\n        return mountain.getProperties();\n      });\n      this.allMountains = this.sortMountainsByMassif(mountains);\n      this.setVisibleMountains();\n    },\n\n    sortMountainsByMassif(mountains) {\n      // first, order mountains by massifs\n      const sortedMountains = {};\n      for (let i = 0; i < mountains.length; i++) {\n        if (!sortedMountains[mountains[i].mountain]) {\n          sortedMountains[mountains[i].mountain] = [];\n        }\n        sortedMountains[mountains[i].mountain].push(mountains[i]);\n      }\n      mountains = sortedMountains;\n\n      // then sort mountains inside each massif\n      for (const i in mountains) {\n        mountains[i].sort((a, b) => {\n          if (a.title < b.title) return -1;\n          if (b.title > a.title) return 1;\n          return 0;\n        });\n      }\n\n      return mountains;\n    },\n\n    setVisibleMountains() {\n      // return, if mountains not loaded\n      if (!this.allMountains) {\n        return;\n      }\n      const mapExtent = this.getExtent('EPSG:4326');\n      // clone this.mountains first, with no reference\n      const visibleMountains = Object.assign({}, this.allMountains);\n      // then filter if polygon isnt in view\n      for (const massif in visibleMountains) {\n        visibleMountains[massif] = visibleMountains[massif].filter((mountain) => {\n          const polygon = mountain.geometry;\n          return polygon.intersectsExtent(mapExtent);\n        });\n        // unset massif if empty\n        if (visibleMountains[massif].length === 0) {\n          delete visibleMountains[massif];\n        }\n      }\n      // set mountains in visibleMountains key\n      const mountains = { visibleMountains };\n      this.$emit('update:mountains', mountains);\n    },\n\n    onAreasResult(data) {\n      const areas = data.data;\n      const rawFeatures = new ol.format.GeoJSON().readFeatures(areas);\n      // geojson is 4326, convert to 3857\n      rawFeatures[0].getGeometry().transform('EPSG:4326', 'EPSG:3857');\n\n      this.areas = rawFeatures.map((area) => {\n        return area.getProperties();\n      });\n\n      // flatten coords\n      const rawCoords = rawFeatures[0].getGeometry().getCoordinates();\n      const coords = [];\n      for (let i = 0; i < rawCoords.length; i++) {\n        coords.push(...rawCoords[i]);\n      }\n      // then, build linestrings instead of polygon (perf)\n      const features = [];\n      for (let i = 0; i < coords.length; i++) {\n        for (let j = 0; j < coords[i].length - 1; j++) {\n          features.push(new ol.Feature(new ol.geom.LineString([coords[i][j], coords[i][j + 1]])));\n        }\n      }\n\n      // add features\n      this.areasLayer.getSource().addFeatures(features);\n      // is area OK\n      this.isAreaOK();\n    },\n\n    isAreaOK() {\n      const mapExtent = this.getExtent('EPSG:3857');\n\n      let areaOk = true;\n\n      for (const area in this.areas) {\n        const polygon = this.areas[area].geometry;\n        if (polygon.intersectsExtent(mapExtent)) {\n          break;\n        } else {\n          areaOk = false;\n        }\n      }\n\n      this.$emit('update:areaOk', areaOk);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/sass/variables.scss';\n\n$section-padding: 1.5rem; //TODO find this variable\n$box-padding: 1.25rem; //TODO find this variable\n$header-height: 34px;\n$box-margin: 1.5rem; //TODO find this variable\n$yeti-height: calc(\n  100vh - #{$navbar-height} - #{$section-padding} - 2 *#{$box-padding} - #{$header-height} - #{$box-margin} - #{$box-margin}\n);\n\n.map-container {\n  position: relative;\n\n  .legend {\n    position: absolute;\n    z-index: 6;\n    top: 1.25rem;\n    right: 1.25rem;\n\n    .legend-button {\n      position: static;\n\n      button {\n        width: auto;\n        padding: 0 0.5em;\n      }\n    }\n\n    .legend-content {\n      margin-top: 0.5rem;\n      margin-left: 1.25rem;\n      border-radius: 2px;\n      border: 1px solid lightgray;\n      padding: 0.5rem;\n      background: white;\n      clear: both;\n    }\n\n    .legend-color {\n      vertical-align: bottom;\n      display: inline-block;\n      width: 21px;\n      height: 21px;\n      margin-right: 5px;\n    }\n  }\n\n  .opacity {\n    position: absolute;\n    z-index: 5;\n    top: 3.5rem;\n    right: 1.25rem;\n\n    .opacity-slider {\n      font-size: 1.14em;\n      margin: 1px;\n      width: 1.375em;\n      padding: 1rem 0;\n      background: rgba(0, 60, 136, 0.5);\n      border-radius: 2px;\n\n      &:hover {\n        background: rgba(0, 60, 136, 0.7);\n      }\n    }\n\n    .vue-slider {\n      padding: 0 9px !important;\n      height: 300px !important;\n      max-height: 30vh;\n    }\n\n    .vue-slider-process {\n      background: $white;\n    }\n\n    .vue-slider-rail {\n      background: $black;\n    }\n  }\n}\n@media screen and (max-width: $tablet) {\n  .map-container {\n    height: $yeti-height;\n    padding-left: 0;\n    padding-top: 0;\n    padding-bottom: 0;\n\n    .legend {\n      top: 0.5rem;\n\n      .legend-content {\n        margin-left: 0.5rem;\n      }\n    }\n\n    .opacity {\n      top: 2.75rem;\n    }\n  }\n}\n\n@media screen and (min-width: $tablet) {\n  .yeti-content {\n    .map-container {\n      min-height: 100%;\n    }\n  }\n}\n</style>\n","import { render } from \"./YetiMap.vue?vue&type=template&id=28368954&scoped=true\"\nimport script from \"./YetiMap.vue?vue&type=script&lang=js\"\nexport * from \"./YetiMap.vue?vue&type=script&lang=js\"\n\nimport \"./YetiMap.vue?vue&type=style&index=0&id=28368954&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-28368954\"\n\nexport default script","import { render } from \"./YetiView.vue?vue&type=template&id=b6fce666&scoped=true\"\nimport script from \"./YetiView.vue?vue&type=script&lang=js\"\nexport * from \"./YetiView.vue?vue&type=script&lang=js\"\n\nimport \"./YetiView.vue?vue&type=style&index=0&id=b6fce666&scoped=true&lang=scss\"\nimport \"./YetiView.vue?vue&type=style&index=1&id=b6fce666&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-b6fce666\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./YetiMap.vue?vue&type=style&index=0&id=28368954&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/logo-ensg.e6781953.jpg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./YetiView.vue?vue&type=style&index=0&id=b6fce666&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Counter.vue?vue&type=style&index=0&id=79e0b738&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/logo-fondation-petzl.24ab8a49.webp\";","module.exports = __webpack_public_path__ + \"img/logo-ensg.35fbf647.webp\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubPanelBra.vue?vue&type=style&index=0&id=df986eea&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FeaturesList.vue?vue&type=style&index=0&id=6c22161a&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/logo-fondation-petzl.4b665657.jpg\";"],"sourceRoot":""}