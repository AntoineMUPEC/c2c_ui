(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["wiki-tools"],{"05c6":function(e,t,i){"use strict";i("663f")},"078b":function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.global,i=e.transform,n=t.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),o=t.ArrayBuffer&&ArrayBuffer.prototype.slice||function(e,t){t=t||this.byteLength-e;var i=new Uint8Array(this,e,t),n=new Uint8Array(t);return n.set(i),n.buffer},a={jpeg:{65505:[],65517:[]}};function s(i,s,l,c){var r=this;function d(s,d){if(!(t.DataView&&n&&i&&i.size>=12&&"image/jpeg"===i.type))return s(c);var u=l.maxMetaDataSize||262144;e.readFile(n.call(i,0,u),(function(e){var t=new DataView(e);if(65496!==t.getUint16(0))return d(new Error("Invalid JPEG file: Missing JPEG marker."));var i,n,u,m,h=2,f=t.byteLength-4,p=h;while(h<f){if(i=t.getUint16(h),!(i>=65504&&i<=65519||65534===i))break;if(n=t.getUint16(h+2)+2,h+n>t.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if(u=a.jpeg[i],u&&!l.disableMetaDataParsers)for(m=0;m<u.length;m+=1)u[m].call(r,t,h,n,c,l);h+=n,p=h}!l.disableImageHead&&p>6&&(c.imageHead=o.call(e,0,p)),s(c)}),d,"readAsArrayBuffer")||s(c)}return l=l||{},t.Promise&&"function"!==typeof s?(l=s||{},c=l,new Promise(d)):(c=c||{},d(s,s))}function l(e,t,i){return e&&t&&i?new Blob([i,n.call(e,t.byteLength)],{type:"image/jpeg"}):null}function c(e,i,n){var o={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!n&&t.Promise)return s(e,o).then((function(t){return l(e,t.imageHead,i)}));s(e,(function(t){n(l(e,t.imageHead,i))}),o)}e.transform=function(n,o,a,l,c){e.requiresMetaData(o)?(c=c||{},s(l,(function(s){s!==c&&(t.console&&console.log(s),s=c),i.call(e,n,o,a,l,s)}),o,c)):i.apply(e,arguments)},e.blobSlice=n,e.bufferSlice=o,e.replaceHead=c,e.parseMetaData=s,e.metaDataParsers=a}))},"09b7":function(e,t,i){var n;(function(o){"use strict";var a=o.URL||o.webkitURL;function s(e){return!!a&&a.createObjectURL(e)}function l(e){return!!a&&a.revokeObjectURL(e)}function c(e,t){!e||"blob:"!==e.slice(0,5)||t&&t.noRevoke||l(e)}function r(e,t,i,n){if(!o.FileReader)return!1;var a=new FileReader;a.onload=function(){t.call(a,this.result)},i&&(a.onabort=a.onerror=function(){i.call(a,this.error)});var s=a[n||"readAsDataURL"];return s?(s.call(a,e),a):void 0}function d(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}function u(e,t,i){function n(t,n){var a,l=document.createElement("img");function m(e,i){t!==n?e instanceof Error?n(e):(i=i||{},i.image=e,t(i)):t&&t(e,i)}function h(t,n){n&&o.console&&console.log(n),t&&d("Blob",t)?(e=t,a=s(e)):(a=e,i&&i.crossOrigin&&(l.crossOrigin=i.crossOrigin)),l.src=a}return l.onerror=function(e){c(a,i),n&&n.call(l,e)},l.onload=function(){c(a,i);var t={originalWidth:l.naturalWidth||l.width,originalHeight:l.naturalHeight||l.height};try{u.transform(l,i,m,e,t)}catch(o){n&&n(o)}},"string"===typeof e?(u.requiresMetaData(i)?u.fetchBlob(e,h,i):h(),l):d("Blob",e)||d("File",e)?(a=s(e),a?(l.src=a,l):r(e,(function(e){l.src=e}),n)):void 0}return o.Promise&&"function"!==typeof t?(i=t,new Promise(n)):n(t,t)}u.requiresMetaData=function(e){return e&&e.meta},u.fetchBlob=function(e,t){t()},u.transform=function(e,t,i,n,o){i(e,o)},u.global=o,u.readFile=r,u.isInstanceOf=d,u.createObjectURL=s,u.revokeObjectURL=l,n=function(){return u}.call(t,i,t,e),void 0===n||(e.exports=n)})("undefined"!==typeof window&&window||this)},"16c7":function(e,t,i){"use strict";i("1988")},1784:function(e,t,i){"use strict";i("5319");var n=i("4b44"),o=i("1786");const a={class:"columns is-multiline"},s={class:"column is-narrow"},l={class:"label"},c={class:"column is-narrow"},r={class:"columns is-multiline"};function d(e,t,i,n,d,u){const m=Object(o["resolveComponent"])("marker-helper"),h=Object(o["resolveComponent"])("form-input"),f=Object(o["resolveComponent"])("document-card"),p=Object(o["resolveFilter"])("uppercaseFirstLetter");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",s,[Object(o["createVNode"])("label",l,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(p(i.label||e.$gettext(e.field.name)))+" ",1),Object(o["createVNode"])(m,{name:i.helper?i.helper:e.field.helper},null,8,["name"])])]),Object(o["createVNode"])("div",c,[Object(o["createVNode"])(h,{class:"is-expanded",ref:"input",document:e.document,field:e.field},null,8,["document","field"])])]),Object(o["createVNode"])("div",r,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.document.associations[e.field.name],t=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t.document_id,class:"column is-4"},[Object(o["createVNode"])(f,{document:t,"show-delete-button":u.showDeleteButton(t),onDelete:i=>e.$documentUtils.removeAssociation(e.document,t),target:"_blank"},null,8,["document","show-delete-button","onDelete"])]))),128))])])}const u=Object(o["createVNode"])("option",{value:null},null,-1),m={key:12,class:"notification is-danger"};function h(e,t,i,n,a,s){const l=Object(o["resolveComponent"])("input-activity"),c=Object(o["resolveComponent"])("input-event-activity"),r=Object(o["resolveComponent"])("input-orientation"),d=Object(o["resolveComponent"])("input-conditions-levels"),h=Object(o["resolveComponent"])("input-markdown"),f=Object(o["resolveComponent"])("input-document"),p=Object(o["resolveComponent"])("input-multi-select"),b=Object(o["resolveComponent"])("input-date"),g=Object(o["resolveComponent"])("input-simple"),v=Object(o["resolveComponent"])("input-yes-no"),O=Object(o["resolveComponent"])("input-datetime");return"activities"==e.field.name?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,"has-error":s.hasError,"show-labels":"","document-type":e.document.type,modelValue:e.document.activities,"onUpdate:modelValue":t[1]||(t[1]=t=>e.document.activities=t)},null,8,["has-error","document-type","modelValue"])),[[o["vShow"],s.visible]]):"event_activity"==e.field.name?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:1,"has-error":s.hasError,"show-labels":"",modelValue:e.document.event_activity,"onUpdate:modelValue":t[2]||(t[2]=t=>e.document.event_activity=t)},null,8,["has-error","modelValue"])),[[o["vShow"],s.visible]]):"orientations"==e.field.name?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:2,modelValue:e.document.orientations,"onUpdate:modelValue":t[3]||(t[3]=t=>e.document.orientations=t)},null,8,["modelValue"])),[[o["vShow"],s.visible]]):"main_waypoint_id"==e.field.name?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:3,class:["control select",{"is-danger":s.hasError}]},[Object(o["withDirectives"])(Object(o["createVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.document.main_waypoint_id=t)},[u,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.document.associations.waypoints,t=>(Object(o["openBlock"])(),Object(o["createBlock"])("option",{key:t.document_id,value:t.document_id},Object(o["toDisplayString"])(e.$documentUtils.getDocumentTitle(t)),9,["value"]))),128))],512),[[o["vModelSelect"],e.document.main_waypoint_id]])],2)):"conditions_levels"==e.field.name?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:4,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[5]||(t[5]=t=>s.object[e.field.name]=t)},null,8,["modelValue"])):"markdown"==e.field.type?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:5,placeholder:i.placeholder,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[6]||(t[6]=t=>s.object[e.field.name]=t)},null,8,["placeholder","modelValue"])),[[o["vShow"],s.visible]]):"associations"==e.field.parent?(Object(o["openBlock"])(),Object(o["createBlock"])(f,{key:6,"document-type":e.field.documentType,multiple:"","clear-input-on-toggle":"","has-error":s.hasError,onAdd:t[7]||(t[7]=t=>e.$documentUtils.propagateProperties(e.document,arguments[0])),modelValue:s.object[e.field.name],"onUpdate:modelValue":t[8]||(t[8]=t=>s.object[e.field.name]=t)},null,8,["document-type","has-error","modelValue"])):e.field.values&&e.field.multiple?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:7,options:e.field.values,required:e.field.required,i18n:e.field.i18n,"i18n-context":e.field.i18nContext,"has-error":s.hasError,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[9]||(t[9]=t=>s.object[e.field.name]=t)},null,8,["options","required","i18n","i18n-context","has-error","modelValue"])),[[o["vShow"],s.visible]]):"date"===e.field.type?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:8,"has-error":s.hasError,"disabled-dates":s.disabledDates,required:e.field.required,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[10]||(t[10]=t=>s.object[e.field.name]=t)},null,8,["has-error","disabled-dates","required","modelValue"])):s.simpleInputType?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:9,ref:"input",prefix:i.prefix,onClickPrefix:t[11]||(t[11]=t=>e.$emit("click-prefix")),"is-expanded":i.isExpanded,postfix:i.unit||e.field.unit,divisor:i.divisor,type:e.field.type,min:i.min||e.field.min,max:i.max||e.field.max,disabled:e.field.disabled,placeholder:i.placeholder||e.$gettext(e.field.name),required:e.field.required,i18n:e.field.i18n,"i18n-context":e.field.i18nContext,options:e.field.values,"has-error":s.hasError,onInput:t[12]||(t[12]=t=>e.$emit("input",arguments[0])),modelValue:s.object[e.field.name],"onUpdate:modelValue":t[13]||(t[13]=t=>s.object[e.field.name]=t)},null,8,["prefix","is-expanded","postfix","divisor","type","min","max","disabled","placeholder","required","i18n","i18n-context","options","has-error","modelValue"])),[[o["vShow"],s.visible]]):"boolean"==e.field.type?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:10,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[14]||(t[14]=t=>s.object[e.field.name]=t),nullable:e.field.nullable},null,8,["modelValue","nullable"])),[[o["vShow"],s.visible]]):"date_time"==e.field.type?Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:11,modelValue:s.object[e.field.name],"onUpdate:modelValue":t[15]||(t[15]=t=>s.object[e.field.name]=t)},null,8,["modelValue"])),[[o["vShow"],s.visible]]):(Object(o["openBlock"])(),Object(o["createBlock"])("div",m," Unknown field type : "+Object(o["toDisplayString"])(e.field.type),1))}var f=i("fd3a"),p=i("fe1f"),b=i("8c86");function g(e,t){Object(b["a"])(2,arguments);var i=Object(f["a"])(e),n=Object(p["a"])(t);return isNaN(n)?new Date(NaN):n?(i.setDate(i.getDate()+n),i):i}const v=Object(o["withScopeId"])("data-v-7169bd50");Object(o["pushScopeId"])("data-v-7169bd50");const O={class:"content"},j=Object(o["createTextVNode"])("Location / elevation / orientation"),y=Object(o["createTextVNode"])("soft snow"),V=Object(o["createTextVNode"])("total snow"),w=Object(o["createTextVNode"])("comment"),N=Object(o["createVNode"])("th",null,null,-1);Object(o["popScopeId"])();const _=v((e,t,i,n,a,s)=>{const l=Object(o["resolveComponent"])("delete-button"),c=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",O,[Object(o["createVNode"])("table",null,[Object(o["createVNode"])("tr",null,[Object(o["withDirectives"])(Object(o["createVNode"])("th",null,[j],512),[[c]]),Object(o["withDirectives"])(Object(o["createVNode"])("th",null,[y],512),[[c]]),Object(o["withDirectives"])(Object(o["createVNode"])("th",null,[V],512),[[c]]),Object(o["withDirectives"])(Object(o["createVNode"])("th",null,[w],512),[[c]]),N]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(a.levels,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t},[Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.level_place=t},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.level_place,void 0,{lazy:!0}]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.level_snow_height_soft=t},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.level_snow_height_soft,void 0,{lazy:!0}]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.level_snow_height_total=t},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.level_snow_height_total,void 0,{lazy:!0}]])]),Object(o["createVNode"])("td",null,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.level_comment=t},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.level_comment,void 0,{lazy:!0}]])]),Object(o["createVNode"])("td",null,[t<a.levels.length-1||s.isLevelFilled(a.levels[t])?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,class:"is-size-2 delete-button",onClick:e=>a.levels.splice(t,1)},null,8,["onClick"])):Object(o["createCommentVNode"])("",!0)])]))),128))])])});var k={props:{value:{type:String,default:null}},data(){return{levels:[]}},watch:{levels:{handler:"change",deep:!0}},created(){const e=this.value?JSON.parse(this.value):[];for(const t of e)this.isLevelFilled(t)&&this.levels.push(t);this.levels.push({})},methods:{change(){this.isLevelFilled(this.levels[this.levels.length-1])&&this.levels.push({}),this.$emit("input",JSON.stringify(this.levels.filter(e=>this.isLevelFilled(e))))},isLevelFilled(e){return Boolean(e.level_place)||Boolean(e.level_snow_height_soft)||Boolean(e.level_snow_height_total)||Boolean(e.level_comment)}}};i("16c7");k.render=_,k.__scopeId="data-v-7169bd50";var D=k,x=i("a50d"),A={components:{InputConditionsLevels:D},mixins:[x["c"],x["a"]],props:{prefix:{type:String,default:null},isExpanded:{type:Boolean,default:null},placeholder:{type:String,default:void 0},min:{type:String,default:void 0},max:{type:String,default:void 0},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0}},computed:{disabledDates(){const e=this.min||this.field.min,t=this.max||this.field.max;return{to:e?Object(f["a"])(this.$dateUtils.parseDate(e)):void 0,from:t?Object(f["a"])(g(this.$dateUtils.parseDate(t),1)):void 0}},editedLocale(){return this.document.locales[0]},object(){if("document"===this.field.parent)return this.document;if("locales"===this.field.parent)return this.editedLocale;if("associations"===this.field.parent)return this.document.associations;throw new Error("Unexpected parent value : "+this.field.parent)},visible(){return this.field.isVisibleFor(this.document)},simpleInputType(){return["text","number","url","tel"].includes(this.field.type)},hasError(){return null!==this.field.error}}};A.render=h;var C=A,B=i("598ba"),S={components:{FormInput:C},mixins:[x["c"],x["a"],B["a"]],props:{label:{type:String,default:null},helper:{type:String,default:void 0}},computed:{visible(){return this.$refs.input.visible},hasError(){return null!==this.field.error}},methods:{showDeleteButton(e){return this.canRemove(this.document,e)}}};S.render=d;var T=S;const E=Object(o["withScopeId"])("data-v-155aff63");Object(o["pushScopeId"])("data-v-155aff63");const M={class:"has-edition-width"},I={class:"title is-1"},$={key:0},P={class:"is-size-5"},F={key:1},U={slot:"button",class:"button"},R=Object(o["createVNode"])("span",null," ",-1),L=Object(o["createTextVNode"])("Back to edit mode"),Y=Object(o["createVNode"])("span",null," ",-1),q=Object(o["createTextVNode"])("Preview"),H=Object(o["createVNode"])("div",{style:{clear:"both"}},null,-1),G={class:"has-edition-width"},W=Object(o["createVNode"])("hr",null,null,-1),Q=Object(o["createTextVNode"])(" ... ");Object(o["popScopeId"])();const z=E((e,t,i,n,a,s)=>{const l=Object(o["resolveComponent"])("icon-edit"),c=Object(o["resolveComponent"])("html-header"),r=Object(o["resolveComponent"])("document-title"),d=Object(o["resolveComponent"])("fa-icon"),u=Object(o["resolveComponent"])("dropdown-button"),m=Object(o["resolveComponent"])("save-document-row"),h=Object(o["resolveDirective"])("translate"),f=Object(o["resolveFilter"])("uppercaseFirstLetter");return i.document?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:["section",{preview:a.isPreview}]},[Object(o["createVNode"])("div",M,[Object(o["createVNode"])("h1",I,[Object(o["createVNode"])(l),"edit"===i.mode?(Object(o["openBlock"])(),Object(o["createBlock"])("span",$,[Object(o["createVNode"])(c,{title:e.$gettext("Edit a document")},null,8,["title"]),Object(o["createVNode"])(r,{document:i.document},null,8,["document"]),Object(o["createVNode"])("span",P," ("+Object(o["toDisplayString"])(e.$language.available[e.$route.params.lang])+")",1)])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",F,[Object(o["createVNode"])(c,{title:e.$documentUtils.getCreationTitle(s.documentType)},null,8,["title"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(f(e.$documentUtils.getCreationTitle(s.documentType)))+" ",1),Object(o["createVNode"])("span",null,[Object(o["createVNode"])(u,null,{default:E(()=>[Object(o["createVNode"])("span",U,[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(e.$language.available[i.document.locales[0].lang])+"  ",1),Object(o["createVNode"])(d,{icon:"angle-down","aria-hidden":"true"})]),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.$options.constants.langs,t=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t,class:"dropdown-item has-hover-background has-cursor-pointer",onClick:e=>i.document.locales[0].lang=t},Object(o["toDisplayString"])(e.$language.available[t]),9,["onClick"]))),128))],void 0,!0),_:1})])])),Object(o["createVNode"])("button",{class:"button is-size-6 is-pulled-right",onClick:t[1]||(t[1]=e=>a.isPreview=!a.isPreview)},[Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Object(o["createVNode"])(d,{icon:"edit"}),R,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[L],512),[[h]])],512),[[o["vShow"],a.isPreview]]),Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[Object(o["createVNode"])(d,{icon:"eye"}),Y,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[q],512),[[h]])],512),[[o["vShow"],!a.isPreview]])])]),H]),a.isPreview?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(s.documentType+"-view"),{key:0,draft:i.document},null,8,["draft"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])("div",G,[W,Object(o["renderSlot"])(e.$slots,"default",{},()=>[Q],{},!0),Object(o["createVNode"])(m,{onSave:t[2]||(t[2]=t=>e.$emit("save",arguments[0])),onPreview:t[3]||(t[3]=e=>a.isPreview=!0),"is-loading":i.isLoading},null,8,["is-loading"]),s.htmlBanners&&s.htmlBanners[s.documentType]?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,innerHTML:s.htmlBanners[s.documentType],class:"edition-banner"},null,8,["innerHTML"])):Object(o["createCommentVNode"])("",!0)],512),[[o["vShow"],!a.isPreview]])],2)):Object(o["createCommentVNode"])("",!0)}),J={class:"field is-horizontal"},X={class:"field-label is-normal"},K={class:"label"},Z={class:"field-body"};function ee(e,t,i,n,a,s){const l=Object(o["resolveComponent"])("marker-helper"),c=Object(o["resolveFilter"])("uppercaseFirstLetter");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",J,[Object(o["createVNode"])("div",X,[Object(o["createVNode"])("label",K,[Object(o["createVNode"])(l,{name:i.helper},null,8,["name"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(c(i.label)),1)])]),Object(o["createVNode"])("div",Z,[Object(o["createVNode"])("div",{class:["field",{"is-grouped is-grouped-multiline":i.isGrouped,"is-expanded":i.isExpanded,"is-narrow":i.isNarrow}]},[Object(o["renderSlot"])(e.$slots,"default")],2)])],512)),[[o["vShow"],a.visible]])}var te={props:{label:{type:String,default:""},alwaysVisible:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1},isExpanded:{type:Boolean,default:!1},isNarrow:{type:Boolean,default:!1},helper:{type:String,default:void 0}},data(){return{visible:!0,hasError:!1}},mounted(){for(const e of this.$children)e.$watch("visible",this.checkVisibility),e.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError()},methods:{checkVisibility(){this.visible=this.alwaysVisible;for(const t of this.$children){var e;if(t.visible)this.visible=null===(e=this.visible)||void 0===e||e}},checkHasError(){this.hasError=!1;for(const e of this.$children)!0===e.hasError&&(this.hasError=!0)}}};te.render=ee;var ie=te;const ne={class:"columns is-mobile is-multiline"},oe={class:"column is-narrow"},ae={class:"control"},se=Object(o["createTextVNode"])(" Save "),le={class:"column is-narrow"},ce=Object(o["createVNode"])("span",null," ",-1),re=Object(o["createTextVNode"])("Preview"),de={class:"column is-12-mobile"},ue={class:"control is-expanded"};function me(e,t,i,n,a,s){const l=Object(o["resolveComponent"])("fa-icon"),c=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",ne,[Object(o["createVNode"])("div",oe,[Object(o["createVNode"])("div",ae,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:["button is-primary",{"is-loading":i.isLoading}],onClick:t[1]||(t[1]=t=>e.$emit("save",a.comment))},[se],2),[[c]])])]),Object(o["createVNode"])("div",le,[Object(o["createVNode"])("button",{class:"button",onClick:t[2]||(t[2]=t=>e.$emit("preview"))},[Object(o["createVNode"])(l,{icon:"eye"}),ce,Object(o["withDirectives"])(Object(o["createVNode"])("span",null,[re],512),[[c]])])]),Object(o["createVNode"])("div",de,[Object(o["createVNode"])("div",ue,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.comment=e),type:"text",class:"input",disabled:"edit"!==s.mode,placeholder:e.$gettext("comment")},null,8,["disabled","placeholder"]),[[o["vModelText"],a.comment]])])])])}var he={props:{isLoading:{type:Boolean,required:!0}},data(){return{comment:""}},computed:{mode(){return this.$route.name.split("-")[1]}}};he.render=me;var fe=he,pe=i("188b"),be=i("25c4"),ge=i("9f3f"),ve=i("9b99"),Oe=i("62d5"),je=i("4947"),ye=i("b32b"),Ve=i("e78b"),we=i("cece"),Ne=i("d83c"),_e=i("a790"),ke=i("d1c3");const De=1110927;let xe={initialized:!1};var Ae={components:{FormRow:ie,AreaView:ge["a"],ArticleView:ve["a"],BookView:Oe["a"],ImageView:je["a"],MapView:ye["a"],OutingView:Ve["a"],ProfileView:we["a"],RouteView:Ne["a"],WaypointView:_e["a"],XreportView:ke["a"],SaveDocumentRow:fe},props:{document:{type:Object,default:null},mode:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data(){return{isPreview:!1}},constants:be["a"],computed:{documentType(){return this.$documentUtils.getDocumentType(this.document.type)},htmlBanners(){return xe}},watch:{$route:"reset"},mounted(){xe.initialized||pe["a"].article.getCooked(De,this.$language.current).then(this.computeBanners)},methods:{reset(){this.isPreview=!1},computeBanners(e){const t=e.data.cooked,i=document.createElement("div");let n;i.innerHTML=t.description,xe={initialized:!0,undefined:""};for(const o of i.children){const e=o.nodeName.match(/^[hH]3$/);e?(n=o.id,xe[n]=""):xe[n]+=o.outerHTML}this.$forceUpdate()}}};i("5dab");Ae.render=z,Ae.__scopeId="data-v-155aff63";var Ce=Ae;const Be={class:"field"},Se={class:"label"},Te={key:0,class:"has-text-danger"};function Ee(e,t,i,n,a,s){const l=Object(o["resolveComponent"])("marker-helper"),c=Object(o["resolveComponent"])("form-input"),r=Object(o["resolveFilter"])("uppercaseFirstLetter");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:i.noWrapper?"":"column"},[Object(o["createVNode"])("div",Be,[Object(o["createVNode"])("label",Se,[Object(o["createVNode"])(l,{name:i.helper||e.field.helper},null,8,["name"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(r(i.label||s.fieldLabel))+" ",1),s.hasError?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Te,Object(o["toDisplayString"])(r(s.errorMessage)),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(c,{ref:"input",document:e.document,field:e.field,helper:null,placeholder:i.placeholder,unit:i.unit,divisor:i.divisor,"is-expanded":i.isExpanded},null,8,["document","field","placeholder","unit","divisor","is-expanded"])])],2)),[[o["vShow"],a.visible]])}var Me={components:{FormInput:C},mixins:[x["c"],x["a"]],props:{isExpanded:{type:Boolean,default:!1},helper:{type:String,default:void 0},label:{type:String,default:void 0},context:{type:String,default:null},placeholder:{type:String,default:" "},unit:{type:String,default:void 0},divisor:{type:Number,default:void 0},noWrapper:{type:Boolean,default:!1}},data(){return{visible:!0}},computed:{hasError(){return null!==this.field.error},errorMessage(){return this.hasError?this.$gettext(this.field.error.description):null},fieldLabel(){return this.$gettext(this.field.name,this.context)}},mounted(){this.$refs.input.$watch("visible",()=>{this.visible=this.$refs.input.visible}),this.visible=this.$refs.input.visible}};Me.render=Ee;var Ie=Me;const $e=Object(o["withScopeId"])("data-v-0aff8176");Object(o["pushScopeId"])("data-v-0aff8176");const Pe={class:"section-item"},Fe={class:"columns is-mobile section-header"},Ue={class:"column"},Re={key:0},Le={class:"column is-narrow"},Ye={ref:"content",class:"section-content section-content-hidden"},qe=Object(o["createVNode"])("hr",null,null,-1);Object(o["popScopeId"])();const He=$e((e,t,i,n,a,s)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])("div",Pe,[Object(o["createVNode"])("div",Fe,[Object(o["createVNode"])("div",Ue,[Object(o["createVNode"])("h2",{class:["title is-2",{"has-text-danger":a.hasError}]},Object(o["toDisplayString"])(i.title),3),i.subTitle?(Object(o["openBlock"])(),Object(o["createBlock"])("p",Re,[Object(o["createVNode"])("em",null,Object(o["toDisplayString"])(i.subTitle),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",Le,[Object(o["createVNode"])("button",{class:"button is-info",onClick:t[1]||(t[1]=(...e)=>s.toggleExpandedState&&s.toggleExpandedState(...e))},Object(o["toDisplayString"])(a.expanded_?e.$gettext("Collapse"):e.$gettext("Expand")),1)])]),Object(o["createVNode"])("div",Ye,[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)],512),qe],512)),[[o["vShow"],a.visible]]));var Ge={props:{title:{type:String,required:!0},subTitle:{type:String,default:void 0},expandedOnLoad:{type:Boolean,default:!1}},data(){return{expanded_:!1,style:null,visible:!0,hasError:!1}},mounted(){this.style=document.createElement("style"),this.style.type="text/css",document.getElementsByTagName("head")[0].appendChild(this.style);for(const e of this.$children)e.$watch("visible",this.checkVisibility),e.$watch("hasError",this.checkHasError);this.checkVisibility(),this.checkHasError(),window.addEventListener("keyup",this.onKeyup),this.expandedOnLoad&&this.toggleExpandedState()},beforeDestroy(){window.removeEventListener("keyup",this.onKeyup)},methods:{toggleExpandedState(){const e=this.$refs.content,t="section-content-expanded"+this._uid;this.expanded_?(this.style.innerHTML=`.${t} { max-height: ${e.clientHeight}px!important; }`,e.classList.add(t),setTimeout(()=>{e.classList.add("section-content-hidden"),e.classList.remove(t)},0)):(this.style.innerHTML=`.${t} { max-height: ${e.scrollHeight}px!important; }`,e.classList.remove("section-content-hidden"),e.classList.add(t),setTimeout(()=>{e.classList.remove(t)},301)),this.expanded_=!this.expanded_},onKeyup(e){e.altKey&&e.shiftKey&&("ArrowUp"===e.key&&this.expanded_?this.toggleExpandedState():"ArrowDown"!==e.key||this.expanded_||this.toggleExpandedState())},checkVisibility(){this.visible=!1;for(const e of this.$children)if(e.visible)return void(this.visible=!0)},checkHasError(){this.hasError=!1;for(const e of this.$children)!0===e.hasError&&(this.hasError=!0)}}};i("05c6");Ge.render=He,Ge.__scopeId="data-v-0aff8176";var We=Ge;const Qe=Object(o["withScopeId"])("data-v-83b7acaa");Object(o["pushScopeId"])("data-v-83b7acaa");const ze={key:0,class:"columns is-mobile"},Je={class:"column is-narrow"},Xe={class:"control upload-button"},Ke=Object(o["createTextVNode"])(" Upload a GPS track "),Ze={class:"column"},et=Object(o["createTextVNode"])(" You may also drag, draw or edit the track on the map. "),tt={class:"columns is-multiline"},it={class:"column is-12 map-container"},nt={class:"column is-6 is-hidden"},ot={class:"field"},at={class:"label"},st={class:"column is-6 is-hidden"},lt={class:"field"},ct={class:"label"};Object(o["popScopeId"])();const rt=Qe((e,t,i,n,a,s)=>{const l=Object(o["resolveComponent"])("map-view"),c=Object(o["resolveComponent"])("input-simple"),r=Object(o["resolveDirective"])("translate");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[i.geomDetailEditable?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ze,[Object(o["createVNode"])("div",Je,[Object(o["createVNode"])("div",Xe,[Object(o["createVNode"])("input",{ref:"geoFileInput",type:"file",onChange:t[1]||(t[1]=(...e)=>s.uploadGeoFile&&s.uploadGeoFile(...e)),accept:".gpx,.kml,.fit,application/gpx+xml,application/vnd.ant.fit,application/vnd.google-earth.kml+xml"},null,544),Object(o["withDirectives"])(Object(o["createVNode"])("button",{class:"button is-primary is-small",onClick:t[2]||(t[2]=t=>e.$refs.geoFileInput.click())},[Ke],512),[[r]])])]),Object(o["createVNode"])("div",Ze,[Object(o["withDirectives"])(Object(o["createVNode"])("em",null,[et],512),[[r]])])])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",tt,[Object(o["createVNode"])("div",it,[Object(o["createVNode"])(l,{ref:"map","initial-extent":i.initialExtent,documents:i.documents,"edited-document":e.document,"geom-detail-editable":i.geomDetailEditable,"show-center-on-geolocation":"","show-recenter-on":"",onMove:t[3]||(t[3]=t=>e.$emit("move",arguments[0]))},null,8,["initial-extent","documents","edited-document","geom-detail-editable"])]),Object(o["createVNode"])("div",nt,[Object(o["createVNode"])("div",ot,[Object(o["createVNode"])("label",at,Object(o["toDisplayString"])(e.$gettext("Longitude")),1),Object(o["createVNode"])(c,{type:"number",postfix:"°E",modelValue:a.longitude,"onUpdate:modelValue":t[4]||(t[4]=e=>a.longitude=e),onInput:s.setGeometryPoint},null,8,["modelValue","onInput"])])]),Object(o["createVNode"])("div",st,[Object(o["createVNode"])("div",lt,[Object(o["createVNode"])("label",ct,Object(o["toDisplayString"])(e.$gettext("Latitude")),1),Object(o["createVNode"])(c,{type:"number",postfix:"°N",modelValue:a.latitude,"onUpdate:modelValue":t[5]||(t[5]=e=>a.latitude=e),onInput:s.setGeometryPoint},null,8,["modelValue","onInput"])])])])])});var dt=i("dac7");const ut=new dt["a"].format.GeoJSON,mt="EPSG:4326",ht="EPSG:3857";var ft={mixins:[x["a"]],props:{geomDetailEditable:{type:Boolean,default:!1},documents:{type:Array,default:null},initialExtent:{type:Array,default:null}},data(){return{latitude:null,longitude:null}},computed:{hasError(){return!1},visible(){return!0}},watch:{"document.geometry.geom":{handler:"setLatitudeLongitude",immediate:!0}},methods:{uploadGeoFile(e){const t=new FileReader;t.onload=function(){this.$refs.map.setDocumentGeometryFromGeoFile(t.result)}.bind(this);const i=e.target.files[0];"application/vnd.ant.fit"===i.type||i.name.toLowerCase().endsWith(".fit")?t.readAsArrayBuffer(i):t.readAsText(i),this.$refs.geoFileInput.value=""},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const e=parseFloat(String(this.longitude).replace(",",".")),t=parseFloat(String(this.latitude).replace(",",".")),i=new dt["a"].geom.Point([e,t]);i.transform(mt,ht),this.document.geometry.geom=ut.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const e=ut.readGeometry(this.document.geometry.geom);e.transform(ht,mt);const t=e.getCoordinates();this.longitude=Math.round(1e6*t[0])/1e6,this.latitude=Math.round(1e6*t[1])/1e6},fitMapToDocuments(){return this.$refs.map.fitMapToDocuments(!0)}}};i("7119");ft.render=rt,ft.__scopeId="data-v-83b7acaa";var pt=ft;const bt=Object(o["withScopeId"])("data-v-162743a8");Object(o["pushScopeId"])("data-v-162743a8");const gt={class:"column"},vt={class:"field"},Ot={class:"label"},jt=Object(o["createTextVNode"])("   "),yt={class:"field quality-select-container"};Object(o["popScopeId"])();const Vt=bt((e,t,i,n,a,s)=>{const l=Object(o["resolveComponent"])("fa-icon"),c=Object(o["resolveComponent"])("input-simple"),r=Object(o["resolveFilter"])("uppercaseFirstLetter");return Object(o["openBlock"])(),Object(o["createBlock"])("div",gt,[Object(o["createVNode"])("div",vt,[Object(o["createVNode"])("label",Ot,[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(r(e.$gettext("quality"))),1),jt,s.isCollaborative?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:0,onClick:t[1]||(t[1]=e=>a.autoComputeQuality=!a.autoComputeQuality)},[Object(o["createVNode"])(l,{icon:a.autoComputeQuality?"lock":"unlock",class:"has-cursor-pointer"},null,8,["icon"])]))])]),Object(o["createVNode"])("div",yt,[a.autoComputeQuality&&!s.isCollaborative?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,options:e.$options.quality_types,i18n:"","i18n-context":"quality_types",value:a.computedQuality,disabled:""},null,8,["options","value"])):(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:1,options:e.$options.quality_types,i18n:"","i18n-context":"quality_types",required:"",modelValue:i.document.quality,"onUpdate:modelValue":t[2]||(t[2]=e=>i.document.quality=e)},null,8,["options","modelValue"]))])])});function wt(e){return e<1?"empty":e<2?"draft":e<3?"medium":"fine"}function Nt(e,t){for(const i of t)if(e.activities.includes(i))return!0;return!1}function _t(e,t){return e.geometry&&e.geometry.geom_detail||t.route_description}function kt(e,t){if(t.conditions)return!0;if(!t.conditions_levels)return!1;const i=JSON.parse(t.conditions_levels);return!(!i||0===i.length||!(i[0].level_place||i[0].level_comment||i[0].level_snow_height_total||i[0].level_snow_height_soft))}function Dt(e){return e.elevation_up_snow||e.elevation_down_snow||e.snow_quantity||e.snow_quality||e.length_total||e.glacier_rating}function xt(e,t){let i=0;return i+=e.geometry&&e.geometry.geom?1:0,i+=e.activities&&e.activities.length?.5:0,i+=e.categories&&e.categories.length?.5:0,i+=e.associations.waypoints.length||e.associations.routes.length?1:0,i+=t.title?1:0,i+=t.description?1:0,wt(i)}function At(e,t){const i=t.description||"";let n=0;return n+=e.associations.waypoints.length?1:0,n+=e.associations.images.length?1:0,n+=t.summary?1:0,n+=i?1:-1,n+=-1!==i.search(/(^|\n)##/g)?1:0,n+=-1!==i.search(/\[img=/g)?1:0,wt(n)}function Ct(e,t){function i(){let i=0;return i+=_t(e,t)?.5:0,i+=Dt(e)?.5:0,(e.access_condition&&"snowy"!==e.access_condition&&e.elevation_access||"snowy"===e.access_condition&&e.elevation_access&&t.access_comment)&&(i+=.5),i+="no"!==e.avalanche_signs&&t.avalanches?.5:0,i+=t.description?.5:0,i+=t.weather?.5:0,i+=e.condition_rating?.5:0,i=kt(e,t)?i+1:Math.min(i,2),i}function n(){let i=0;return i+=_t(e,t)?.5:0,i+=e.condition_rating?.5:0,i+=t.description?1:0,i+=t.timing?.5:0,i+=t.weather?.5:0,i=kt(e,t)?i+1.5:Math.min(i,2),i}function o(){let i=0;return i+=_t(e,t)?.5:0,i+=t.description?1:0,i+=t.timing?.5:0,i+=t.weather?.5:0,i=t.conditions?i+2:Math.min(i,2),i}let a=0,s=0,l=0;Nt(e,["skitouring","snowshoeing"])&&(a=i()),Nt(e,["snow_ice_mixed","ice_climbing","mountain_climbing"])&&(s=n()),Nt(e,["rock_climbing","hiking","mountain_biking","via_ferrata","paragliding","slacklining"])&&(l=o());const c=Math.max(a,s,l);return wt(c)}var Bt={props:{document:{type:Object,default:null}},data(){return{autoComputeQuality:!0,computedQuality:"empty"}},computed:{editedLocale(){return this.document?this.document.locales[0]:null},isCollaborative(){return!!["a","b","w","r","m"].includes(this.document.type)||!["u","o","x"].includes(this.document.type)&&(["i"].includes(this.document.type)?"collab"===this.document.image_type:!!["c"].includes(this.document.type)&&"collab"===this.document.article_type)}},watch:{document:{handler:"computeQuality",deep:!0,immediate:!0}},methods:{computeQuality(){if(!this.document)return null;"o"===this.document.type?this.computedQuality=Ct(this.document,this.editedLocale):"c"===this.document.type?this.computedQuality=At(this.document,this.editedLocale):"i"===this.document.type?this.computedQuality=xt(this.document,this.editedLocale):this.computedQuality=this.document.quality,"great"===this.document.quality&&(this.computedQuality="great")},beforeSave(){!this.isCollaborative&&this.autoComputeQuality&&(this.document.quality=this.computedQuality)}},quality_types:be["a"].quality_types};i("6413");Bt.render=Vt,Bt.__scopeId="data-v-162743a8";var St=Bt;const Tt=new dt["a"].format.GeoJSON,Et="EPSG:4326",Mt="EPSG:3857";t["a"]={components:{FormRow:ie,FormSection:We,FormField:Ie,QualityField:St,FormInput:C,MapInputRow:pt,EditionContainer:Ce,AssociationsInputRow:T},data(){return{promise:{},fields:null,saving:!1,modified:!1}},computed:{mode(){return this.$route.name.split("-")[1]},documentType(){return this.$route.name.replace(/-(edit|add)/,"")},documentId(){return this.$route.params.id},lang(){return this.$route.params.lang},document(){return this.promise.data},editedLocale(){return this.document?this.document.locales[0]:null}},watch:{$route:{handler:"load",immediate:!0},"document.geometry.geom":"setLatitudeLongitude"},mounted(){window.addEventListener("beforeunload",this.beforeUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteEnter(e,t,i){i(e=>{e.$user.isLogged||e.$router.push({name:"auth"})})},beforeRouteLeave(e,t,i){if(this.modified){const e=window.confirm(this.$gettext("Do you really want to leave? you have unsaved changes!"));e?i():i(!1)}else i()},methods:{load(){if(this.fields=be["a"].objectDefinitions[this.documentType].fields,this.cleanErrors(),this.latitude=null,this.longitude=null,this.$user.isLogged)if("edit"===this.mode)this.promise=pe["a"][this.documentType].get(this.documentId,this.lang).then(e=>{const t=e.data.locales;t.length||t.push(this.$documentUtils.buildLocale(this.documentType,this.lang)),this.afterLoad(e),this.modified=!0});else{const e=this.$documentUtils.buildDocument(this.documentType,this.lang);this.promise={data:null,loading:1};const t=()=>{this.promise.loading-=1,0===this.promise.loading&&(this.modified=!0,this.promise.data=e,this.afterLoad())};"outing"===this.documentType&&(this.promise.loading+=1,pe["a"].profile.get(this.$user.id).then(i=>{this.$documentUtils.addAssociation(e,i.data),t()}));for(const i of Object.keys(this.$route.query)){const n=this.$documentUtils.getDocumentType(i);if(n&&this.$route.query[i]){const o=String(this.$route.query[i]).split(",");for(const i of o)this.promise.loading+=1,pe["a"][n].get(i).then(i=>{this.$documentUtils.addAssociation(e,i.data),t()})}}this.$route.query.act&&(e.activities=this.$route.query.act.split(",")),t()}},setGeometryPoint(){if(null===this.latitude||null===this.longitude)return;const e=parseFloat(String(this.longitude).replace(",",".")),t=parseFloat(String(this.latitude).replace(",",".")),i=new dt["a"].geom.Point([e,t]);i.transform(Et,Mt),this.document.geometry.geom=Tt.writeGeometry(i)},setLatitudeLongitude(){if(!this.document||!this.document.geometry||!this.document.geometry.geom)return{};const e=Tt.readGeometry(this.document.geometry.geom);e.transform(Mt,Et);const t=e.getCoordinates();this.longitude=Math.round(1e6*t[0])/1e6,this.latitude=Math.round(1e6*t[1])/1e6},afterLoad(){},beforeSave(){},displayErrors(e){const t=this.getFieldsWithError(),i=e?"API message":void 0;if(0!==t.length){const e=t.map(e=>`${this.$gettext(e.name)} : ${this.$gettext(e.error.description,i)}`);return Object(n["toast"])({message:`<ul><li>${e.join("</li><li>")}</li></ul>`,type:"is-danger",position:"center"}),!0}return!1},save(e){if("eu"===this.lang&&!this.$user.isModerator)return void Object(n["toast"])({message:this.$gettext("Sorry, euskara lang has been frozen.\nWe're looking for a moderator, if you're interested, please contact board@camptocamp.org"),type:"is-danger",position:"center"});if(this.beforeSave(),this.computeErrors(),this.displayErrors(!1))return;let t;this.saving=!0,t="edit"===this.mode?pe["a"][this.documentType].save(this.document,e).then(()=>{this.modified=!1,this.goToDocument(this.document.document_id)}):pe["a"][this.documentType].create(this.document).then(e=>{this.modified=!1,this.goToDocument(e.data.document_id)}),t.catch(e=>{this.saving=!1;const t=e.response.data;this.dispatchErrors(t.errors)})},goToDocument(e){this.$router.push({name:this.documentType,params:{id:e,lang:this.lang}})},computeErrors(){for(const e of Object.values(this.fields))e.error=e.getError(this.document,this.editedLocale)},getFieldsWithError(){return Object.values(this.fields).filter(e=>null!==e.error)},dispatchErrors(e){this.cleanErrors();for(const t of e){const e=t.name.split(".");"locales"===e[0]?this.dispatchError(e[2],t):"associations"===e[0]?this.dispatchError(e[1],t):this.dispatchError(e[0],t)}this.displayErrors(!0)},dispatchError(e,t){void 0===this.fields[e]?Object(n["toast"])({message:this.$gettext(`${t.name}: ${t.description}`),type:"is-danger",position:"center"}):this.fields[e].error=t},cleanErrors(){for(const e of Object.values(this.fields))e.error=null},beforeUnload(e){this.modified&&(e.preventDefault(),e.returnValue="")}}}},1988:function(e,t,i){},"19d5":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a=Object(n["createVNode"])("hr",null,null,-1);function s(e,t,i,s,l,c){const r=Object(n["resolveComponent"])("form-field"),d=Object(n["resolveComponent"])("map-input-row"),u=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.activities},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.categories},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"])]),Object(n["createVNode"])(d,{document:e.document,ref:"map"},null,8,["document"]),a],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var l=i("1784"),c={mixins:[l["a"]],watch:{"document.geometry.geom":function(e,t){null===t&&null!==e&&this.$nextTick(()=>{this.$refs.map.fitMapToDocuments()})}}};c.render=s;t["default"]=c},"1c08":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a={class:"columns is-multiline"};function s(e,t,i,s,l,c){const r=Object(n["resolveComponent"])("form-field"),d=Object(n["resolveComponent"])("quality-field"),u=Object(n["resolveComponent"])("form-section"),m=Object(n["resolveComponent"])("associations-input-row"),h=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(h,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{title:e.$gettext("general informations"),"sub-title":e.$gettext("Title of the book, author, language and date of publication.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.activities},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.book_types},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.langs},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.author},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.editor},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.publication_date},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.nb_pages},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.isbn},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.url},null,8,["document","field"]),Object(n["createVNode"])(d,{class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(u,{title:e.$gettext("description"),"sub-title":e.$gettext("Book content")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",a,[Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(u,{title:e.$gettext("associations"),"sub-title":e.$gettext("Articles, waypoints or routes to be linked.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(m,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(m,{document:e.document,field:e.fields.waypoints},null,8,["document","field"]),Object(n["createVNode"])(m,{document:e.document,field:e.fields.routes},null,8,["document","field"])],void 0,!0),_:1},8,["title","sub-title"])],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var l=i("1784"),c={mixins:[l["a"]]};c.render=s;t["default"]=c},"1de6":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o=Object(n["withScopeId"])("data-v-0c9d5882");Object(n["pushScopeId"])("data-v-0c9d5882");const a={class:"section"},s={key:0,class:"table is-striped"},l=Object(n["createTextVNode"])("Created on"),c=Object(n["createTextVNode"])("Contributor"),r=Object(n["createTextVNode"])("Creation?"),d=Object(n["createTextVNode"])("Parent"),u=Object(n["createTextVNode"])("Child"),m=Object(n["createVNode"])("span",null," ",-1),h=Object(n["createVNode"])("span",null," ",-1);Object(n["popScopeId"])();const f=o((e,t,i,o,f,p)=>{const b=Object(n["resolveComponent"])("html-header"),g=Object(n["resolveComponent"])("association-history-pagination"),v=Object(n["resolveComponent"])("loading-notification"),O=Object(n["resolveComponent"])("contributor-link"),j=Object(n["resolveComponent"])("colored-icon-document"),y=Object(n["resolveComponent"])("document-link"),V=Object(n["resolveDirective"])("translate");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(b,{title:e.$gettext("Associations history")},null,8,["title"]),Object(n["createVNode"])(g,{count:p.results?p.results.count:0,limit:p.limit,offset:p.offset,"document-id":p.documentId,"user-id":p.userId},null,8,["count","limit","offset","document-id","user-id"]),Object(n["createVNode"])(v,{promise:f.promise},null,8,["promise"]),p.results?(Object(n["openBlock"])(),Object(n["createBlock"])("table",s,[Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[l],512),[[V]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[c],512),[[V]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[r],512),[[V]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[d],512),[[V]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[u],512),[[V]])])]),Object(n["createVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(p.results.associations,(t,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:i},[Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(e.$dateUtils.toTechnicalString(t.written_at)),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(O,{contributor:t.user},null,8,["contributor"])]),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(t.is_creation),1),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(j,{"document-type":e.$documentUtils.getDocumentType(t.parent_document.type)},null,8,["document-type"]),m,Object(n["createVNode"])(y,{document:t.parent_document},null,8,["document"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(j,{"document-type":e.$documentUtils.getDocumentType(t.child_document.type)},null,8,["document-type"]),h,Object(n["createVNode"])(y,{document:t.child_document},null,8,["document"])])]))),128))])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(g,{count:p.results?p.results.count:0,limit:p.limit,offset:p.offset,"document-id":p.documentId,"user-id":p.userId},null,8,["count","limit","offset","document-id","user-id"])])}),p=Object(n["createVNode"])("span",null,"(",-1),b=Object(n["createTextVNode"])(" newest "),g=Object(n["createVNode"])("span",null," | ",-1),v=Object(n["createTextVNode"])(" oldest "),O=Object(n["createVNode"])("span",null,") View : ",-1),j=Object(n["createVNode"])("span",null,"(",-1),y=Object(n["createVNode"])("span",null," | ",-1),V=Object(n["createVNode"])("span",null,")",-1);function w(e,t,i,o,a,s){const l=Object(n["resolveComponent"])("association-history-link");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[p,Object(n["createVNode"])(l,{disabled:0===s.offsetAsNumber,limit:i.limit,"user-id":i.userId,"document-id":i.documentId},{default:Object(n["withCtx"])(()=>[b],void 0,!0),_:1},8,["disabled","limit","user-id","document-id"]),g,Object(n["createVNode"])(l,{disabled:!i.count||s.offsetAsNumber>=i.count-s.limitAsNumber,limit:i.limit,offset:i.count-s.limitAsNumber,"user-id":i.userId,"document-id":i.documentId},{default:Object(n["withCtx"])(()=>[v],void 0,!0),_:1},8,["disabled","limit","offset","user-id","document-id"]),O,j,Object(n["createVNode"])(l,{disabled:0===s.offsetAsNumber,limit:i.limit,offset:Math.max(s.offsetAsNumber-s.limitAsNumber,0),"user-id":i.userId,"document-id":i.documentId},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" newer "+Object(n["toDisplayString"])(s.limitAsNumber),1)],void 0,!0),_:1},8,["disabled","limit","offset","user-id","document-id"]),y,Object(n["createVNode"])(l,{disabled:!i.count||s.offsetAsNumber+s.limitAsNumber>=i.count,limit:i.limit,offset:s.offsetAsNumber+s.limitAsNumber,"user-id":i.userId,"document-id":i.documentId},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" older "+Object(n["toDisplayString"])(s.limitAsNumber),1)],void 0,!0),_:1},8,["disabled","limit","offset","user-id","document-id"]),V])}var N={props:{count:{type:Number,required:!0},documentId:{type:Number,default:null},userId:{type:Number,default:null},limit:{type:Number,default:null},offset:{type:Number,default:null}},computed:{limitAsNumber(){var e;return null!==(e=this.limit)&&void 0!==e?e:50},offsetAsNumber(){var e;return null!==(e=this.offset)&&void 0!==e?e:0}}};N.render=w;var _=N,k=i("66ba"),D=i("188b"),x={components:{ColoredIconDocument:k["a"],AssociationHistoryPagination:_},data(){return{promise:{}}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},documentId(){return this.$route.query.d?parseInt(this.$route.query.d):null},offset(){return this.$route.query.offset?parseInt(this.$route.query.offset):null},limit(){return this.$route.query.limit?parseInt(this.$route.query.limit):null},results(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=D["a"].association.getHistory({documentId:this.documentId,userId:this.userId,limit:this.limit,offset:this.offset})}}};i("2db0");x.render=f,x.__scopeId="data-v-0c9d5882";t["default"]=x},"257e":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a=Object(n["createVNode"])("hr",null,null,-1);function s(e,t,i,s,l,c){const r=Object(n["resolveComponent"])("form-field"),d=Object(n["resolveComponent"])("quality-field"),u=Object(n["resolveComponent"])("associations-input-row"),m=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(m,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(r,{document:e.document,field:e.fields.title,"is-expanded":""},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-narrow",document:e.document,field:e.fields.article_type},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.activities},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-8",document:e.document,field:e.fields.categories},null,8,["document","field"]),Object(n["createVNode"])(d,{ref:"qualityField",class:"is-4",document:e.document},null,8,["document"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"])]),Object(n["createVNode"])(u,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(u,{document:e.document,field:e.fields.waypoints},null,8,["document","field"]),Object(n["createVNode"])(u,{document:e.document,field:e.fields.outings},null,8,["document","field"]),Object(n["createVNode"])(u,{document:e.document,field:e.fields.routes},null,8,["document","field"]),Object(n["createVNode"])(u,{document:e.document,field:e.fields.books},null,8,["document","field"]),a],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var l=i("1784"),c={mixins:[l["a"]],methods:{beforeSave(){this.$refs.qualityField.beforeSave()}}};c.render=s;t["default"]=c},"2db0":function(e,t,i){"use strict";i("7850")},"2ddf":function(e,t,i){},"428b":function(e,t,i){},"545b":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a={class:"columns is-multiline"},s={class:"columns is-multiline"},l={class:"columns is-multiline"},c={class:"columns is-multiline"},r={class:"columns is-multiline"};function d(e,t,i,d,u,m){const h=Object(n["resolveComponent"])("form-field"),f=Object(n["resolveComponent"])("associations-input-row"),p=Object(n["resolveComponent"])("form-section"),b=Object(n["resolveComponent"])("map-input-row"),g=Object(n["resolveComponent"])("quality-field"),v=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(v,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(p,{title:e.$gettext("General information"),"sub-title":e.$gettext("Report title, activity, linked routes or outings.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.event_activity},null,8,["document","field"])]),Object(n["createVNode"])(f,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(f,{document:e.document,field:e.fields.routes},null,8,["document","field"]),Object(n["createVNode"])(f,{document:e.document,field:e.fields.outings},null,8,["document","field"])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(p,{title:e.$gettext("Anonymity and confidentiality")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",a,[Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.anonymous},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.disable_comments},null,8,["document","field"])])],void 0,!0),_:1},8,["title"]),Object(n["createVNode"])(p,{title:e.$gettext("Geolocation"),"sub-title":e.$gettext("Precise location of the event.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",s,[Object(n["createVNode"])(h,{class:"is-3",document:e.document,field:e.fields.elevation},null,8,["document","field"])]),Object(n["createVNode"])(b,{document:e.document,ref:"map"},null,8,["document"])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(p,{title:e.$gettext("Participants and context"),"sub-title":e.$gettext("Details on participants and event context")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.date},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.nb_participants},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.event_type},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.nb_impacted},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.severity},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.rescue},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.avalanche_level},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.avalanche_slope},null,8,["document","field"])]),Object(n["createVNode"])("div",c,[Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.age},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.gender},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.author_status},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.autonomy},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.activity_rate},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.supervision},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.qualification},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-4",document:e.document,field:e.fields.previous_injuries},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(p,{title:e.$gettext("Narration"),"sub-title":e.$gettext("Open fields to deeply explain the event circumstances.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.description,placeholder:e.$gettext("Details of the actual outing and the incident. If you have already written up your outing, you only need to describe the incident, then link it to your outing report (after first uploading it)")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.place,placeholder:e.$gettext("Information on the location of the incident. Mark the location on the map above, even if you cannot do very accurately, (in which case give more details here). After completing the report, you can associate it to a route, a climbing site or an outing.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.route_study,placeholder:e.$gettext("Map, guidebook, known route, planning for a plan B, (re) evaluation of route during trip?")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.conditions,placeholder:e.$gettext("Describe the information gathered before the outing and how these evolved once on route: weather forecast, avalanche risk reports, amount of refreezing, condition of the snow/ice/rock, reports from the previous days, etc.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.training,placeholder:e.$gettext("Please describe your technical and experience level related to the chosen goal, your level of fitness, prior tiredness accumulated, acclimatization if in altitude, etc.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.motivations,placeholder:e.$gettext("Why did you choose this outing? When did you decide to engage. What influenced your decision (holiday time, long journey, hotel/hut bookings, time spent already in preparation, limited possibilities, etc.)?")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.group_management,placeholder:e.$gettext("Communication of the individual objectives and expectations, the thoughts and observations during the outing, discussions on new strategies, the way the group conducted itself and divided responsibilities, was the group used to working together, core aspirations, etc.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.risk,placeholder:e.$gettext("Have you (re)evaluated the risks at each change in the situation? What factors might have affected your awareness, such as tiredness, stress, relaxing having passed the main difficulties or on the descent, on a section reputed to be easy, presence of footprints or other people, complete confidence in the leader of the group, etc.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.time_management,placeholder:e.$gettext("Had a timetable for the route been foreseen? Did you maintain the schedule? Was time a factor in causing the incident?")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-12",document:e.document,field:e.fields.safety,placeholder:e.$gettext("Types of belay and protection used, verifications between climbers, snowpack stability tests, testing of avalanche transceivers, etc.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.reduce_impact},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.increase_impact},null,8,["document","field"]),Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.modifications,placeholder:e.$gettext("Has this experience changed your habits? Describe the lessons you have learned from this experience")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(h,{class:"is-6",document:e.document,field:e.fields.other_comments,placeholder:e.$gettext("Briefly describe any injuries. Comments that do not fit into any other fields can be entered here.")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(g,{class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"])],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var u=i("1784"),m={mixins:[u["a"]],watch:{"document.geometry.geom":function(e,t){null===t&&null!==e&&this.$nextTick(()=>{this.$refs.map.fitMapToDocuments()})}}};m.render=d;t["default"]=m},"5bf5":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns"},a={class:"columns is-multiline"},s=Object(n["createVNode"])("hr",null,null,-1);function l(e,t,i,l,c,r){const d=Object(n["resolveComponent"])("form-field"),u=Object(n["resolveComponent"])("map-input-row"),m=Object(n["resolveComponent"])("quality-field"),h=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(h,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(d,{document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])(d,{class:"is-narrow",document:e.document,field:e.fields.area_type},null,8,["document","field"])]),e.$user.isModerator?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,document:e.document,"geom-detail-editable":""},null,8,["document"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",a,[Object(n["createVNode"])(d,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(d,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"]),Object(n["createVNode"])(m,{class:"is-4",document:e.document},null,8,["document"])]),s],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var c=i("1784"),r={mixins:[c["a"]],methods:{beforeSave(){this.$user.isModerator||delete this.document.geometry}}};r.render=l;t["default"]=r},"5dab":function(e,t,i){"use strict";i("428b")},"5edb":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns"},a={class:"columns"},s={class:"columns"},l={class:"columns is-multiline"},c={class:"columns is-multiline"},r={class:"columns is-multiline"},d={class:"columns"},u={class:"columns is-multiline"},m={class:"columns is-multiline"},h={class:"columns is-multiline"},f={class:"columns is-multiline"},p={class:"columns is-multiline"};function b(e,t,i,b,g,v){const O=Object(n["resolveComponent"])("form-field"),j=Object(n["resolveComponent"])("map-input-row"),y=Object(n["resolveComponent"])("form-section"),V=Object(n["resolveComponent"])("quality-field"),w=Object(n["resolveComponent"])("associations-input-row"),N=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(N,{class:"edition-container",mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{title:e.$gettext("general informations"),"sub-title":e.$gettext("Waypoint's main properties"),"expanded-on-load":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(O,{class:"is-narrow",document:e.document,field:e.fields.waypoint_type},null,8,["document","field"]),Object(n["createVNode"])(O,{document:e.document,field:e.fields.title},null,8,["document","field"])]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.elevation},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.elevation_min},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.prominence},null,8,["document","field"])]),Object(n["createVNode"])(j,{document:e.document,ref:"map"},null,8,["document"]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])(O,{document:e.document,field:e.fields.maps_info,label:e.$gettext("maps_references"),placeholder:e.$gettext("Add here maps not automatically referenced")},null,8,["document","field","label","placeholder"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("Transport & road or PT access"),"sub-title":e.$gettext("Informations about the access")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.snow_clearance_rating},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.lift_access},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.public_transportation_rating},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.parking_fee},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-8",document:e.document,field:e.fields.public_transportation_types},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("Types and styles")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",c,[Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.climbing_outdoor_types},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.climbing_indoor_types},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.climbing_styles},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.rock_types},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.best_periods},null,8,["document","field"])]),Object(n["createVNode"])("div",r,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.orientations},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.access_time},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.rain_proof},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.children_proof},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.ground_types},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.product_types},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.slackline_types},null,8,["document","field"])])],void 0,!0),_:1},8,["title"]),Object(n["createVNode"])(y,{title:e.$gettext("Numbers"),"sub-title":e.$gettext("Misc data about the waypoint")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",d,[Object(n["createVNode"])(O,{document:e.document,field:e.fields.length},null,8,["document","field"]),Object(n["createVNode"])(O,{document:e.document,field:e.fields.slope},null,8,["document","field"])]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.custodianship},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.capacity_staffed},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.capacity,context:v.capacityContext},null,8,["document","field","context"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.url},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.phone},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.phone_custodian},null,8,["document","field"])]),Object(n["createVNode"])("div",m,[Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.matress_unstaffed},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.blanket_unstaffed},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.gas_unstaffed},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.heating_unstaffed},null,8,["document","field"])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.height_min},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.height_median},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.height_max},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.routes_quantity},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.slackline_length_max},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.slackline_length_min},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("ratings"),"sub-title":e.$gettext("Associated routes cotations")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",f,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.climbing_rating_min},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.climbing_rating_median},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.climbing_rating_max},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.equipment_ratings},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.paragliding_rating},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("Description"),"sub-title":e.$gettext("Waypoint's textual description")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",p,[Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.summary,placeholder:e.$gettext("write a summary")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.access_period,placeholder:e.accessPeriodPlaceholder,label:e.accessPeriodTitle},null,8,["document","field","placeholder","label"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.description,placeholder:e.descriptionPlaceholder},null,8,["document","field","placeholder"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.access,placeholder:e.accessPlaceholder,label:e.accessTitle},null,8,["document","field","placeholder","label"]),Object(n["createVNode"])(V,{class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("associations"),"sub-title":e.$gettext("You may add associated waypoints, books and articles")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(w,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(w,{document:e.document,field:e.fields.waypoints},null,8,["document","field"]),Object(n["createVNode"])(w,{document:e.document,field:e.fields.books},null,8,["document","field"])],void 0,!0),_:1},8,["title","sub-title"])],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var g=i("1784"),v=i("8a7f"),O={mixins:[g["a"],v["a"]],computed:{capacityContext(){return this.document&&"bivouac"===this.document.waypoint_type?this.document.waypoint_type:null}},watch:{"document.geometry.geom":function(e,t){null===t&&null!==e&&this.$nextTick(()=>{this.$refs.map.fitMapToDocuments()})}}};O.render=b;t["default"]=O},6375:function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-1"},a={class:"columns is-multiline"},s={class:"columns is-multiline"},l={class:"columns is-multiline"},c={class:"columns is-multiline"},r={class:"columns is-multiline"},d={class:"columns is-multiline"},u={class:"columns is-multiline"},m={class:"columns is-multiline"},h={class:"columns is-multiline"},f={class:"columns is-multiline"},p={class:"columns is-multiline"},b={class:"columns is-multiline"};function g(e,t,i,g,v,O){const j=Object(n["resolveComponent"])("form-field"),y=Object(n["resolveComponent"])("map-input-row"),V=Object(n["resolveComponent"])("associations-input-row"),w=Object(n["resolveComponent"])("form-section"),N=Object(n["resolveComponent"])("quality-field"),_=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(_,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(w,{title:e.$gettext("general informations"),"sub-title":e.$gettext("Main information about the route, such as title, activity, GPS, and waypoint (which mountain, place)."),"expanded-on-load":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(j,{class:"is-narrow",label:e.$gettext("waypoint"),document:e.document,field:e.fields.main_waypoint_id},null,8,["label","document","field"]),Object(n["createVNode"])(j,{document:e.document,field:e.fields.title},null,8,["document","field"])]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])(j,{class:"is-narrow",document:e.document,field:e.fields.climbing_outdoor_type},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.activities},null,8,["document","field"])]),Object(n["createVNode"])(y,{document:e.document,"geom-detail-editable":"",ref:"map"},null,8,["document"]),Object(n["createVNode"])(V,{document:e.document,field:e.fields.waypoints},null,8,["document","field"]),Object(n["createVNode"])(V,{document:e.document,field:e.fields.routes},null,8,["document","field"]),Object(n["createVNode"])(V,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(V,{document:e.document,field:e.fields.books},null,8,["document","field"]),Object(n["createVNode"])(V,{document:e.document,field:e.fields.xreports},null,8,["document","field"])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(w,{title:e.$gettext("configuration"),"sub-title":e.$gettext("Data like orientation, rock type, route type (such as return trip or loop) and route configuration type (such as ridge or gully).")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",s,[Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.orientations},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.route_types},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.configuration},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.rock_types},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(w,{title:e.$gettext("numbers"),"sub-title":e.$gettext("Information about the terrain, like elevations, lengths...")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.elevation_min},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.elevation_max},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.height_diff_up},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.height_diff_down},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.height_diff_access},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.height_diff_difficulties},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.difficulties_height},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.route_length,divisor:1e3,unit:"km"},null,8,["document","field"])]),Object(n["createVNode"])("div",c,[Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.mtb_length_asphalt,divisor:1e3,unit:"km"},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.mtb_length_trail,divisor:1e3,unit:"km"},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.mtb_height_diff_portages},null,8,["document","field"])]),Object(n["createVNode"])("div",r,[Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.lift_access},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.durations,label:e.$gettext("durations (days)")},null,8,["document","field","label"])]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.slackline_type},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-4",document:e.document,field:e.fields.slackline_height},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(w,{title:e.$gettext("ratings"),"sub-title":e.$gettext("Everything about ratings : difficulties, exposition...")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.global_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.rock_free_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.rock_required_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.aid_rating},null,8,["document","field"])]),Object(n["createVNode"])("div",m,[Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.labande_global_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.labande_ski_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.ski_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.ski_exposition},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.slope},null,8,["document","field"])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.ice_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.mixed_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.snowshoe_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.via_ferrata_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.hiking_rating},null,8,["document","field"])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(j,{document:e.document,field:e.fields.mtb_down_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{document:e.document,field:e.fields.mtb_up_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{document:e.document,field:e.fields.hiking_mtb_exposition},null,8,["document","field"])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.equipment_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.engagement_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.exposition_rock_rating},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-6",document:e.document,field:e.fields.risk_rating},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(w,{title:e.$gettext("Comments"),"sub-title":e.$gettext("This is where you may describe the route extensively, maybe starting with a brief summary and then developing the description (including approach, descent, etc.). Don't forget to mention the route history if you know it.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",b,[Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.route_history,placeholder:e.$gettext("Describe historical information about the route (date, names..) here")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.slackline_anchor1},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.slackline_anchor2},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.remarks},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.gear,placeholder:e.$gettext("Describe here the gear needed for this route")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.glacier_gear},null,8,["document","field"]),Object(n["createVNode"])(j,{class:"is-12",document:e.document,field:e.fields.external_resources,placeholder:e.$gettext("Books and websites not already associated to this route")},null,8,["document","field","placeholder"]),Object(n["createVNode"])(N,{class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"])],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var v=i("1784"),O={mixins:[v["a"]],watch:{"document.associations.waypoints":"onWaypointsAssociation","document.geometry.geom":"onGeometryUpdate","document.geometry.geom_detail":"onGeometryUpdate"},methods:{afterLoad(){"add"===this.mode&&this.$route.query.w&&(this.document.main_waypoint_id=parseInt(this.$route.query.w))},onGeometryUpdate(e,t){null===t&&null!==e&&this.$nextTick(()=>{this.$refs.map.fitMapToDocuments()})},onWaypointsAssociation(){const e=this.document.associations.waypoints;-1===e.findIndex(e=>e.document_id===this.document.main_waypoint_id)&&(this.document.main_waypoint_id=null),"add"===this.mode&&null===this.document.main_waypoint_id&&0!==e.length&&(this.document.main_waypoint_id=e[0].document_id)}}};O.render=g;t["default"]=O},6413:function(e,t,i){"use strict";i("d428")},6489:function(e,t,i){"use strict";i("eb5d")},"663f":function(e,t,i){},"66ba":function(e,t,i){"use strict";var n=i("1786");const o=Object(n["withScopeId"])("data-v-2201a3ce"),a=o((e,t,i,o,a,s)=>{const l=Object(n["resolveComponent"])("icon-document");return Object(n["openBlock"])(),Object(n["createBlock"])("span",{class:"icon icon-document-container",style:"background: "+(e.$options.colors[e.documentType]||"black")},[Object(n["createVNode"])(l,{"document-type":e.documentType,class:"has-text-light"},null,8,["document-type"])],4)});var s=i("a50d"),l={mixins:[s["b"]],colors:{area:"purple",book:"plum",article:"darkcyan",image:"pink",map:"yellow",outing:"grey",profile:"red",route:"dodgerblue",waypoint:"green",xreport:"tomato"}};i("e716");l.render=a,l.__scopeId="data-v-2201a3ce";t["a"]=l},7119:function(e,t,i){"use strict";i("2ddf")},"71a2":function(e,t,i){},7228:function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a=Object(n["createVNode"])("hr",null,null,-1);function s(e,t,i,s,l,c){const r=Object(n["resolveComponent"])("form-field"),d=Object(n["resolveComponent"])("edition-container");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(r,{class:"is-12",document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.editor},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.scale},null,8,["document","field"]),Object(n["createVNode"])(r,{class:"is-4",document:e.document,field:e.fields.code},null,8,["document","field"])]),a],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var l=i("1784"),c={mixins:[l["a"]]};c.render=s;t["default"]=c},7569:function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7"),i("77a1")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.ExifMap.prototype;t.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},t.tags.ifd1=t.tags,t.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},t.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},t.getAll=function(){var e,t,i,n={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this[e],t&&t.getAll?n[this.ifds[e].name]=t.getAll():(i=this.tags[e],i&&(n[i]=this.getText(i))));return n},t.getName=function(e){var t=this.tags[e];return"object"===typeof t?this.ifds[e].name:t},function(){var e,i,n,o=t.tags;for(e in o)if(Object.prototype.hasOwnProperty.call(o,e))if(i=t.ifds[e],i)for(e in n=o[e],n)Object.prototype.hasOwnProperty.call(n,e)&&(i.map[n[e]]=Number(e));else t.map[o[e]]=Number(e)}()}))},"77a1":function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7"),i("078b")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";function t(e){e&&(Object.defineProperty(this,"map",{value:this.ifds[e].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[e]||{}}))}function i(t,i,n){if(n){if(!(i+n>t.byteLength))return new Blob([e.bufferSlice.call(t.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}t.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},t.prototype.ifds={ifd1:{name:"Thumbnail",map:t.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(e){return this[e]||this[this.map[e]]};var n={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}};function o(e,t,i,o,a,s){var l,c,r,d,u,m,h=n[o];if(h){if(l=h.size*a,c=l>4?t+e.getUint32(i+8,s):i+8,!(c+l>e.byteLength)){if(1===a)return h.getValue(e,c,s);for(r=[],d=0;d<a;d+=1)r[d]=h.getValue(e,c+d*h.size,s);if(h.ascii){for(u="",d=0;d<r.length;d+=1){if(m=r[d],"\0"===m)break;u+=m}return u}return r}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function a(e,t,i){return(!e||e[i])&&(!t||!0!==t[i])}function s(e,t,i,n,s,l,c,r){var d,u,m,h,f,p;if(i+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(d=e.getUint16(i,n),u=i+2+12*d,!(u+4>e.byteLength)){for(m=0;m<d;m+=1)h=i+2+12*m,f=e.getUint16(h,n),a(c,r,f)&&(p=o(e,t,h,e.getUint16(h+2,n),e.getUint32(h+4,n),n),s[f]=p,l&&(l[f]=h));return e.getUint32(u,n)}console.log("Invalid Exif data: Invalid directory size.")}}function l(e,i,n,o,a,l,c){var r=e.exif[i];r&&(e.exif[i]=new t(i),e.exifOffsets&&(e.exifOffsets[i]=new t(i)),s(n,o,o+r,a,e.exif[i],e.exifOffsets&&e.exifOffsets[i],l&&l[i],c&&c[i]))}n[7]=n[1],e.parseExifData=function(e,n,o,c,r){if(!r.disableExif){var d,u,m,h=r.includeExifTags,f=r.excludeExifTags||{34665:{37500:!0}},p=n+10;if(1165519206===e.getUint32(n+4))if(p+8>e.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(n+8)){switch(e.getUint16(p)){case 18761:d=!0;break;case 19789:d=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(p+2,d)?(u=e.getUint32(p+4,d),c.exif=new t,r.disableExifOffsets||(c.exifOffsets=new t,c.exifTiffOffset=p,c.exifLittleEndian=d),u=s(e,p,p+u,d,c.exif,c.exifOffsets,h,f),u&&a(h,f,"ifd1")&&(c.exif.ifd1=u,c.exifOffsets&&(c.exifOffsets.ifd1=p+u)),Object.keys(c.exif.ifds).forEach((function(t){l(c,t,e,p,d,h,f)})),m=c.exif.ifd1,m&&m[513]&&(m[513]=i(e,p+m[513],m[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(e,t,i){var n=t.exifOffsets[274];if(!n)return e;var o=new DataView(e,n+8,2);return o.setUint16(0,i,t.exifLittleEndian),e}},e.writeExifData=function(t,i,n,o){return e.exifWriters[i.exif.map[n]](t,i,o)},e.ExifMap=t}))},7850:function(e,t,i){},"79ba":function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7"),i("a725"),i("078b")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.transform,i=e.requiresCanvas,n=e.requiresMetaData,o=e.transformCoordinates,a=e.getTransformedOptions;function s(t,i){var n=t&&t.orientation;return!0===n&&!e.orientation||1===n&&e.orientation||(!i||e.orientation)&&n>1&&n<9}function l(e,t){return e!==t&&(1===e&&t>1&&t<9||e>1&&e<9)}function c(e,t){if(t>1&&t<9)switch(e){case 2:case 4:return t>4;case 5:case 7:return t%2===0;case 6:case 8:return 2===t||4===t||5===t||7===t}return!1}(function(e){if(e.global.document){var t="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",i=document.createElement("img");i.onload=function(){if(e.orientation=2===i.width&&3===i.height,e.orientation){var t=e.createCanvas(1,1,!0),n=t.getContext("2d");n.drawImage(i,1,1,1,1,0,0,1,1),e.orientationCropBug="255,255,255,255"!==n.getImageData(0,0,1,1).data.toString()}},i.src=t}})(e),e.requiresCanvas=function(t){return s(t)||i.call(e,t)},e.requiresMetaData=function(t){return s(t,!0)||n.call(e,t)},e.transform=function(i,n,o,a,s){t.call(e,i,n,(function(t,i){if(i){var n=e.orientation&&i.exif&&i.exif.get("Orientation");if(n>4&&n<9){var a=i.originalWidth,s=i.originalHeight;i.originalWidth=s,i.originalHeight=a}}o(t,i)}),a,s)},e.getTransformedOptions=function(t,i,n){var o=a.call(e,t,i),s=n.exif&&n.exif.get("Orientation"),r=o.orientation,d=e.orientation&&s;if(!0===r&&(r=s),!l(r,d))return o;var u=o.top,m=o.right,h=o.bottom,f=o.left,p={};for(var b in o)Object.prototype.hasOwnProperty.call(o,b)&&(p[b]=o[b]);if(p.orientation=r,(r>4&&!(d>4)||r<5&&d>4)&&(p.maxWidth=o.maxHeight,p.maxHeight=o.maxWidth,p.minWidth=o.minHeight,p.minHeight=o.minWidth,p.sourceWidth=o.sourceHeight,p.sourceHeight=o.sourceWidth),d>1){switch(d){case 2:m=o.left,f=o.right;break;case 3:u=o.bottom,m=o.left,h=o.top,f=o.right;break;case 4:u=o.bottom,h=o.top;break;case 5:u=o.left,m=o.bottom,h=o.right,f=o.top;break;case 6:u=o.left,m=o.top,h=o.right,f=o.bottom;break;case 7:u=o.right,m=o.top,h=o.left,f=o.bottom;break;case 8:u=o.right,m=o.bottom,h=o.left,f=o.top;break}if(c(r,d)){var g=u,v=m;u=h,m=f,h=g,f=v}}switch(p.top=u,p.right=m,p.bottom=h,p.left=f,r){case 2:p.right=f,p.left=m;break;case 3:p.top=h,p.right=f,p.bottom=u,p.left=m;break;case 4:p.top=h,p.bottom=u;break;case 5:p.top=f,p.right=h,p.bottom=m,p.left=u;break;case 6:p.top=m,p.right=h,p.bottom=f,p.left=u;break;case 7:p.top=m,p.right=u,p.bottom=f,p.left=h;break;case 8:p.top=f,p.right=u,p.bottom=m,p.left=h;break}return p},e.transformCoordinates=function(t,i,n){o.call(e,t,i,n);var a=i.orientation,s=e.orientation&&n.exif&&n.exif.get("Orientation");if(l(a,s)){var r=t.getContext("2d"),d=t.width,u=t.height,m=d,h=u;switch((a>4&&!(s>4)||a<5&&s>4)&&(t.width=u,t.height=d),a>4&&(m=u,h=d),s){case 2:r.translate(m,0),r.scale(-1,1);break;case 3:r.translate(m,h),r.rotate(Math.PI);break;case 4:r.translate(0,h),r.scale(1,-1);break;case 5:r.rotate(-.5*Math.PI),r.scale(-1,1);break;case 6:r.rotate(-.5*Math.PI),r.translate(-m,0);break;case 7:r.rotate(-.5*Math.PI),r.translate(-m,h),r.scale(1,-1);break;case 8:r.rotate(.5*Math.PI),r.translate(0,-h);break}switch(c(a,s)&&(r.translate(m,h),r.rotate(Math.PI)),a){case 2:r.translate(d,0),r.scale(-1,1);break;case 3:r.translate(d,u),r.rotate(Math.PI);break;case 4:r.translate(0,u),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-u);break;case 7:r.rotate(.5*Math.PI),r.translate(d,-u),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-d,0);break}}}}))},8527:function(e,t,i){"use strict";i.r(t);var n=i("1786");const o=Object(n["withScopeId"])("data-v-f0dd7166");Object(n["pushScopeId"])("data-v-f0dd7166");const a={class:"section"},s={key:0},l={class:"title is-1"},c={class:"table is-striped"},r=Object(n["createVNode"])("th",null,null,-1),d=Object(n["createTextVNode"])("Created on"),u=Object(n["createTextVNode"])("contributor"),m=Object(n["createTextVNode"])("comment"),h={key:0,class:"control"};Object(n["popScopeId"])();const f=o((e,t,i,f,p,b)=>{const g=Object(n["resolveComponent"])("html-header"),v=Object(n["resolveComponent"])("loading-notification"),O=Object(n["resolveComponent"])("icon-document"),j=Object(n["resolveComponent"])("router-link"),y=Object(n["resolveComponent"])("history-view-links"),V=Object(n["resolveComponent"])("diff-link"),w=Object(n["resolveComponent"])("version-link"),N=Object(n["resolveComponent"])("contributor-link"),_=Object(n["resolveDirective"])("translate");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(g,{title:e.$gettext("Versions")},null,8,["title"]),Object(n["createVNode"])(v,{promise:p.promise},null,8,["promise"]),b.history?(Object(n["openBlock"])(),Object(n["createBlock"])("div",s,[Object(n["createVNode"])("h1",l,[Object(n["createVNode"])(O,{"document-type":b.documentType},null,8,["document-type"]),Object(n["createVNode"])(j,{to:{name:b.documentType,params:{id:b.documentId,lang:b.lang}}},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(b.history.title),1)],void 0,!0),_:1},8,["to"])]),Object(n["createVNode"])(y,{"document-id":b.documentId,"document-type":b.documentType,lang:b.lang,"version-from":p.versionFrom,"version-to":p.versionTo},null,8,["document-id","document-type","lang","version-from","version-to"]),Object(n["createVNode"])("table",c,[Object(n["createVNode"])("thead",null,[Object(n["createVNode"])("tr",null,[r,Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[d],512),[[_]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[u],512),[[_]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[m],512),[[_]])])]),Object(n["createVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(b.history.versions,i=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:i.version_id},[Object(n["createVNode"])("td",null,["profile"!=b.documentType?(Object(n["openBlock"])(),Object(n["createBlock"])("div",h,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.versionFrom=e),disabled:p.versionTo<=i.version_id,value:i.version_id,type:"radio",name:"versionFrom"},null,8,["disabled","value"]),[[n["vModelRadio"],p.versionFrom]]),Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.versionTo=e),disabled:p.versionFrom>=i.version_id,value:i.version_id,type:"radio",name:"versionTo"},null,8,["disabled","value"]),[[n["vModelRadio"],p.versionTo]]),i.version_id!==b.veryFirstVersionId?(Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:0,"document-type":b.documentType,id:b.documentId,lang:b.lang,"version-from":"prev","version-to":i.version_id},null,8,["document-type","id","lang","version-to"])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(w,{"document-type":b.documentType,id:b.documentId,version:i.version_id,lang:b.lang},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$dateUtils.toTechnicalString(i.written_at)),1)],void 0,!0),_:2},1032,["document-type","id","version","lang"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(N,{contributor:i},null,8,["contributor"])]),Object(n["createVNode"])("td",null,Object(n["toDisplayString"])(i.comment),1)]))),128))])]),Object(n["createVNode"])(y,{"document-id":b.documentId,"document-type":b.documentType,lang:b.lang,"version-from":p.versionFrom,"version-to":p.versionTo},null,8,["document-id","document-type","lang","version-from","version-to"])])):Object(n["createCommentVNode"])("",!0)])});i("5319");const p=Object(n["withScopeId"])("data-v-dc03affa");Object(n["pushScopeId"])("data-v-dc03affa");const b={class:"links"},g=Object(n["createTextVNode"])(" Compare selected versions "),v=Object(n["createTextVNode"])(" See the latest version "),O=Object(n["createTextVNode"])(" Associations history "),j=Object(n["createTextVNode"])(" List of versions for language: ");Object(n["popScopeId"])();const y=p((e,t,i,o,a,s)=>{const l=Object(n["resolveComponent"])("diff-link"),c=Object(n["resolveComponent"])("router-link"),r=Object(n["resolveComponent"])("association-history-link"),d=Object(n["resolveDirective"])("translate");return Object(n["openBlock"])(),Object(n["createBlock"])("div",b,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{"document-type":i.documentType,id:i.documentId,lang:i.lang,"version-from":i.versionFrom,"version-to":i.versionTo},{default:p(()=>[g],void 0,!0),_:1},8,["document-type","id","lang","version-from","version-to"]),[[d]]),Object(n["withDirectives"])(Object(n["createVNode"])(c,{to:{name:i.documentType,params:{id:i.documentId,lang:i.lang}}},{default:p(()=>[v],void 0,!0),_:1},8,["to"]),[[d]]),Object(n["withDirectives"])(Object(n["createVNode"])(r,{"document-id":i.documentId},{default:p(()=>[O],void 0,!0),_:1},8,["document-id"]),[[d]]),Object(n["createVNode"])("span",null,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[j],512),[[d]]),Object(n["createVNode"])("span",null,"  "+Object(n["toDisplayString"])(e.$gettext(i.lang,"langs")),1)])])});var V={props:{documentId:{type:Number,required:!0},documentType:{type:String,required:!0},lang:{type:String,required:!0},versionFrom:{type:Number,required:!0},versionTo:{type:Number,required:!0}}};i("9fcc");V.render=y,V.__scopeId="data-v-dc03affa";var w=V,N=i("188b"),_={components:{HistoryViewLinks:w},data(){return{promise:{},versionFrom:void 0,versionTo:void 0}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-history","")},lang(){return this.$route.params.lang},veryFirstVersionId(){return this.history.versions[this.history.versions.length-1].version_id},history(){return this.promise.data}},watch:{$route:{handler:"load",immediate:!0}},methods:{load(){this.promise=N["a"][this.documentType].getHistory(this.documentId,this.lang).then(e=>{const t=e.data.versions.reverse();e.data.versions=t,this.versionFrom=t[t.length>1?1:0].version_id,this.versionTo=t[0].version_id})}}};i("9636");_.render=f,_.__scopeId="data-v-f0dd7166";t["default"]=_},"85fb":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o=Object(n["withScopeId"])("data-v-2da04bb2");Object(n["pushScopeId"])("data-v-2da04bb2");const a={class:"section content"},s=Object(n["createVNode"])("span",null," ",-1),l=Object(n["createVNode"])("span",null,"diff",-1),c={class:"columns"},r={key:0,class:"column"},d=Object(n["createTextVNode"])("by "),u=Object(n["createTextVNode"])(" ← "),m=Object(n["createTextVNode"])("previous difference"),h={key:1},f=Object(n["createTextVNode"])(" This is the first version "),p={key:1,class:"column"},b=Object(n["createTextVNode"])("by "),g=Object(n["createTextVNode"])("next difference"),v=Object(n["createTextVNode"])(" → "),O={key:1},j=Object(n["createTextVNode"])(" This is the last version "),y={key:0},V={key:0},w={class:"columns"},N={class:"column"},_={class:"column"},k={key:1,class:"map-container"},D={class:"title is-2 has-text-centered"},x={class:"columns"},A={class:"column is-6"},C={key:0,class:"is-pulled-right is-italic"},B={key:1,class:"is-pulled-right"},S={class:"column is-6"},T={key:0,class:"is-italic"},E={key:1},M={class:"title is-2 has-text-centered"},I={class:"columns is-mobile"},$={class:"column is-6"},P={class:"splitted-diff"},F={key:0,class:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},U={key:1},R={class:"column is-6"},L={class:"splitted-diff"},Y={key:0,class:"block-ellipsed has-text-centered is-size-7 has-text-grey-light is-italic"},q={key:1};Object(n["popScopeId"])();const H=o((e,t,i,H,G,W)=>{const Q=Object(n["resolveComponent"])("html-header"),z=Object(n["resolveComponent"])("icon-document"),J=Object(n["resolveComponent"])("router-link"),X=Object(n["resolveComponent"])("version-link"),K=Object(n["resolveComponent"])("contributor-link"),Z=Object(n["resolveComponent"])("diff-link"),ee=Object(n["resolveComponent"])("map-view"),te=Object(n["resolveDirective"])("translate"),ie=Object(n["resolveFilter"])("uppercaseFirstLetter");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(Q,{title:e.$gettext("Differences between versions")},null,8,["title"]),Object(n["createVNode"])("h1",null,[Object(n["createVNode"])(z,{"document-type":W.documentType,class:"is-large"},null,8,["document-type"]),s,l,Object(n["createTextVNode"])(" ("+Object(n["toDisplayString"])(W.lang)+") : ",1),Object(n["createVNode"])(J,{to:{name:W.documentType,params:{id:W.documentId,lang:W.lang}}},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(G.title),1)],void 0,!0),_:1},8,["to"])]),Object(n["createVNode"])("div",c,[G.oldVersion?(Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])("div",null,[Object(n["createVNode"])(X,{"document-type":W.documentType,id:W.documentId,version:G.oldVersion.version.version_id,lang:W.lang},{default:o(()=>[Object(n["createTextVNode"])(" Revision #"+Object(n["toDisplayString"])(G.oldVersion.document.version)+" as of "+Object(n["toDisplayString"])(e.$dateUtils.toTechnicalString(G.oldVersion.version.written_at)),1)],void 0,!0),_:1},8,["document-type","id","version","lang"])]),Object(n["createVNode"])("div",null,[d,Object(n["createVNode"])(K,{contributor:G.oldVersion.version},null,8,["contributor"])]),Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(G.oldVersion.version.comment),1),Object(n["createVNode"])("div",null,[G.oldVersion.previous_version_id?(Object(n["openBlock"])(),Object(n["createBlock"])(Z,{key:0,"document-type":W.documentType,id:W.documentId,lang:W.lang,"version-from":G.oldVersion.previous_version_id,"version-to":G.oldVersion.version.version_id},{default:o(()=>[u,Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[m],512),[[te]])],void 0,!0),_:1},8,["document-type","id","lang","version-from","version-to"])):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("span",h,[f],512)),[[te]])])])):Object(n["createCommentVNode"])("",!0),G.newVersion?(Object(n["openBlock"])(),Object(n["createBlock"])("div",p,[Object(n["createVNode"])("div",null,[Object(n["createVNode"])(X,{"document-type":W.documentType,id:W.documentId,version:G.newVersion.version.version_id,lang:W.lang},{default:o(()=>[Object(n["createTextVNode"])(" Revision #"+Object(n["toDisplayString"])(G.newVersion.document.version)+" as of "+Object(n["toDisplayString"])(e.$dateUtils.toTechnicalString(G.newVersion.version.written_at)),1)],void 0,!0),_:1},8,["document-type","id","version","lang"])]),Object(n["createVNode"])("div",null,[b,Object(n["createVNode"])(K,{contributor:G.newVersion.version},null,8,["contributor"])]),Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(G.newVersion.version.comment),1),Object(n["createVNode"])("div",null,[G.newVersion.next_version_id?(Object(n["openBlock"])(),Object(n["createBlock"])(Z,{key:0,"document-type":W.documentType,id:W.documentId,lang:W.lang,"version-from":G.newVersion.version.version_id,"version-to":G.newVersion.next_version_id},{default:o(()=>[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[g],512),[[te]]),v],void 0,!0),_:1},8,["document-type","id","lang","version-from","version-to"])):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("span",O,[j],512)),[[te]])])])):Object(n["createCommentVNode"])("",!0)]),G.oldVersion&&G.newVersion?(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,[W.filenameHasChanged?(Object(n["openBlock"])(),Object(n["createBlock"])("div",V,[Object(n["createVNode"])("div",w,[Object(n["createVNode"])("div",N,[Object(n["createVNode"])("img",{src:W.getImageUrl(G.oldVersion.document),class:"is-pulled-right"},null,8,["src"])]),Object(n["createVNode"])("div",_,[Object(n["createVNode"])("img",{src:W.getImageUrl(G.newVersion.document)},null,8,["src"])])])])):Object(n["createCommentVNode"])("",!0),W.geometryHasChanged?(Object(n["openBlock"])(),Object(n["createBlock"])("div",k,[Object(n["createVNode"])(ee,{"old-document":G.oldVersion.document,"new-document":G.newVersion.document},null,8,["old-document","new-document"])])):Object(n["createCommentVNode"])("",!0),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(Object.keys(G.diffProperties),t=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t},[Object(n["createVNode"])("h2",D,Object(n["toDisplayString"])(ie(e.$gettext(t))),1),Object(n["createVNode"])("div",x,[Object(n["createVNode"])("div",A,[null===G.diffProperties[t].old?(Object(n["openBlock"])(),Object(n["createBlock"])("del",C,"null")):(Object(n["openBlock"])(),Object(n["createBlock"])("del",B,Object(n["toDisplayString"])(G.diffProperties[t].old),1))]),Object(n["createVNode"])("div",S,[null===G.diffProperties[t].new?(Object(n["openBlock"])(),Object(n["createBlock"])("ins",T,"null")):(Object(n["openBlock"])(),Object(n["createBlock"])("ins",E,Object(n["toDisplayString"])(G.diffProperties[t].new),1))])])]))),128)),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(G.diffLocales,(t,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:i},[Object(n["createVNode"])("h2",M,Object(n["toDisplayString"])(e.$gettext(i)),1),Object(n["createVNode"])("div",I,[Object(n["createVNode"])("div",$,[Object(n["createVNode"])("div",P,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t},[e.ellipsed?(Object(n["openBlock"])(),Object(n["createBlock"])("div",F,Object(n["toDisplayString"])(e.rows.length)+" identical rows ",1)):(Object(n["openBlock"])(),Object(n["createBlock"])("div",U,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rows,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t,class:["row-diff",{"row-del":!e.isIdentical&&!e.isFakeOld,"row-fake":e.isFakeOld}]},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.oldPart,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.isIdentical?"span":"del"),{key:t},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.text),1)],void 0,!0),_:2},1024))),128))],2))),128))]))]))),128))])]),Object(n["createVNode"])("div",R,[Object(n["createVNode"])("div",L,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(t,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t},[e.ellipsed?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Y,Object(n["toDisplayString"])(e.rows.length)+" identical rows ",1)):(Object(n["openBlock"])(),Object(n["createBlock"])("div",q,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.rows,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t,class:["row-diff",{"row-ins":!e.isIdentical&&!e.isFakeNew,"row-fake":e.isFakeNew}]},[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.newPart,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])(e.isIdentical?"span":"ins"),{key:t},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.text),1)],void 0,!0),_:2},1024))),128))],2))),128))]))]))),128))])])])]))),128))])):Object(n["createCommentVNode"])("",!0)])});i("5319");function G(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var W=-1,Q=1,z=0;G.Diff,G.diff_main=function(e,t,i,n){"undefined"===typeof n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=n;if(null===e||null===t)throw new Error("Null input. (diff_main)");if(e===t)return e?[[z,e]]:[];"undefined"===typeof i&&(i=!0);var a=i,s=this.diff_commonPrefix(e,t),l=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var r=this.diff_compute_(e,t,a,o);return l&&r.unshift([z,l]),c&&r.push([z,c]),this.diff_cleanupMerge(r),r},G.diff_compute_=function(e,t,i,n){var o;if(!e)return[[Q,t]];if(!t)return[[W,e]];var a=e.length>t.length?e:t,s=e.length>t.length?t:e,l=a.indexOf(s);if(-1!==l)return o=[[Q,a.substring(0,l)],[z,s],[Q,a.substring(l+s.length)]],e.length>t.length&&(o[0][0]=o[2][0]=W),o;if(1===s.length)return[[W,e],[Q,t]];var c=this.diff_halfMatch_(e,t);if(c){var r=c[0],d=c[1],u=c[2],m=c[3],h=c[4],f=this.diff_main(r,u,i,n),p=this.diff_main(d,m,i,n);return f.concat([[z,h]],p)}return i&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,n):this.diff_bisect_(e,t,n)},G.diff_lineMode_=function(e,t,i){var n=this.diff_linesToChars_(e,t);e=n.chars1,t=n.chars2;var o=n.lineArray,a=this.diff_main(e,t,!1,i);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push([z,""]);var s=0,l=0,c=0,r="",d="";while(s<a.length){switch(a[s][0]){case Q:c++,d+=a[s][1];break;case W:l++,r+=a[s][1];break;case z:if(l>=1&&c>=1){a.splice(s-l-c,l+c),s=s-l-c;let e=this.diff_main(r,d,!1,i);for(var u=e.length-1;u>=0;u--)a.splice(s,0,e[u]);s+=e.length}c=0,l=0,r="",d="";break}s++}return a.pop(),a},G.diff_bisect_=function(e,t,i){for(var n=e.length,o=t.length,a=Math.ceil((n+o)/2),s=a,l=2*a,c=new Array(l),r=new Array(l),d=0;d<l;d++)c[d]=-1,r[d]=-1;c[s+1]=0,r[s+1]=0;for(var u=n-o,m=u%2!==0,h=0,f=0,p=0,b=0,g=0;g<a;g++){if((new Date).getTime()>i)break;for(let a=-g+h;a<=g-f;a+=2){let d=s+a;var v;v=a===-g||a!==g&&c[d-1]<c[d+1]?c[d+1]:c[d-1]+1;let p=v-a;while(v<n&&p<o&&e.charAt(v)===t.charAt(p))v++,p++;if(c[d]=v,v>n)f+=2;else if(p>o)h+=2;else if(m){let o=s+u-a;if(o>=0&&o<l&&-1!==r[o]){var O=n-r[o];if(v>=O)return this.diff_bisectSplit_(e,t,v,p,i)}}}for(let a=-g+p;a<=g-b;a+=2){let d,h=s+a;d=a===-g||a!==g&&r[h-1]<r[h+1]?r[h+1]:r[h-1]+1;var j=d-a;while(d<n&&j<o&&e.charAt(n-d-1)===t.charAt(o-j-1))d++,j++;if(r[h]=d,d>n)b+=2;else if(j>o)p+=2;else if(!m){let o=s+u-a;if(o>=0&&o<l&&-1!==c[o]){let a=c[o],l=s+a-o;if(d=n-d,a>=d)return this.diff_bisectSplit_(e,t,a,l,i)}}}}return[[W,e],[Q,t]]},G.diff_bisectSplit_=function(e,t,i,n,o){var a=e.substring(0,i),s=t.substring(0,n),l=e.substring(i),c=t.substring(n),r=this.diff_main(a,s,!1,o),d=this.diff_main(l,c,!1,o);return r.concat(d)},G.diff_linesToChars_=function(e,t){var i=[],n={};function o(e){var t="",o=0,a=-1,s=i.length;while(a<e.length-1){a=e.indexOf("\n",o),-1===a&&(a=e.length-1);var l=e.substring(o,a+1);o=a+1,(n.hasOwnProperty?n.hasOwnProperty(l):void 0!==n[l])?t+=String.fromCharCode(n[l]):(t+=String.fromCharCode(s),n[l]=s,i[s++]=l)}return t}i[0]="";var a=o(e),s=o(t);return{chars1:a,chars2:s,lineArray:i}},G.diff_charsToLines_=function(e,t){for(var i=0;i<e.length;i++){for(var n=e[i][1],o=[],a=0;a<n.length;a++)o[a]=t[n.charCodeAt(a)];e[i][1]=o.join("")}},G.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;var i=0,n=Math.min(e.length,t.length),o=n,a=0;while(i<o)e.substring(a,o)===t.substring(a,o)?(i=o,a=i):n=o,o=Math.floor((n-i)/2+i);return o},G.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!==t.charAt(t.length-1))return 0;var i=0,n=Math.min(e.length,t.length),o=n,a=0;while(i<o)e.substring(e.length-o,e.length-a)===t.substring(t.length-o,t.length-a)?(i=o,a=i):n=o,o=Math.floor((n-i)/2+i);return o},G.diff_commonOverlap_=function(e,t){var i=e.length,n=t.length;if(0===i||0===n)return 0;i>n?e=e.substring(i-n):i<n&&(t=t.substring(0,i));var o=Math.min(i,n);if(e===t)return o;var a=0,s=1;while(s===s){var l=e.substring(o-s),c=t.indexOf(l);if(-1===c)return a;s+=c,0!==c&&e.substring(o-s)!==t.substring(0,s)||(a=s,s++)}},G.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var i=e.length>t.length?e:t,n=e.length>t.length?t:e;if(i.length<4||2*n.length<i.length)return null;var o=this;function a(e,t,i){var n,a,s,l,c=e.substring(i,i+Math.floor(e.length/4)),r=-1,d="";while(-1!==(r=t.indexOf(c,r+1))){var u=o.diff_commonPrefix(e.substring(i),t.substring(r)),m=o.diff_commonSuffix(e.substring(0,i),t.substring(0,r));d.length<m+u&&(d=t.substring(r-m,r)+t.substring(r,r+u),n=e.substring(0,i-m),a=e.substring(i+u),s=t.substring(0,r-m),l=t.substring(r+u))}return 2*d.length>=e.length?[n,a,s,l,d]:null}var s,l,c,r,d,u=a(i,n,Math.ceil(i.length/4)),m=a(i,n,Math.ceil(i.length/2));if(!u&&!m)return null;s=m?u&&u[4].length>m[4].length?u:m:u,e.length>t.length?(l=s[0],c=s[1],r=s[2],d=s[3]):(r=s[0],d=s[1],l=s[2],c=s[3]);var h=s[4];return[l,c,r,d,h]},G.diff_cleanupSemantic=function(e){var t=!1,i=[],n=0,o=null,a=0,s=0,l=0,c=0,r=0;while(a<e.length)e[a][0]===z?(i[n++]=a,s=c,l=r,c=0,r=0,o=e[a][1]):(e[a][0]===Q?c+=e[a][1].length:r+=e[a][1].length,o&&o.length<=Math.max(s,l)&&o.length<=Math.max(c,r)&&(e.splice(i[n-1],0,[W,o]),e[i[n-1]+1][0]=Q,n--,n--,a=n>0?i[n-1]:-1,s=0,l=0,c=0,r=0,o=null,t=!0)),a++;t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;while(a<e.length){if(e[a-1][0]===W&&e[a][0]===Q){var d=e[a-1][1],u=e[a][1],m=this.diff_commonOverlap_(d,u),h=this.diff_commonOverlap_(u,d);m>=h?(m>=d.length/2||m>=u.length/2)&&(e.splice(a,0,[z,u.substring(0,m)]),e[a-1][1]=d.substring(0,d.length-m),e[a+1][1]=u.substring(m),a++):(h>=d.length/2||h>=u.length/2)&&(e.splice(a,0,[z,d.substring(0,h)]),e[a-1][0]=Q,e[a-1][1]=u.substring(0,u.length-h),e[a+1][0]=W,e[a+1][1]=d.substring(h),a++),a++}a++}},G.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var i=e.charAt(e.length-1),n=t.charAt(0),o=i.match(G.nonAlphaNumericRegex_),a=n.match(G.nonAlphaNumericRegex_),s=o&&i.match(G.whitespaceRegex_),l=a&&n.match(G.whitespaceRegex_),c=s&&i.match(G.linebreakRegex_),r=l&&n.match(G.linebreakRegex_),d=c&&e.match(G.blanklineEndRegex_),u=r&&t.match(G.blanklineStartRegex_);return d||u?5:c||r?4:o&&!s&&l?3:s||l?2:o||a?1:0}var i=1;while(i<e.length-1){if(e[i-1][0]===z&&e[i+1][0]===z){var n=e[i-1][1],o=e[i][1],a=e[i+1][1],s=this.diff_commonSuffix(n,o);if(s){var l=o.substring(o.length-s);n=n.substring(0,n.length-s),o=l+o.substring(0,o.length-s),a=l+a}var c=n,r=o,d=a,u=t(n,o)+t(o,a);while(o.charAt(0)===a.charAt(0)){n+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var m=t(n,o)+t(o,a);m>=u&&(u=m,c=n,r=o,d=a)}e[i-1][1]!==c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=r,d?e[i+1][1]=d:(e.splice(i+1,1),i--))}i++}},G.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,G.whitespaceRegex_=/\s/,G.linebreakRegex_=/[\r\n]/,G.blanklineEndRegex_=/\n\r?\n$/,G.blanklineStartRegex_=/^\r?\n\r?\n/,G.diff_cleanupEfficiency=function(e){var t=!1,i=[],n=0,o=null,a=0,s=!1,l=!1,c=!1,r=!1;while(a<e.length)e[a][0]===z?(e[a][1].length<this.Diff_EditCost&&(c||r)?(i[n++]=a,s=c,l=r,o=e[a][1]):(n=0,o=null),c=r=!1):(e[a][0]===W?r=!0:c=!0,o&&(s&&l&&c&&r||o.length<this.Diff_EditCost/2&&s+l+c+r===3)&&(e.splice(i[n-1],0,[W,o]),e[i[n-1]+1][0]=Q,n--,o=null,s&&l?(c=r=!0,n=0):(n--,a=n>0?i[n-1]:-1,c=r=!1),t=!0)),a++;t&&this.diff_cleanupMerge(e)},G.diff_cleanupMerge=function(e){e.push([z,""]);var t,i=0,n=0,o=0,a="",s="";while(i<e.length)switch(e[i][0]){case Q:o++,s+=e[i][1],i++;break;case W:n++,a+=e[i][1],i++;break;case z:n+o>1?(0!==n&&0!==o&&(t=this.diff_commonPrefix(s,a),0!==t&&(i-n-o>0&&e[i-n-o-1][0]===z?e[i-n-o-1][1]+=s.substring(0,t):(e.splice(0,0,[z,s.substring(0,t)]),i++),s=s.substring(t),a=a.substring(t)),t=this.diff_commonSuffix(s,a),0!==t&&(e[i][1]=s.substring(s.length-t)+e[i][1],s=s.substring(0,s.length-t),a=a.substring(0,a.length-t))),0===n?e.splice(i-o,n+o,[Q,s]):0===o?e.splice(i-n,n+o,[W,a]):e.splice(i-n-o,n+o,[W,a],[Q,s]),i=i-n-o+(n?1:0)+(o?1:0)+1):0!==i&&e[i-1][0]===z?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,o=0,n=0,a="",s="";break}""===e[e.length-1][1]&&e.pop();var l=!1;i=1;while(i<e.length-1)e[i-1][0]===z&&e[i+1][0]===z&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)===e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),l=!0):e[i][1].substring(0,e[i+1][1].length)===e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),l=!0)),i++;l&&this.diff_cleanupMerge(e)},G.diff_xIndex=function(e,t){var i,n=0,o=0,a=0,s=0;for(i=0;i<e.length;i++){if(e[i][0]!==Q&&(n+=e[i][1].length),e[i][0]!==W&&(o+=e[i][1].length),n>t)break;a=n,s=o}return e.length!==i&&e[i][0]===W?s:s+(t-a)},G.diff_prettyHtml=function(e){for(var t=[],i=/&/g,n=/</g,o=/>/g,a=/\n/g,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1],r=c.replace(i,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case Q:t[s]='<ins style="background:#e6ffe6;">'+r+"</ins>";break;case W:t[s]='<del style="background:#ffe6e6;">'+r+"</del>";break;case z:t[s]="<span>"+r+"</span>";break}}return t.join("")},G.diff_text1=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==Q&&(t[i]=e[i][1]);return t.join("")},G.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==W&&(t[i]=e[i][1]);return t.join("")},G.diff_levenshtein=function(e){for(var t=0,i=0,n=0,o=0;o<e.length;o++){var a=e[o][0],s=e[o][1];switch(a){case Q:i+=s.length;break;case W:n+=s.length;break;case z:t+=Math.max(i,n),i=0,n=0;break}}return t+=Math.max(i,n),t},G.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case Q:t[i]="+"+encodeURI(e[i][1]);break;case W:t[i]="-"+e[i][1].length;break;case z:t[i]="="+e[i][1].length;break}return t.join("\t").replace(/%20/g," ")},G.diff_fromDelta=function(e,t){for(var i=[],n=0,o=0,a=t.split(/\t/g),s=0;s<a.length;s++){var l=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{i[n++]=[Q,decodeURI(l)]}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var c=parseInt(l,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+l);var r=e.substring(o,o+=c);"="===a[s].charAt(0)?i[n++]=[z,r]:i[n++]=[W,r];break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(o!==e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return i},G.match_main=function(e,t,i){if(null===e||null===t||null===i)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,e.length)),e===t?0:e.length?e.substring(i,i+t.length)===t?i:this.match_bitap_(e,t,i):-1},G.match_bitap_=function(e,t,i){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var n=this.match_alphabet_(t),o=this;function a(e,n){var a=e/t.length,s=Math.abs(i-n);return o.Match_Distance?a+s/o.Match_Distance:s?1:a}var s=this.Match_Threshold,l=e.indexOf(t,i);-1!==l&&(s=Math.min(a(0,l),s),l=e.lastIndexOf(t,i+t.length),-1!==l&&(s=Math.min(a(0,l),s)));var c,r,d=1<<t.length-1;l=-1;for(var u,m=t.length+e.length,h=0;h<t.length;h++){c=0,r=m;while(c<r)a(h,i+r)<=s?c=r:m=r,r=Math.floor((m-c)/2+c);m=r;var f=Math.max(1,i-r+1),p=Math.min(i+r,e.length)+t.length,b=Array(p+2);b[p+1]=(1<<h)-1;for(var g=p;g>=f;g--){var v=n[e.charAt(g-1)];if(b[g]=0===h?(b[g+1]<<1|1)&v:(b[g+1]<<1|1)&v|(u[g+1]|u[g])<<1|1|u[g+1],b[g]&d){var O=a(h,g-1);if(O<=s){if(s=O,l=g-1,!(l>i))break;f=Math.max(1,2*i-l)}}}if(a(h+1,i)>s)break;u=b}return l},G.match_alphabet_=function(e){var t={};for(let i=0;i<e.length;i++)t[e.charAt(i)]=0;for(let i=0;i<e.length;i++)t[e.charAt(i)]|=1<<e.length-i-1;return t},G.patch_addContext_=function(e,t){if(0!==t.length){var i=t.substring(e.start2,e.start2+e.length1),n=0;while(t.indexOf(i)!==t.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)n+=this.Patch_Margin,i=t.substring(e.start2-n,e.start2+e.length1+n);n+=this.Patch_Margin;var o=t.substring(e.start2-n,e.start2);o&&e.diffs.unshift([z,o]);var a=t.substring(e.start2+e.length1,e.start2+e.length1+n);a&&e.diffs.push([z,a]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},G.patch_make=function(e,t,i){var n,o;if("string"===typeof e&&"string"===typeof t&&"undefined"===typeof i)n=e,o=this.diff_main(n,t,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"===typeof e&&"undefined"===typeof t&&"undefined"===typeof i)o=e,n=this.diff_text1(o);else if("string"===typeof e&&t&&"object"===typeof t&&"undefined"===typeof i)n=e,o=t;else{if("string"!==typeof e||"string"!==typeof t||!i||"object"!==typeof i)throw new Error("Unknown call format to patch_make.");n=e,o=i}if(0===o.length)return[];for(var a=[],s=new G.patch_obj,l=0,c=0,r=0,d=n,u=n,m=0;m<o.length;m++){var h=o[m][0],f=o[m][1];switch(l||h===z||(s.start1=c,s.start2=r),h){case Q:s.diffs[l++]=o[m],s.length2+=f.length,u=u.substring(0,r)+f+u.substring(r);break;case W:s.length1+=f.length,s.diffs[l++]=o[m],u=u.substring(0,r)+u.substring(r+f.length);break;case z:f.length<=2*this.Patch_Margin&&l&&o.length!==m+1?(s.diffs[l++]=o[m],s.length1+=f.length,s.length2+=f.length):f.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(s,d),a.push(s),s=new G.patch_obj,l=0,d=u,c=r);break}h!==Q&&(c+=f.length),h!==W&&(r+=f.length)}return l&&(this.patch_addContext_(s,d),a.push(s)),a},G.patch_deepCopy=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],o=new G.patch_obj;o.diffs=[];for(var a=0;a<n.diffs.length;a++)o.diffs[a]=n.diffs[a].slice();o.start1=n.start1,o.start2=n.start2,o.length1=n.length1,o.length2=n.length2,t[i]=o}return t},G.patch_apply=function(e,t){if(0===e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var n=0,o=[],a=0;a<e.length;a++){var s,l,c=e[a].start2+n,r=this.diff_text1(e[a].diffs),d=-1;if(r.length>this.Match_MaxBits?(s=this.match_main(t,r.substring(0,this.Match_MaxBits),c),-1!==s&&(d=this.match_main(t,r.substring(r.length-this.Match_MaxBits),c+r.length-this.Match_MaxBits),(-1===d||s>=d)&&(s=-1))):s=this.match_main(t,r,c),-1===s)o[a]=!1,n-=e[a].length2-e[a].length1;else if(o[a]=!0,n=s-c,l=-1===d?t.substring(s,s+r.length):t.substring(s,d+this.Match_MaxBits),r===l)t=t.substring(0,s)+this.diff_text2(e[a].diffs)+t.substring(s+r.length);else{var u=this.diff_main(r,l,!1);if(r.length>this.Match_MaxBits&&this.diff_levenshtein(u)/r.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(u);for(var m,h=0,f=0;f<e[a].diffs.length;f++){var p=e[a].diffs[f];p[0]!==z&&(m=this.diff_xIndex(u,h)),p[0]===Q?t=t.substring(0,s+m)+p[1]+t.substring(s+m):p[0]===W&&(t=t.substring(0,s+m)+t.substring(s+this.diff_xIndex(u,h+p[1].length))),p[0]!==W&&(h+=p[1].length)}}}}return t=t.substring(i.length,t.length-i.length),[t,o]},G.patch_addPadding=function(e){var t=this.Patch_Margin,i="";for(let a=1;a<=t;a++)i+=String.fromCharCode(a);for(let a=0;a<e.length;a++)e[a].start1+=t,e[a].start2+=t;var n=e[0],o=n.diffs;if(0===o.length||o[0][0]!==z)o.unshift([z,i]),n.start1-=t,n.start2-=t,n.length1+=t,n.length2+=t;else if(t>o[0][1].length){let e=t-o[0][1].length;o[0][1]=i.substring(o[0][1].length)+o[0][1],n.start1-=e,n.start2-=e,n.length1+=e,n.length2+=e}if(n=e[e.length-1],o=n.diffs,0===o.length||o[o.length-1][0]!==z)o.push([z,i]),n.length1+=t,n.length2+=t;else if(t>o[o.length-1][1].length){let e=t-o[o.length-1][1].length;o[o.length-1][1]+=i.substring(0,e),n.length1+=e,n.length2+=e}return i},G.patch_splitMax=function(e){for(var t=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=t)){var n=e[i];e.splice(i--,1);var o=n.start1,a=n.start2,s="";while(0!==n.diffs.length){var l=new G.patch_obj,c=!0;l.start1=o-s.length,l.start2=a-s.length,""!==s&&(l.length1=l.length2=s.length,l.diffs.push([z,s]));while(0!==n.diffs.length&&l.length1<t-this.Patch_Margin){var r=n.diffs[0][0],d=n.diffs[0][1];r===Q?(l.length2+=d.length,a+=d.length,l.diffs.push(n.diffs.shift()),c=!1):r===W&&1===l.diffs.length&&l.diffs[0][0]===z&&d.length>2*t?(l.length1+=d.length,o+=d.length,c=!1,l.diffs.push([r,d]),n.diffs.shift()):(d=d.substring(0,t-l.length1-this.Patch_Margin),l.length1+=d.length,o+=d.length,r===z?(l.length2+=d.length,a+=d.length):c=!1,l.diffs.push([r,d]),d===n.diffs[0][1]?n.diffs.shift():n.diffs[0][1]=n.diffs[0][1].substring(d.length))}s=this.diff_text2(l.diffs),s=s.substring(s.length-this.Patch_Margin);var u=this.diff_text1(n.diffs).substring(0,this.Patch_Margin);""!==u&&(l.length1+=u.length,l.length2+=u.length,0!==l.diffs.length&&l.diffs[l.diffs.length-1][0]===z?l.diffs[l.diffs.length-1][1]+=u:l.diffs.push([z,u])),c||e.splice(++i,0,l)}}},G.patch_toText=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return t.join("")},G.patch_fromText=function(e){var t=[];if(!e)return t;var i=e.split("\n"),n=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(n<i.length){var a=i[n].match(o);if(!a)throw new Error("Invalid patch string: "+i[n]);var s=new G.patch_obj;t.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"===a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"===a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),n++;while(n<i.length){var l=i[n].charAt(0);try{var c=decodeURI(i[n].substring(1))}catch(r){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"===l)s.diffs.push([W,c]);else if("+"===l)s.diffs.push([Q,c]);else if(" "===l)s.diffs.push([z,c]);else{if("@"===l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+c)}n++}}return t},G.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},G.patch_obj.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1===this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1===this.length2?this.start2+1:this.start2+1+","+this.length2;for(var i,n=["@@ -"+e+" +"+t+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case Q:i="+";break;case W:i="-";break;case z:i=" ";break}n[o+1]=i+encodeURI(this.diffs[o][1])+"\n"}return n.join("").replace(/%20/g," ")};var J=i("188b"),X=i("25c4"),K=i("e952");const Z=function(e,t){return Array.isArray(e)||Array.isArray(t)?JSON.stringify(e)!==JSON.stringify(t):null===e&&null!==t||null!==e&&null===t||e!==t},ee=function(e,t){for(let i=0;i<e.length;i++)0===e[i][0]?t(e[i][1],e[i][1],!0):1===e[i][0]?t(null,e[i][1],!1):-1===e[i][0]&&(i+1<e.length&&1===e[i+1][0]?(t(e[i][1],e[i+1][1],!1),i+=1):t(e[i][1],null,!1))},te=function(e,t){this.text=e,this.isIdentical=t},ie=function(e,t,i){if(this.oldPart=[],this.newPart=[],this.ellipsed=!0,this.isIdentical=i,i)this.oldPart=[new te(e,!0)],this.newPart=this.oldPart;else if(void 0===e)this.newPart.push(new te(t,!1));else if(void 0===t)this.oldPart.push(new te(e,!1));else{const i=G.diff_main(e,t);ee(i,this.addItem.bind(this))}};Object.defineProperty(ie.prototype,"isFakeOld",{get(){return 0===this.oldPart.length}}),Object.defineProperty(ie.prototype,"isFakeNew",{get(){return 0===this.newPart.length}}),ie.prototype.addItem=function(e,t,i){if(i){const t=new te(e,!0);this.oldPart.push(t),this.newPart.push(t)}else void 0!==e&&this.oldPart.push(new te(e,!1)),void 0!==t&&this.newPart.push(new te(t,!1))};const ne=function(){this.items=[]};ne.prototype.build=function(e,t){const i=G.diff_linesToChars_(e,t),n=G.diff_main(i.chars1,i.chars2,!1);G.diff_charsToLines_(n,i.lineArray),ee(n,this.add.bind(this))},ne.prototype.add=function(e,t,i){const n=this.items;if(i){const t=e.split("\n");for(const e of t.slice(0,t.length-1))n.push(new ie(e,e,!0))}else{e=null!==e?e.split("\n"):[],t=null!==t?t.split("\n"):[];for(let i=0;i<Math.max(e.length-1,t.length-1);i++)n.push(new ie(e[i],t[i],!1))}},ne.prototype.computeEllipsisStates=function(){const e=this.items;for(let t=0;t<e.length;t++)if(!e[t].isIdentical)for(let i=Math.max(0,t-2);i<=Math.min(e.length-1,t+2);i++)e[i].ellipsed=!1};var oe={data(){return{title:null,oldVersion:null,newVersion:null,diffProperties:{},diffLocales:{}}},computed:{documentId(){return parseInt(this.$route.params.id)},documentType(){return this.$route.name.replace("-diff","")},lang(){return this.$route.params.lang},geoLocalized(){return X["a"].objectDefinitions[this.documentType].geoLocalized},filenameHasChanged(){return this.oldVersion.document.filename!==this.newVersion.document.filename},geometryHasChanged(){if(!this.geoLocalized&&"area"!==this.documentType)return!1;if(!this.$documentUtils.hasSameGeolocation(this.oldVersion.document,this.newVersion.document))return!0;const e=this.oldVersion.document.geometry,t=this.newVersion.document.geometry;return e.geom_detail!==t.geom_detail}},watch:{$route:{handler:"loadVersions",immediate:!0}},methods:{getImageUrl:K["a"].getMedium,loadVersions(){this.loadVersion(this.$route.params.versionFrom,"oldVersion"),this.loadVersion(this.$route.params.versionTo,"newVersion")},getKeys(e,t,i=[]){let n=Object.keys(e).concat(Object.keys(t));return n=n.filter((function(e,t,n){return n.indexOf(e)===t&&!i.includes(e)})),n.sort(),n},buildDiff(){if(this.diffProperties={},this.diffLocales={},!this.oldVersion||!this.newVersion)return"Waiting for other version";const e=this.getKeys(this.oldVersion.document,this.newVersion.document,["version","locales","geometry","cooked","filename"]);for(const a of e)Z(this.oldVersion.document[a],this.newVersion.document[a])&&(this.diffProperties[a]={old:this.oldVersion.document[a],new:this.newVersion.document[a]});const t=this.$documentUtils.getLocaleStupid(this.oldVersion.document,this.lang),i=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang),n=this.getKeys(t,i,["lang","version"]),o=function(e){var t;return e=null!==(t=e)&&void 0!==t?t:"",e=e.replace(/\r\n?/g,"\n"),e+=e.endsWith("\n")?"":"\n",e};for(const a of n){const e=o(t[a]),n=o(i[a]);if(Z(e,n)){const t=new ne;t.build(e,n),t.computeEllipsisStates();const i=function(e){this.rows=[],this.ellipsed=e},o=[new i(t.items[0].ellipsed)];let s=o[0];for(const e of t.items)s.ellipsed!==e.ellipsed&&(s=new i(e.ellipsed),o.push(s)),s.rows.push(e);this.diffLocales[a]=o}}},loadVersion(e,t){if(this[t]=null,"prev"!==e&&"next"!==e)return J["a"][this.documentType].getVersion(this.documentId,this.lang,e).then(e=>{this[t]=e.data,"prev"===this.$route.params.versionFrom&&"newVersion"===t&&this.loadVersion(this.newVersion.previous_version_id,"oldVersion"),"next"===this.$route.params.versionTo&&"oldVersion"===t&&this.loadVersion(this.newVersion.next_version_id,"newVersion"),"newVersion"===t&&(this.title=this.$documentUtils.getLocaleStupid(this.newVersion.document,this.lang).title),this.buildDiff()})}}};i("6489");oe.render=H,oe.__scopeId="data-v-2da04bb2";t["default"]=oe},"8d8a":function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns"},a={class:"column is-narrow"},s={class:"columns is-multiline"},l={class:"column"},c={class:"field"},r={class:"label"},d={class:"control"},u={key:0,class:"field"},m=Object(n["createTextVNode"])(", "),h={key:1,class:"notification is-info"},f=Object(n["createTextVNode"])("Please move the map, or change the route's name."),p=Object(n["createTextVNode"])("If the route does not exists in our base, you can create it."),b={key:2,class:"notification is-info"},g=Object(n["createTextVNode"])(" More routes are available. You can move the map, specify the name or set an activity to filter them out. "),v={class:"columns is-multiline"},O={class:"columns is-multiline"},j={class:"columns"},y={class:"columns"},V={class:"columns is-multiline"},w={class:"columns"},N={class:"columns is-multiline"},_={class:"columns"},k={class:"columns is-multiline"},D={class:"column is-4"},x={class:"column is-4"},A={class:"columns"},C={class:"columns"},B={class:"columns is-multiline"},S={class:"columns"},T={class:"columns"};function E(e,t,i,E,M,I){const $=Object(n["resolveComponent"])("form-field"),P=Object(n["resolveComponent"])("input-checkbox"),F=Object(n["resolveComponent"])("map-input-row"),U=Object(n["resolveComponent"])("marker-helper"),R=Object(n["resolveComponent"])("activities"),L=Object(n["resolveComponent"])("document-title"),Y=Object(n["resolveComponent"])("document-rating"),q=Object(n["resolveComponent"])("fa-icon"),H=Object(n["resolveComponent"])("document-link"),G=Object(n["resolveComponent"])("form-section"),W=Object(n["resolveComponent"])("associations-input-row"),Q=Object(n["resolveComponent"])("quality-field"),z=Object(n["resolveComponent"])("cotometer-window"),J=Object(n["resolveComponent"])("edition-container"),X=Object(n["resolveDirective"])("translate"),K=Object(n["resolveFilter"])("uppercaseFirstLetter");return e.document?(Object(n["openBlock"])(),Object(n["createBlock"])(J,{key:0,mode:e.mode,document:e.document,"is-loading":e.saving,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(G,{title:e.$gettext("general informations"),"sub-title":e.$gettext("Main informations about your outing"),"expanded-on-load":""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])($,{class:"is-narrow",document:e.document,field:e.fields.date_start,max:M.showBothDates?e.document.date_end:void 0,onInput:I.handleDates},null,8,["document","field","max","onInput"]),Object(n["withDirectives"])(Object(n["createVNode"])($,{class:"is-narrow",document:e.document,field:e.fields.date_end,min:M.showBothDates?e.document.date_start:void 0},null,8,["document","field","min"]),[[n["vShow"],M.showBothDates]]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])(P,{modelValue:M.showBothDates,"onUpdate:modelValue":t[1]||(t[1]=e=>M.showBothDates=e)},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$gettext("Several days?")),1)],void 0,!0),_:1},8,["modelValue"])])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])($,{class:"is-two-fifths",document:e.document,field:e.fields.activities},null,8,["document","field"]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])(F,{class:"field",document:e.document,documents:M.possibleRoutes,"geom-detail-editable":"",ref:"mapInput",onMove:I.updateBbox,"initial-extent":I.initialExtent},null,8,["document","documents","onMove","initial-extent"])])]),Object(n["createVNode"])("div",c,[Object(n["createVNode"])("label",r,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(K(e.$gettext("routes")))+": ",1),Object(n["createVNode"])(U,{name:"1063027#routes"})]),Object(n["createVNode"])("div",d,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{class:"input",type:"text",placeholder:"Name","onUpdate:modelValue":t[2]||(t[2]=e=>M.routeTitle=e)},null,512),[[n["vModelText"],M.routeTitle]])])]),M.possibleRoutes&&0!==M.possibleRoutes.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",u,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(M.possibleRoutes,t=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:t.document_id},[Object(n["createVNode"])(P,{value:I.routeIsAssociated(t.document_id),onInput:e=>I.changeRouteAssociation(e,t)},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(R,{activities:t.activities,class:"is-size-4 has-text-secondary"},null,8,["activities"]),Object(n["createVNode"])(L,{document:t},null,8,["document"]),m,Object(n["createVNode"])(Y,{document:t},null,8,["document"])],void 0,!0),_:2},1032,["value","onInput"]),Object(n["createVNode"])(H,{document:t,target:"_blank",title:e.$gettext("Open in a new tab")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(q,{icon:"link"})],void 0,!0),_:2},1032,["document","title"])]))),128))])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",h,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[f],512),[[X]]),Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[p],512),[[X]])])),M.showMoreResultsBanner?(Object(n["openBlock"])(),Object(n["createBlock"])("div",b,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[g],512),[[X]])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",v,[Object(n["createVNode"])($,{document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-narrow",document:e.document,field:e.fields.partial_trip},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.route_description,placeholder:e.$gettext("describe route_conditions")},null,8,["document","field","placeholder"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(G,{title:e.$gettext("Weather & conditions"),"sub-title":e.$gettext("Describe the conditions you encountered during your outing")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",O,[Object(n["createVNode"])($,{class:"is-6",document:e.document,field:e.fields.condition_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-6",document:e.document,field:e.fields.glacier_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.conditions_levels},null,8,["document","field"])]),Object(n["createVNode"])("div",j,[Object(n["createVNode"])($,{document:e.document,field:e.fields.elevation_up_snow},null,8,["document","field"]),Object(n["createVNode"])($,{document:e.document,field:e.fields.elevation_down_snow},null,8,["document","field"])]),Object(n["createVNode"])("div",y,[Object(n["createVNode"])($,{document:e.document,field:e.fields.snow_quantity},null,8,["document","field"]),Object(n["createVNode"])($,{document:e.document,field:e.fields.snow_quality},null,8,["document","field"])]),Object(n["createVNode"])("div",V,[Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.conditions,placeholder:e.$gettext("describe conditions")},null,8,["document","field","placeholder"]),Object(n["createVNode"])($,{class:"is-6",document:e.document,field:e.fields.weather,placeholder:e.$gettext("describe weather")},null,8,["document","field","placeholder"]),Object(n["createVNode"])($,{class:"is-6",document:e.document,field:e.fields.timing,placeholder:e.$gettext("describe timing")},null,8,["document","field","placeholder"]),Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.avalanche_signs},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.avalanches},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(G,{title:e.$gettext("Personal informations"),"sub-title":e.$gettext("People who were with you, and your feelings about this outing")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(W,{label:e.$gettext("participants"),document:e.document,field:e.fields.users},null,8,["label","document","field"]),Object(n["createVNode"])("div",w,[Object(n["createVNode"])($,{document:e.document,field:e.fields.participant_count,class:"is-narrow"},null,8,["document","field"]),Object(n["createVNode"])($,{document:e.document,field:e.fields.participants,placeholder:e.$gettext("Without c2c account")},null,8,["document","field","placeholder"])]),Object(n["createVNode"])("div",N,[Object(n["createVNode"])($,{class:"is-12",document:e.document,field:e.fields.description,label:e.$gettext("personal comments"),placeholder:e.$gettext("write your comments")},null,8,["document","field","label","placeholder"]),Object(n["createVNode"])($,{document:e.document,field:e.fields.disable_comments},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(G,{title:e.$gettext("Details"),"sub-title":e.$gettext("Detailed figures, like ratings, height differences, frequentation...")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",_,[Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.frequentation},null,8,["document","field"])]),Object(n["createVNode"])("div",k,[Object(n["createVNode"])("div",D,[Object(n["createVNode"])($,{"no-wrapper":"",document:e.document,field:e.fields.elevation_access},null,8,["document","field"]),Object(n["createVNode"])($,{"no-wrapper":"",document:e.document,field:e.fields.access_condition},null,8,["document","field"]),Object(n["createVNode"])($,{"no-wrapper":"",document:e.document,field:e.fields.public_transport},null,8,["document","field"])]),Object(n["createVNode"])($,{class:"is-8",document:e.document,field:e.fields.access_comment},null,8,["document","field"]),Object(n["createVNode"])("div",x,[Object(n["createVNode"])($,{"no-wrapper":"",document:e.document,field:e.fields.lift_status},null,8,["document","field"]),Object(n["createVNode"])($,{"no-wrapper":"",document:e.document,field:e.fields.hut_status},null,8,["document","field"])]),Object(n["createVNode"])($,{class:"is-8",document:e.document,field:e.fields.hut_comment},null,8,["document","field"])]),Object(n["createVNode"])("div",A,[Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.height_diff_up},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.height_diff_down},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.height_diff_difficulties},null,8,["document","field"])]),Object(n["createVNode"])("div",C,[Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.length_total,unit:"km",divisor:1e3},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.elevation_min},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.elevation_max},null,8,["document","field"])]),Object(n["createVNode"])("div",B,[Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.global_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.rock_free_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.engagement_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.equipment_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.ski_rating,prefix:"?",onClickPrefix:I.showCotometer},null,8,["document","field","onClickPrefix"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.labande_global_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.ice_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.snowshoe_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.via_ferrata_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.hiking_rating},null,8,["document","field"])]),Object(n["createVNode"])("div",S,[Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.mtb_down_rating},null,8,["document","field"]),Object(n["createVNode"])($,{class:"is-4",document:e.document,field:e.fields.mtb_up_rating},null,8,["document","field"])]),Object(n["createVNode"])("div",T,[Object(n["createVNode"])(Q,{ref:"qualityField",class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"]),e.document?(Object(n["openBlock"])(),Object(n["createBlock"])(z,{key:0,ref:"cotometerWindow",modelValue:e.document.ski_rating,"onUpdate:modelValue":t[3]||(t[3]=t=>e.document.ski_rating=t)},null,8,["modelValue"])):Object(n["createCommentVNode"])("",!0)],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])):Object(n["createCommentVNode"])("",!0)}const M={slot:"title"},I=Object(n["createTextVNode"])(" This tool estimates the technical difficulty of a ski route (ski rating). "),$={class:"field"},P={class:"label"},F=Object(n["createTextVNode"])("Skiability"),U={class:"control"},R={for:"c2c-skiability-0"},L=Object(n["createTextVNode"])("Wide and constant"),Y={class:"control"},q={for:"c2c-skiability-1"},H=Object(n["createTextVNode"])("1 or 2 complications (steeper or narrow section...)"),G={class:"control"},W={for:"c2c-skiability-2"},Q=Object(n["createTextVNode"])("Very complex (steps, narrow sections, ridges...)"),z={class:"field"},J={class:"label"},X=Object(n["createTextVNode"])("Average slope (degrees)"),K={class:"control"},Z={key:0,class:"help is-danger"},ee=Object(n["createTextVNode"])("The slope must be between 0 and 80 deg"),te={class:"field"},ie={class:"label"},ne=Object(n["createTextVNode"])("height_diff"),oe={class:"control"},ae={key:0,class:"help is-danger"},se=Object(n["createTextVNode"])("The slope must be between 50 and 3000m high"),le={key:0,class:"title is-1 has-text-centered"},ce=Object(n["createTextVNode"])("Suggested rating"),re=Object(n["createVNode"])("br",null,null,-1),de={class:"has-text-success"},ue={slot:"footer"},me=Object(n["createTextVNode"])("Ok"),he=Object(n["createTextVNode"])("Cancel");function fe(e,t,i,o,a,s){const l=Object(n["resolveComponent"])("modal-card"),c=Object(n["resolveDirective"])("translate");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{ref:"modalWindow"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("span",M,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[I],512),[[c]])]),Object(n["createVNode"])("div",$,[Object(n["withDirectives"])(Object(n["createVNode"])("label",P,[F],512),[[c]]),Object(n["createVNode"])("div",U,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{id:"c2c-skiability-0",name:"c2c-skiability",class:"is-checkradio is-info",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>a.skiability=e),value:0},null,512),[[n["vModelRadio"],a.skiability]]),Object(n["withDirectives"])(Object(n["createVNode"])("label",R,[L],512),[[c]])]),Object(n["createVNode"])("div",Y,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"radio",id:"c2c-skiability-1",name:"c2c-skiability",class:"is-checkradio is-info","onUpdate:modelValue":t[2]||(t[2]=e=>a.skiability=e),value:.1},null,8,["value"]),[[n["vModelRadio"],a.skiability]]),Object(n["withDirectives"])(Object(n["createVNode"])("label",q,[H],512),[[c]])]),Object(n["createVNode"])("div",G,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"radio",id:"c2c-skiability-2",name:"c2c-skiability",class:"is-checkradio is-info","onUpdate:modelValue":t[3]||(t[3]=e=>a.skiability=e),value:.2},null,8,["value"]),[[n["vModelRadio"],a.skiability]]),Object(n["withDirectives"])(Object(n["createVNode"])("label",W,[Q],512),[[c]])])]),Object(n["createVNode"])("div",z,[Object(n["withDirectives"])(Object(n["createVNode"])("label",J,[X],512),[[c]]),Object(n["createVNode"])("div",K,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.slope=e),class:"input",placeholder:e.$gettext("Average slope in degree"),type:"number"},null,8,["placeholder"]),[[n["vModelText"],a.slope]])]),s.errorSlope?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("p",Z,[ee],512)),[[c]]):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("div",te,[Object(n["withDirectives"])(Object(n["createVNode"])("label",ie,[ne],512),[[c]]),Object(n["createVNode"])("div",oe,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.elevation=e),class:"input",type:"number",min:"50",max:"3000"},null,512),[[n["vModelText"],a.elevation]])]),s.errorElevation?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("p",ae,[se],512)),[[c]]):Object(n["createCommentVNode"])("",!0)]),s.rating?(Object(n["openBlock"])(),Object(n["createBlock"])("h1",le,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[ce],512),[[c]]),re,Object(n["createVNode"])("span",de,Object(n["toDisplayString"])(s.rating),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("footer",ue,[Object(n["withDirectives"])(Object(n["createVNode"])("button",{class:"button is-success",type:"button",onClick:t[6]||(t[6]=(...e)=>s.setResult&&s.setResult(...e)),disabled:!s.rating},[me],8,["disabled"]),[[c]]),Object(n["withDirectives"])(Object(n["createVNode"])("button",{class:"button is-default",type:"button",onClick:t[7]||(t[7]=t=>e.$refs.modalWindow.hide())},[he],512),[[c]])])],void 0,!0),_:1},512)}var pe={data(){return{skiability:0,slope:null,elevation:50}},computed:{errorSlope(){return isNaN(this.slope)||this.slope<0||this.slope>80},errorElevation(){return(isNaN(this.elevation)||this.elevation<50||this.elevation>3e3)&&null!==this.elevation},rating(){if(this.errorSlope||this.errorElevation)return null;let e=Math.tan(Math.PI*this.slope/180)+.1*Math.log(this.elevation);e+=this.skiability*(e-1);const t=(1+this.skiability)*this.elevation;return this.slope<=17&&t<400?"1.1":this.slope<=23&&t<650?"1.2":this.slope<30&&t<800?"1.3":this.slope<35&&t<800||this.slope<23&&t>800?"2.1":this.slope<35&&t<=950?"2.2":this.slope<35&&t>950?"2.3":this.slope>=35&&this.slope<=40&&t<650?"3.1":this.slope>=35&&this.slope<=40&&t<=900?"3.2":this.slope>=35&&this.slope<=40&&t>900?"3.3":e<.98?"1.1":e>=.98&&e<1.02?"1.2":e>=1.03&&e<1.09?"+1.3":e>=1.09&&e<1.18?"+2.1":e>=1.18&&e<1.24?"2.2":e>=1.24&&e<1.3?"2.3":e>=1.3&&e<1.34?"3.1":e>=1.34&&e<1.39?"3.2":e>=1.39&&e<1.42?"3.3":e>=1.42&&e<1.46?"4.1":e>=1.46&&e<1.52?"4.2":e>=1.52&&e<1.575?"4.3":e>=1.575&&e<1.67?"5.1":e>=1.67&&e<1.745?"5.2":e>=1.745&&e<1.81?"5.3":e>=1.81&&e<1.95?"5.4":e>=1.95&&e<2.09?"5.5":e>=2.09&&e<2.25?"5.6":e>=2.25&&e<2.4?"5.7":"5.8"}},methods:{show(){this.$refs.modalWindow.show()},setResult(){this.$emit("input",this.rating),this.$refs.modalWindow.hide()}}};pe.render=fe;var be=pe,ge=i("1784"),ve=i("188b"),Oe={components:{CotometerWindow:be},mixins:[ge["a"]],data(){return{showBothDates:!1,possibleRoutes:null,routeTitle:"",bbox:null,showMoreResultsBanner:!1}},computed:{initialExtent(){return this.$route.query.initial_bbox?this.$route.query.initial_bbox.split(",").map(parseFloat):this.document.associations.routes.length?this.$documentUtils.getDocumentsBbox(this.document.associations.routes):null}},watch:{showBothDates:"handleDates","document.activities":function(e,t){void 0!==t&&this.updateRoutes("activities",!1)},"document.geometry.geom_detail":function(e,t){null===t&&null!==e&&(this.possibleRoutes=null,this.$nextTick(()=>{this.fitMapToDocuments(),this.updateRoutes()}))},routeTitle(){this.updateRoutes("routeTitle",!1)}},methods:{afterLoad(){this.showBothDates=this.document.date_start!==this.document.date_end},updateBbox(e){var t;null!==this.bbox||null!==this.initialExtent||"add"!==this.mode?e.join(",")!==(null===(t=this.bbox)||void 0===t?void 0:t.join(","))&&(this.bbox=e,this.updateRoutes("bbox",!1)):this.bbox=e},fitMapToDocuments(){this.bbox=this.$refs.mapInput.fitMapToDocuments()},updateRoutes(e,t){if(!this.bbox)return e;const i={limit:50,bbox:this.bbox.join(",")};this.routeTitle&&(i.q=this.routeTitle),this.document.activities.length&&(i.act=this.document.activities.join(","));const n=ve["a"].route.getAll(i);return n.then(e=>this.computePossibleRoutes(e.data.documents,e.data.total,t)),n},clearPossibleRoutes(){this.computePossibleRoutes([],0,!1)},computePossibleRoutes(e,t,i){this.showMoreResultsBanner=t!==e.length;const n=e.map(e=>e.document_id);e=[...e,...this.document.associations.routes.filter(e=>!n.includes(e.document_id))],e.sort((e,t)=>this.$documentUtils.getDocumentTitle(e).localeCompare(this.$documentUtils.getDocumentTitle(t))),this.possibleRoutes=e,i&&this.$nextTick(this.fitMapToDocuments)},changeRouteAssociation(e,t){if(!e&&!this.routeIsAssociated(t.document_id)||e&&this.routeIsAssociated(t.document_id))return;const i=this.document.associations.routes;e?(i.push(t),1===i.length?(this.possibleRoutes=[],this.$nextTick(()=>{this.$documentUtils.propagateProperties(this.document,t),this.fitMapToDocuments(),this.updateRoutes("First route",!1)})):this.$documentUtils.propagateProperties(this.document,t)):(this.document.associations.routes=i.filter(e=>e.document_id!==t.document_id),this.document.associations.routes.length||(this.document.geometry.geom=null))},routeIsAssociated(e){return 0!==this.document.associations.routes.filter(t=>t.document_id===e).length},handleDates(){this.showBothDates||(this.document.date_end=this.document.date_start)},beforeSave(){this.handleDates(),this.$refs.qualityField.beforeSave()},showCotometer(){this.$refs.cotometerWindow.show()}}};Oe.render=E;t["default"]=Oe},9636:function(e,t,i){"use strict";i("d9cd")},"9fcc":function(e,t,i){"use strict";i("71a2")},"9ff2":function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7"),i("078b")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";function t(){}function i(e,t,i){for(var n="",o=t+i,a=t;a<o;a+=1)n+=String.fromCharCode(e.getUint8(a));return n}function n(e,t,n,o,a){return"binary"===t.types[e]?new Blob([n.buffer.slice(o,o+a)]):"Uint16"===t.types[e]?n.getUint16(o):i(n,o,a)}function o(e,t){return void 0===e?t:e instanceof Array?(e.push(t),e):[e,t]}function a(e,t,i,a,s,l){var c,r,d,u=t+i,m=t;while(m<u)28===e.getUint8(m)&&2===e.getUint8(m+1)&&(d=e.getUint8(m+2),s&&!s[d]||l&&l[d]||(r=e.getInt16(m+3),c=n(d,a.iptc,e,m+5,r),a.iptc[d]=o(a.iptc[d],c),a.iptcOffsets&&(a.iptcOffsets[d]=m))),m+=1}function s(e,t){return 943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}function l(e,t){var i=e.getUint8(t+7);return i%2!==0&&(i+=1),0===i&&(i=4),i}t.prototype.map={ObjectName:5},t.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},t.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcData=function(e,i,n,o,c){if(!c.disableIptc){var r=i+n;while(i+8<r){if(s(e,i)){var d=l(e,i),u=i+8+d;if(u>r){console.log("Invalid IPTC data: Invalid segment offset.");break}var m=e.getUint16(i+6+d);if(i+m>r){console.log("Invalid IPTC data: Invalid segment size.");break}return o.iptc=new t,c.disableIptcOffsets||(o.iptcOffsets=new t),void a(e,u,m,o,c.includeIptcTags,c.excludeIptcTags||{202:!0})}i+=1}}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=t}))},a725:function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.transform;e.createCanvas=function(t,i,n){if(n&&e.global.OffscreenCanvas)return new OffscreenCanvas(t,i);var o=document.createElement("canvas");return o.width=t,o.height=i,o},e.transform=function(i,n,o,a,s){t.call(e,e.scale(i,n,s),n,o,a,s)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var i,n,o,a,s=t.aspectRatio;if(!s)return t;for(n in i={},t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i.crop=!0,o=e.naturalWidth||e.width,a=e.naturalHeight||e.height,o/a>s?(i.maxWidth=a*s,i.maxHeight=a):(i.maxWidth=o,i.maxHeight=o/s),i},e.drawImage=function(e,t,i,n,o,a,s,l,c){var r=t.getContext("2d");return!1===c.imageSmoothingEnabled?(r.msImageSmoothingEnabled=!1,r.imageSmoothingEnabled=!1):c.imageSmoothingQuality&&(r.imageSmoothingQuality=c.imageSmoothingQuality),r.drawImage(e,i,n,o,a,0,0,s,l),r},e.requiresCanvas=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,i,n){i=i||{},n=n||{};var o,a,s,l,c,r,d,u,m,h,f,p,b=t.getContext||e.requiresCanvas(i)&&!!e.global.HTMLCanvasElement,g=t.naturalWidth||t.width,v=t.naturalHeight||t.height,O=g,j=v;function y(){var e=Math.max((s||O)/O,(l||j)/j);e>1&&(O*=e,j*=e)}function V(){var e=Math.min((o||O)/O,(a||j)/j);e<1&&(O*=e,j*=e)}if(b&&(i=e.getTransformedOptions(t,i,n),d=i.left||0,u=i.top||0,i.sourceWidth?(c=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(d=g-c-i.right)):c=g-d-(i.right||0),i.sourceHeight?(r=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(u=v-r-i.bottom)):r=v-u-(i.bottom||0),O=c,j=r),o=i.maxWidth,a=i.maxHeight,s=i.minWidth,l=i.minHeight,b&&o&&a&&i.crop?(O=o,j=a,f=c/r-o/a,f<0?(r=a*c/o,void 0===i.top&&void 0===i.bottom&&(u=(v-r)/2)):f>0&&(c=o*r/a,void 0===i.left&&void 0===i.right&&(d=(g-c)/2))):((i.contain||i.cover)&&(s=o=o||s,l=a=a||l),i.cover?(V(),y()):(y(),V())),b){if(m=i.pixelRatio,m>1&&(!t.style.width||Math.floor(parseFloat(t.style.width,10))!==Math.floor(g/m))&&(O*=m,j*=m),e.orientationCropBug&&!t.getContext&&(d||u||c!==g||r!==v)&&(f=t,t=e.createCanvas(g,v,!0),e.drawImage(f,t,0,0,g,v,g,v,i)),h=i.downsamplingRatio,h>0&&h<1&&O<c&&j<r)while(c*h>O)p=e.createCanvas(c*h,r*h,!0),e.drawImage(t,p,d,u,c,r,p.width,p.height,i),d=0,u=0,c=p.width,r=p.height,t=p;return p=e.createCanvas(O,j),e.transformCoordinates(p,i,n),m>1&&(p.style.width=p.width/m+"px"),e.drawImage(t,p,d,u,c,r,O,j,i).setTransform(1,0,0,1,0,0),p}return t.width=O,t.height=j,t}}))},ad2d:function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.global;t.fetch&&t.Request&&t.Response&&t.Response.prototype.blob?e.fetchBlob=function(e,i,n){function o(e){return e.blob()}if(t.Promise&&"function"!==typeof i)return fetch(new Request(e,i)).then(o);fetch(new Request(e,n)).then(o).then(i)["catch"]((function(e){i(null,e)}))}:t.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(e.fetchBlob=function(e,i,n){function o(t,i){n=n||{};var o=new XMLHttpRequest;o.open(n.method||"GET",e),n.headers&&Object.keys(n.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.withCredentials="include"===n.credentials,o.responseType="blob",o.onload=function(){t(o.response)},o.onerror=o.onabort=o.ontimeout=function(e){t===i?i(null,e):i(e)},o.send(n.body)}return t.Promise&&"function"!==typeof i?(n=i,new Promise(o)):o(i,i)})}))},d101:function(e,t,i){"use strict";i("d3c5")},d3c5:function(e,t,i){},d428:function(e,t,i){},d9cd:function(e,t,i){},dd4e:function(e,t,i){},e1e4:function(e,t,i){"use strict";i.r(t);var n=i("1786");const o=Object(n["withScopeId"])("data-v-491a6da6");Object(n["pushScopeId"])("data-v-491a6da6");const a={class:"section content"},s={clas:"links"},l=Object(n["createTextVNode"])(" Associations history "),c={"infinite-scroll-disabled":"disableInfiniteSCroll","infinite-scroll-distance":"100"},r={"translate-context":"modification date"},d=Object(n["createTextVNode"])("Modified the"),u=Object(n["createTextVNode"])("contributor"),m=Object(n["createTextVNode"])("Links"),h=Object(n["createVNode"])("th",null,null,-1),f=Object(n["createTextVNode"])("title"),p=Object(n["createTextVNode"])(" : "),b=Object(n["createTextVNode"])("comment"),g=Object(n["createTextVNode"])(" last "),v={key:0},O={key:1},j=Object(n["createTextVNode"])(" empty comment ");Object(n["popScopeId"])();const y=o((e,t,i,y,V,w)=>{const N=Object(n["resolveComponent"])("html-header"),_=Object(n["resolveComponent"])("association-history-link"),k=Object(n["resolveComponent"])("version-link"),D=Object(n["resolveComponent"])("contributor-link"),x=Object(n["resolveComponent"])("document-link"),A=Object(n["resolveComponent"])("diff-link"),C=Object(n["resolveComponent"])("history-link"),B=Object(n["resolveComponent"])("marker-quality"),S=Object(n["resolveComponent"])("colored-icon-document"),T=Object(n["resolveComponent"])("loading-notification"),E=Object(n["resolveDirective"])("translate"),M=Object(n["resolveDirective"])("infinite-scroll");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(N,{title:e.$gettext("Recent changes")},null,8,["title"]),Object(n["createVNode"])("div",s,[Object(n["withDirectives"])(Object(n["createVNode"])(_,{"user-id":w.userId},{default:o(()=>[l],void 0,!0),_:1},8,["user-id"]),[[E]])]),Object(n["withDirectives"])(Object(n["createVNode"])("table",c,[Object(n["createVNode"])("tr",null,[Object(n["withDirectives"])(Object(n["createVNode"])("th",r,[d],512),[[E]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[u],512),[[E]]),Object(n["withDirectives"])(Object(n["createVNode"])("th",null,[m],512),[[E]]),h,Object(n["createVNode"])("th",null,[Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[f],512),[[E]]),p,Object(n["withDirectives"])(Object(n["createVNode"])("span",null,[b],512),[[E]])])]),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(V.feed,(t,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])("tr",{key:i},[Object(n["createVNode"])("td",null,[Object(n["createVNode"])(k,{"document-type":t.document.documentType,id:t.document.document_id,version:t.version_id,lang:t.lang},{default:o(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$dateUtils.toTechnicalString(t.written_at)),1)],void 0,!0),_:2},1032,["document-type","id","version","lang"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(D,{contributor:t.user},null,8,["contributor"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(x,{document:t.document,lang:t.lang},{default:o(()=>[g],void 0,!0),_:2},1032,["document","lang"]),Object(n["createVNode"])(A,{"document-type":t.document.documentType,id:t.document.document_id,lang:t.lang,"version-from":"prev","version-to":t.version_id},null,8,["document-type","id","lang","version-to"]),Object(n["createVNode"])(C,{document:t.document,lang:t.lang},null,8,["document","lang"])]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(B,{quality:t.document.quality},null,8,["quality"]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.lang),1)]),Object(n["createVNode"])("td",null,[Object(n["createVNode"])(S,{"document-type":t.document.documentType},null,8,["document-type"]),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.document.title)+" : ",1),t.comment?(Object(n["openBlock"])(),Object(n["createBlock"])("span",v,Object(n["toDisplayString"])(t.comment),1)):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("span",O,[j],512)),[[E]])])]))),128))],512),[[M,w.load]]),Object(n["createVNode"])(T,{promise:V.promise},null,8,["promise"])])});i("5319");var V=i("487a"),w=i.n(V),N=i("66ba"),_=i("188b"),k={components:{ColoredIconDocument:N["a"]},directives:{infiniteScroll:w.a},data(){return{promise:{},feed:[],endOfFeed:!1}},computed:{userId(){return this.$route.query.u?parseInt(this.$route.query.u):null},loading(){return!!this.promise&&this.promise.loading},disableInfiniteSCroll(){return this.loading||this.endOfFeed},nextQuery(){return this.promise.data?Object.assign({},this.$route.query,{token:this.promise.data.pagination_token}):this.$route.query}},watch:{$route:{handler:"initialize",immediate:!0}},methods:{initialize(){this.feed=[],this.endOfFeed=!1,this.$route.hash?this.$router.replace(this.$route.fullPath.replace("#","?")):this.load()},load(){this.promise&&this.promise.loading||this.endOfFeed||(this.promise=_["a"].getRecentChanges(this.nextQuery).then(this.onLoad))},onLoad(){for(const e of this.promise.data.feed)e.document.documentType=this.$documentUtils.getDocumentType(e.document.type),this.feed.push(e);this.endOfFeed=0===this.promise.data.feed.length,this.$nextTick(this.onScroll)}}};i("d101");k.render=y,k.__scopeId="data-v-491a6da6";t["default"]=k},e716:function(e,t,i){"use strict";i("dd4e")},e915:function(e,t,i){var n,o,a;(function(s){"use strict";o=[i("09b7"),i("9ff2")],n=s,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)})((function(e){"use strict";var t=e.IptcMap.prototype;t.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},t.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},t.getText=function(e){var t=this.get(e),i=this.map[e],n=this.stringValues[i];return n?n[t]:String(t)},t.getAll=function(){var e,t,i={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e],t&&(i[t]=this.getText(t)));return i},t.getName=function(e){return this.tags[e]},function(){var e,i=t.tags,n=t.map||{};for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[i[e]]=Number(e))}()}))},eb5d:function(e,t,i){},fa33:function(e,t,i){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){l(e,t,i[t])}))}return e}i.r(t);var r=function(){function e(t,i,n,a){o(this,e),this.language=t,this.months=i,this.monthsAbbr=n,this.days=a,this.rtl=!1,this.ymd=!1,this.yearSuffix=""}return s(e,[{key:"language",get:function(){return this._language},set:function(e){if("string"!==typeof e)throw new TypeError("Language must be a string");this._language=e}},{key:"months",get:function(){return this._months},set:function(e){if(12!==e.length)throw new RangeError("There must be 12 months for ".concat(this.language," language"));this._months=e}},{key:"monthsAbbr",get:function(){return this._monthsAbbr},set:function(e){if(12!==e.length)throw new RangeError("There must be 12 abbreviated months for ".concat(this.language," language"));this._monthsAbbr=e}},{key:"days",get:function(){return this._days},set:function(e){if(7!==e.length)throw new RangeError("There must be 7 days for ".concat(this.language," language"));this._days=e}}]),e}(),d=new r("English",["January","February","March","April","May","June","July","August","September","October","November","December"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),u={useUtc:!1,getFullYear:function(e){return this.useUtc?e.getUTCFullYear():e.getFullYear()},getMonth:function(e){return this.useUtc?e.getUTCMonth():e.getMonth()},getDate:function(e){return this.useUtc?e.getUTCDate():e.getDate()},getDay:function(e){return this.useUtc?e.getUTCDay():e.getDay()},getHours:function(e){return this.useUtc?e.getUTCHours():e.getHours()},getMinutes:function(e){return this.useUtc?e.getUTCMinutes():e.getMinutes()},setFullYear:function(e,t,i){return this.useUtc?e.setUTCFullYear(t):e.setFullYear(t)},setMonth:function(e,t,i){return this.useUtc?e.setUTCMonth(t):e.setMonth(t)},setDate:function(e,t,i){return this.useUtc?e.setUTCDate(t):e.setDate(t)},compareDates:function(e,t){var i=new Date(e.getTime()),n=new Date(t.getTime());return this.useUtc?(i.setUTCHours(0,0,0,0),n.setUTCHours(0,0,0,0)):(i.setHours(0,0,0,0),n.setHours(0,0,0,0)),i.getTime()===n.getTime()},isValidDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},getDayNameAbbr:function(e,t){if("object"!==n(e))throw TypeError("Invalid Type");return t[this.getDay(e)]},getMonthName:function(e,t){if(!t)throw Error("missing 2nd parameter Months array");if("object"===n(e))return t[this.getMonth(e)];if("number"===typeof e)return t[e];throw TypeError("Invalid type")},getMonthNameAbbr:function(e,t){if(!t)throw Error("missing 2nd paramter Months array");if("object"===n(e))return t[this.getMonth(e)];if("number"===typeof e)return t[e];throw TypeError("Invalid type")},daysInMonth:function(e,t){return/8|3|5|10/.test(t)?30:1===t?(e%4||!(e%100))&&e%400?28:29:31},getNthSuffix:function(e){switch(e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},formatDate:function(e,t,i){i=i||d;var n=this.getFullYear(e),o=this.getMonth(e)+1,a=this.getDate(e),s=t.replace(/dd/,("0"+a).slice(-2)).replace(/d/,a).replace(/yyyy/,n).replace(/yy/,String(n).slice(2)).replace(/MMMM/,this.getMonthName(this.getMonth(e),i.months)).replace(/MMM/,this.getMonthNameAbbr(this.getMonth(e),i.monthsAbbr)).replace(/MM/,("0"+o).slice(-2)).replace(/M(?!a|ä|e)/,o).replace(/su/,this.getNthSuffix(this.getDate(e))).replace(/D(?!e|é|i)/,this.getDayNameAbbr(e,i.days));return s},createDateArray:function(e,t){var i=[];while(e<=t)i.push(new Date(e)),e=this.setDate(new Date(e),this.getDate(new Date(e))+1);return i},validateDateInput:function(e){return null===e||e instanceof Date||"string"===typeof e||"number"===typeof e}},m=function(e){return c({},u,{useUtc:e})},h=c({},u),f={props:{selectedDate:Date,resetTypedDate:[Date],format:[String,Function],translation:Object,inline:Boolean,id:String,name:String,refName:String,openDate:Date,placeholder:String,inputClass:[String,Object,Array],clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,disabled:Boolean,required:Boolean,typeable:Boolean,bootstrapStyling:Boolean,useUtc:Boolean},data:function(){var e=m(this.useUtc);return{input:null,typedDate:!1,utils:e}},computed:{formattedValue:function(){return this.selectedDate?this.typedDate?this.typedDate:"function"===typeof this.format?this.format(this.selectedDate):this.utils.formatDate(new Date(this.selectedDate),this.format,this.translation):null},computedInputClass:function(){return this.bootstrapStyling?"string"===typeof this.inputClass?[this.inputClass,"form-control"].join(" "):c({"form-control":!0},this.inputClass):this.inputClass}},watch:{resetTypedDate:function(){this.typedDate=!1}},methods:{showCalendar:function(){this.$emit("showCalendar")},parseTypedDate:function(e){if([27,13].includes(e.keyCode)&&this.input.blur(),this.typeable){var t=Date.parse(this.input.value);isNaN(t)||(this.typedDate=this.input.value,this.$emit("typedDate",new Date(this.typedDate)))}},inputBlurred:function(){this.typeable&&isNaN(Date.parse(this.input.value))&&(this.clearDate(),this.input.value=null,this.typedDate=null),this.$emit("closeCalendar")},clearDate:function(){this.$emit("clearDate")}},mounted:function(){this.input=this.$el.querySelector("input")}};function p(e,t,i,n,o,a,s,l,c,r){"boolean"!==typeof s&&(c=l,l=s,s=!1);var d,u="function"===typeof i?i.options:i;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),n&&(u._scopeId=n),a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=d):t&&(d=s?function(){t.call(this,r(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),d)if(u.functional){var m=u.render;u.render=function(e,t){return d.call(t),m(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,d):[d]}return i}var b=p;const g=f;var v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"input-group":e.bootstrapStyling}},[e.calendarButton?i("span",{staticClass:"vdp-datepicker__calendar-button",class:{"input-group-prepend":e.bootstrapStyling},style:{"cursor:not-allowed;":e.disabled},on:{click:e.showCalendar}},[i("span",{class:{"input-group-text":e.bootstrapStyling}},[i("i",{class:e.calendarButtonIcon},[e._v("\n        "+e._s(e.calendarButtonIconContent)+"\n        "),e.calendarButtonIcon?e._e():i("span",[e._v("…")])])])]):e._e(),e._v(" "),i("input",{ref:e.refName,class:e.computedInputClass,attrs:{type:e.inline?"hidden":"text",name:e.name,id:e.id,"open-date":e.openDate,placeholder:e.placeholder,"clear-button":e.clearButton,disabled:e.disabled,required:e.required,readonly:!e.typeable,autocomplete:"off"},domProps:{value:e.formattedValue},on:{click:e.showCalendar,keyup:e.parseTypedDate,blur:e.inputBlurred}}),e._v(" "),e.clearButton&&e.selectedDate?i("span",{staticClass:"vdp-datepicker__clear-button",class:{"input-group-append":e.bootstrapStyling},on:{click:function(t){return e.clearDate()}}},[i("span",{class:{"input-group-text":e.bootstrapStyling}},[i("i",{class:e.clearButtonIcon},[e.clearButtonIcon?e._e():i("span",[e._v("×")])])])]):e._e(),e._v(" "),e._t("afterDateInput")],2)},O=[];v._withStripped=!0;const j=void 0,y=void 0,V=void 0,w=!1;var N=b({render:v,staticRenderFns:O},j,g,y,w,V,void 0,void 0),_={props:{showDayView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,fullMonthName:Boolean,allowedToShowView:Function,dayCellContent:{type:Function,default:function(e){return e.date}},disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,mondayFirst:Boolean,useUtc:Boolean},data:function(){var e=m(this.useUtc);return{utils:e}},computed:{daysOfWeek:function(){if(this.mondayFirst){var e=this.translation.days.slice();return e.push(e.shift()),e}return this.translation.days},blankDays:function(){var e=this.pageDate,t=this.useUtc?new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)):new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes());return this.mondayFirst?this.utils.getDay(t)>0?this.utils.getDay(t)-1:6:this.utils.getDay(t)},days:function(){for(var e=this.pageDate,t=[],i=this.useUtc?new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)):new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes()),n=this.utils.daysInMonth(this.utils.getFullYear(i),this.utils.getMonth(i)),o=0;o<n;o++)t.push({date:this.utils.getDate(i),timestamp:i.getTime(),isSelected:this.isSelectedDate(i),isDisabled:this.isDisabledDate(i),isHighlighted:this.isHighlightedDate(i),isHighlightStart:this.isHighlightStart(i),isHighlightEnd:this.isHighlightEnd(i),isToday:this.utils.compareDates(i,new Date),isWeekend:0===this.utils.getDay(i)||6===this.utils.getDay(i),isSaturday:6===this.utils.getDay(i),isSunday:0===this.utils.getDay(i)}),this.utils.setDate(i,this.utils.getDate(i)+1);return t},currMonthName:function(){var e=this.fullMonthName?this.translation.months:this.translation.monthsAbbr;return this.utils.getMonthNameAbbr(this.utils.getMonth(this.pageDate),e)},currYearName:function(){var e=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(e)},isYmd:function(){return this.translation.ymd&&!0===this.translation.ymd},isLeftNavDisabled:function(){return this.isRtl?this.isNextMonthDisabled(this.pageTimestamp):this.isPreviousMonthDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousMonthDisabled(this.pageTimestamp):this.isNextMonthDisabled(this.pageTimestamp)}},methods:{selectDate:function(e){if(e.isDisabled)return this.$emit("selectedDisabled",e),!1;this.$emit("selectDate",e)},getPageMonth:function(){return this.utils.getMonth(this.pageDate)},showMonthCalendar:function(){this.$emit("showMonthCalendar")},changeMonth:function(e){var t=this.pageDate;this.utils.setMonth(t,this.utils.getMonth(t)+e),this.$emit("changedMonth",t)},previousMonth:function(){this.isPreviousMonthDisabled()||this.changeMonth(-1)},isPreviousMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.to)return!1;var e=this.pageDate;return this.utils.getMonth(this.disabledDates.to)>=this.utils.getMonth(e)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(e)},nextMonth:function(){this.isNextMonthDisabled()||this.changeMonth(1)},isNextMonthDisabled:function(){if(!this.disabledDates||!this.disabledDates.from)return!1;var e=this.pageDate;return this.utils.getMonth(this.disabledDates.from)<=this.utils.getMonth(e)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(e)},isSelectedDate:function(e){return this.selectedDate&&this.utils.compareDates(this.selectedDate,e)},isDisabledDate:function(e){var t=this,i=!1;return"undefined"!==typeof this.disabledDates&&("undefined"!==typeof this.disabledDates.dates&&this.disabledDates.dates.forEach((function(n){if(t.utils.compareDates(e,n))return i=!0,!0})),"undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&e<this.disabledDates.to&&(i=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&e>this.disabledDates.from&&(i=!0),"undefined"!==typeof this.disabledDates.ranges&&this.disabledDates.ranges.forEach((function(t){if("undefined"!==typeof t.from&&t.from&&"undefined"!==typeof t.to&&t.to&&e<t.to&&e>t.from)return i=!0,!0})),"undefined"!==typeof this.disabledDates.days&&-1!==this.disabledDates.days.indexOf(this.utils.getDay(e))&&(i=!0),"undefined"!==typeof this.disabledDates.daysOfMonth&&-1!==this.disabledDates.daysOfMonth.indexOf(this.utils.getDate(e))&&(i=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(e)&&(i=!0),i)},isHighlightedDate:function(e){var t=this;if((!this.highlighted||!this.highlighted.includeDisabled)&&this.isDisabledDate(e))return!1;var i=!1;return"undefined"!==typeof this.highlighted&&("undefined"!==typeof this.highlighted.dates&&this.highlighted.dates.forEach((function(n){if(t.utils.compareDates(e,n))return i=!0,!0})),this.isDefined(this.highlighted.from)&&this.isDefined(this.highlighted.to)&&(i=e>=this.highlighted.from&&e<=this.highlighted.to),"undefined"!==typeof this.highlighted.days&&-1!==this.highlighted.days.indexOf(this.utils.getDay(e))&&(i=!0),"undefined"!==typeof this.highlighted.daysOfMonth&&-1!==this.highlighted.daysOfMonth.indexOf(this.utils.getDate(e))&&(i=!0),"function"===typeof this.highlighted.customPredictor&&this.highlighted.customPredictor(e)&&(i=!0),i)},dayClasses:function(e){return{selected:e.isSelected,disabled:e.isDisabled,highlighted:e.isHighlighted,today:e.isToday,weekend:e.isWeekend,sat:e.isSaturday,sun:e.isSunday,"highlight-start":e.isHighlightStart,"highlight-end":e.isHighlightEnd}},isHighlightStart:function(e){return this.isHighlightedDate(e)&&this.highlighted.from instanceof Date&&this.utils.getFullYear(this.highlighted.from)===this.utils.getFullYear(e)&&this.utils.getMonth(this.highlighted.from)===this.utils.getMonth(e)&&this.utils.getDate(this.highlighted.from)===this.utils.getDate(e)},isHighlightEnd:function(e){return this.isHighlightedDate(e)&&this.highlighted.to instanceof Date&&this.utils.getFullYear(this.highlighted.to)===this.utils.getFullYear(e)&&this.utils.getMonth(this.highlighted.to)===this.utils.getMonth(e)&&this.utils.getDate(this.highlighted.to)===this.utils.getDate(e)},isDefined:function(e){return"undefined"!==typeof e&&e}}};const k=_;var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showDayView,expression:"showDayView"}],class:[e.calendarClass,"vdp-datepicker__calendar"],style:e.calendarStyle,on:{mousedown:function(e){e.preventDefault()}}},[e._t("beforeCalendarHeader"),e._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:e.isLeftNavDisabled},on:{click:function(t){e.isRtl?e.nextMonth():e.previousMonth()}}},[e._v("<")]),e._v(" "),i("span",{staticClass:"day__month_btn",class:e.allowedToShowView("month")?"up":"",on:{click:e.showMonthCalendar}},[e._v(e._s(e.isYmd?e.currYearName:e.currMonthName)+" "+e._s(e.isYmd?e.currMonthName:e.currYearName))]),e._v(" "),i("span",{staticClass:"next",class:{disabled:e.isRightNavDisabled},on:{click:function(t){e.isRtl?e.previousMonth():e.nextMonth()}}},[e._v(">")])]),e._v(" "),i("div",{class:e.isRtl?"flex-rtl":""},[e._l(e.daysOfWeek,(function(t){return i("span",{key:t.timestamp,staticClass:"cell day-header"},[e._v(e._s(t))])})),e._v(" "),e.blankDays>0?e._l(e.blankDays,(function(e){return i("span",{key:e.timestamp,staticClass:"cell day blank"})})):e._e(),e._l(e.days,(function(t){return i("span",{key:t.timestamp,staticClass:"cell day",class:e.dayClasses(t),domProps:{innerHTML:e._s(e.dayCellContent(t))},on:{click:function(i){return e.selectDate(t)}}})}))],2)],2)},x=[];D._withStripped=!0;const A=void 0,C=void 0,B=void 0,S=!1;var T=b({render:D,staticRenderFns:x},A,k,C,S,B,void 0,void 0),E={props:{showMonthView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},data:function(){var e=m(this.useUtc);return{utils:e}},computed:{months:function(){for(var e=this.pageDate,t=[],i=this.useUtc?new Date(Date.UTC(e.getUTCFullYear(),0,e.getUTCDate())):new Date(e.getFullYear(),0,e.getDate(),e.getHours(),e.getMinutes()),n=0;n<12;n++)t.push({month:this.utils.getMonthName(n,this.translation.months),timestamp:i.getTime(),isSelected:this.isSelectedMonth(i),isDisabled:this.isDisabledMonth(i)}),this.utils.setMonth(i,this.utils.getMonth(i)+1);return t},pageYearName:function(){var e=this.translation.yearSuffix;return"".concat(this.utils.getFullYear(this.pageDate)).concat(e)},isLeftNavDisabled:function(){return this.isRtl?this.isNextYearDisabled(this.pageTimestamp):this.isPreviousYearDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousYearDisabled(this.pageTimestamp):this.isNextYearDisabled(this.pageTimestamp)}},methods:{selectMonth:function(e){if(e.isDisabled)return!1;this.$emit("selectMonth",e)},changeYear:function(e){var t=this.pageDate;this.utils.setFullYear(t,this.utils.getFullYear(t)+e),this.$emit("changedYear",t)},previousYear:function(){this.isPreviousYearDisabled()||this.changeYear(-1)},isPreviousYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.to)&&this.utils.getFullYear(this.disabledDates.to)>=this.utils.getFullYear(this.pageDate)},nextYear:function(){this.isNextYearDisabled()||this.changeYear(1)},isNextYearDisabled:function(){return!(!this.disabledDates||!this.disabledDates.from)&&this.utils.getFullYear(this.disabledDates.from)<=this.utils.getFullYear(this.pageDate)},showYearCalendar:function(){this.$emit("showYearCalendar")},isSelectedMonth:function(e){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(e)&&this.utils.getMonth(this.selectedDate)===this.utils.getMonth(e)},isDisabledMonth:function(e){var t=!1;return"undefined"!==typeof this.disabledDates&&("undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&(this.utils.getMonth(e)<this.utils.getMonth(this.disabledDates.to)&&this.utils.getFullYear(e)<=this.utils.getFullYear(this.disabledDates.to)||this.utils.getFullYear(e)<this.utils.getFullYear(this.disabledDates.to))&&(t=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&(this.utils.getMonth(e)>this.utils.getMonth(this.disabledDates.from)&&this.utils.getFullYear(e)>=this.utils.getFullYear(this.disabledDates.from)||this.utils.getFullYear(e)>this.utils.getFullYear(this.disabledDates.from))&&(t=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(e)&&(t=!0),t)}}};const M=E;var I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMonthView,expression:"showMonthView"}],class:[e.calendarClass,"vdp-datepicker__calendar"],style:e.calendarStyle,on:{mousedown:function(e){e.preventDefault()}}},[e._t("beforeCalendarHeader"),e._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:e.isLeftNavDisabled},on:{click:function(t){e.isRtl?e.nextYear():e.previousYear()}}},[e._v("<")]),e._v(" "),i("span",{staticClass:"month__year_btn",class:e.allowedToShowView("year")?"up":"",on:{click:e.showYearCalendar}},[e._v(e._s(e.pageYearName))]),e._v(" "),i("span",{staticClass:"next",class:{disabled:e.isRightNavDisabled},on:{click:function(t){e.isRtl?e.previousYear():e.nextYear()}}},[e._v(">")])]),e._v(" "),e._l(e.months,(function(t){return i("span",{key:t.timestamp,staticClass:"cell month",class:{selected:t.isSelected,disabled:t.isDisabled},on:{click:function(i){return i.stopPropagation(),e.selectMonth(t)}}},[e._v(e._s(t.month))])}))],2)},$=[];I._withStripped=!0;const P=void 0,F=void 0,U=void 0,R=!1;var L=b({render:I,staticRenderFns:$},P,M,F,R,U,void 0,void 0),Y={props:{showYearView:Boolean,selectedDate:Date,pageDate:Date,pageTimestamp:Number,disabledDates:Object,highlighted:Object,calendarClass:[String,Object,Array],calendarStyle:Object,translation:Object,isRtl:Boolean,allowedToShowView:Function,useUtc:Boolean},computed:{years:function(){for(var e=this.pageDate,t=[],i=this.useUtc?new Date(Date.UTC(10*Math.floor(e.getUTCFullYear()/10),e.getUTCMonth(),e.getUTCDate())):new Date(10*Math.floor(e.getFullYear()/10),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()),n=0;n<10;n++)t.push({year:this.utils.getFullYear(i),timestamp:i.getTime(),isSelected:this.isSelectedYear(i),isDisabled:this.isDisabledYear(i)}),this.utils.setFullYear(i,this.utils.getFullYear(i)+1);return t},getPageDecade:function(){var e=10*Math.floor(this.utils.getFullYear(this.pageDate)/10),t=e+9,i=this.translation.yearSuffix;return"".concat(e," - ").concat(t).concat(i)},isLeftNavDisabled:function(){return this.isRtl?this.isNextDecadeDisabled(this.pageTimestamp):this.isPreviousDecadeDisabled(this.pageTimestamp)},isRightNavDisabled:function(){return this.isRtl?this.isPreviousDecadeDisabled(this.pageTimestamp):this.isNextDecadeDisabled(this.pageTimestamp)}},data:function(){var e=m(this.useUtc);return{utils:e}},methods:{selectYear:function(e){if(e.isDisabled)return!1;this.$emit("selectYear",e)},changeYear:function(e){var t=this.pageDate;this.utils.setFullYear(t,this.utils.getFullYear(t)+e),this.$emit("changedDecade",t)},previousDecade:function(){if(this.isPreviousDecadeDisabled())return!1;this.changeYear(-10)},isPreviousDecadeDisabled:function(){if(!this.disabledDates||!this.disabledDates.to)return!1;var e=this.utils.getFullYear(this.disabledDates.to),t=10*Math.floor(this.utils.getFullYear(this.pageDate)/10)-1;return e>t},nextDecade:function(){if(this.isNextDecadeDisabled())return!1;this.changeYear(10)},isNextDecadeDisabled:function(){if(!this.disabledDates||!this.disabledDates.from)return!1;var e=this.utils.getFullYear(this.disabledDates.from),t=10*Math.ceil(this.utils.getFullYear(this.pageDate)/10);return e<t},isSelectedYear:function(e){return this.selectedDate&&this.utils.getFullYear(this.selectedDate)===this.utils.getFullYear(e)},isDisabledYear:function(e){var t=!1;return!("undefined"===typeof this.disabledDates||!this.disabledDates)&&("undefined"!==typeof this.disabledDates.to&&this.disabledDates.to&&this.utils.getFullYear(e)<this.utils.getFullYear(this.disabledDates.to)&&(t=!0),"undefined"!==typeof this.disabledDates.from&&this.disabledDates.from&&this.utils.getFullYear(e)>this.utils.getFullYear(this.disabledDates.from)&&(t=!0),"function"===typeof this.disabledDates.customPredictor&&this.disabledDates.customPredictor(e)&&(t=!0),t)}}};const q=Y;var H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showYearView,expression:"showYearView"}],class:[e.calendarClass,"vdp-datepicker__calendar"],style:e.calendarStyle,on:{mousedown:function(e){e.preventDefault()}}},[e._t("beforeCalendarHeader"),e._v(" "),i("header",[i("span",{staticClass:"prev",class:{disabled:e.isLeftNavDisabled},on:{click:function(t){e.isRtl?e.nextDecade():e.previousDecade()}}},[e._v("<")]),e._v(" "),i("span",[e._v(e._s(e.getPageDecade))]),e._v(" "),i("span",{staticClass:"next",class:{disabled:e.isRightNavDisabled},on:{click:function(t){e.isRtl?e.previousDecade():e.nextDecade()}}},[e._v(">")])]),e._v(" "),e._l(e.years,(function(t){return i("span",{key:t.timestamp,staticClass:"cell year",class:{selected:t.isSelected,disabled:t.isDisabled},on:{click:function(i){return i.stopPropagation(),e.selectYear(t)}}},[e._v(e._s(t.year))])}))],2)},G=[];H._withStripped=!0;const W=void 0,Q=void 0,z=void 0,J=!1;var X=b({render:H,staticRenderFns:G},W,q,Q,J,z,void 0,void 0),K={components:{DateInput:N,PickerDay:T,PickerMonth:L,PickerYear:X},props:{value:{validator:function(e){return h.validateDateInput(e)}},name:String,refName:String,id:String,format:{type:[String,Function],default:"dd MMM yyyy"},language:{type:Object,default:function(){return d}},openDate:{validator:function(e){return h.validateDateInput(e)}},dayCellContent:Function,fullMonthName:Boolean,disabledDates:Object,highlighted:Object,placeholder:String,inline:Boolean,calendarClass:[String,Object,Array],inputClass:[String,Object,Array],wrapperClass:[String,Object,Array],mondayFirst:Boolean,clearButton:Boolean,clearButtonIcon:String,calendarButton:Boolean,calendarButtonIcon:String,calendarButtonIconContent:String,bootstrapStyling:Boolean,initialView:String,disabled:Boolean,required:Boolean,typeable:Boolean,useUtc:Boolean,minimumView:{type:String,default:"day"},maximumView:{type:String,default:"year"}},data:function(){var e=this.openDate?new Date(this.openDate):new Date,t=m(this.useUtc),i=t.setDate(e,1);return{pageTimestamp:i,selectedDate:null,showDayView:!1,showMonthView:!1,showYearView:!1,calendarHeight:0,resetTypedDate:new Date,utils:t}},watch:{value:function(e){this.setValue(e)},openDate:function(){this.setPageDate()},initialView:function(){this.setInitialView()}},computed:{computedInitialView:function(){return this.initialView?this.initialView:this.minimumView},pageDate:function(){return new Date(this.pageTimestamp)},translation:function(){return this.language},calendarStyle:function(){return{position:this.isInline?"static":void 0}},isOpen:function(){return this.showDayView||this.showMonthView||this.showYearView},isInline:function(){return!!this.inline},isRtl:function(){return!0===this.translation.rtl}},methods:{resetDefaultPageDate:function(){null!==this.selectedDate?this.setPageDate(this.selectedDate):this.setPageDate()},showCalendar:function(){return!this.disabled&&!this.isInline&&(this.isOpen?this.close(!0):void this.setInitialView())},setInitialView:function(){var e=this.computedInitialView;if(!this.allowedToShowView(e))throw new Error("initialView '".concat(this.initialView,"' cannot be rendered based on minimum '").concat(this.minimumView,"' and maximum '").concat(this.maximumView,"'"));switch(e){case"year":this.showYearCalendar();break;case"month":this.showMonthCalendar();break;default:this.showDayCalendar();break}},allowedToShowView:function(e){var t=["day","month","year"],i=t.indexOf(this.minimumView),n=t.indexOf(this.maximumView),o=t.indexOf(e);return o>=i&&o<=n},showDayCalendar:function(){return!!this.allowedToShowView("day")&&(this.close(),this.showDayView=!0,!0)},showMonthCalendar:function(){return!!this.allowedToShowView("month")&&(this.close(),this.showMonthView=!0,!0)},showYearCalendar:function(){return!!this.allowedToShowView("year")&&(this.close(),this.showYearView=!0,!0)},setDate:function(e){var t=new Date(e);this.selectedDate=t,this.setPageDate(t),this.$emit("selected",t),this.$emit("input",t)},clearDate:function(){this.selectedDate=null,this.setPageDate(),this.$emit("selected",null),this.$emit("input",null),this.$emit("cleared")},selectDate:function(e){this.setDate(e.timestamp),this.isInline||this.close(!0),this.resetTypedDate=new Date},selectDisabledDate:function(e){this.$emit("selectedDisabled",e)},selectMonth:function(e){var t=new Date(e.timestamp);this.allowedToShowView("day")?(this.setPageDate(t),this.$emit("changedMonth",e),this.showDayCalendar()):this.selectDate(e)},selectYear:function(e){var t=new Date(e.timestamp);this.allowedToShowView("month")?(this.setPageDate(t),this.$emit("changedYear",e),this.showMonthCalendar()):this.selectDate(e)},setValue:function(e){if("string"===typeof e||"number"===typeof e){var t=new Date(e);e=isNaN(t.valueOf())?null:t}if(!e)return this.setPageDate(),void(this.selectedDate=null);this.selectedDate=e,this.setPageDate(e)},setPageDate:function(e){e||(e=this.openDate?new Date(this.openDate):new Date),this.pageTimestamp=this.utils.setDate(new Date(e),1)},handleChangedMonthFromDayPicker:function(e){this.setPageDate(e),this.$emit("changedMonth",e)},setTypedDate:function(e){this.setDate(e.getTime())},close:function(e){this.showDayView=this.showMonthView=this.showYearView=!1,this.isInline||(e&&this.$emit("closed"),document.removeEventListener("click",this.clickOutside,!1))},init:function(){this.value&&this.setValue(this.value),this.isInline&&this.setInitialView()}},mounted:function(){this.init()}},Z="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function ee(e){return function(e,t){return ne(e,t)}}var te=document.head||document.getElementsByTagName("head")[0],ie={};function ne(e,t){var i=Z?t.media||"default":e,n=ie[i]||(ie[i]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);var o=t.source;if(t.map&&(o+="\n/*# sourceURL="+t.map.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),te.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(o),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{var a=n.ids.size-1,s=document.createTextNode(o),l=n.element.childNodes;l[a]&&n.element.removeChild(l[a]),l.length?n.element.insertBefore(s,l[a]):n.element.appendChild(s)}}}var oe=ee;const ae=K;var se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vdp-datepicker",class:[e.wrapperClass,e.isRtl?"rtl":""]},[i("date-input",{attrs:{selectedDate:e.selectedDate,resetTypedDate:e.resetTypedDate,format:e.format,translation:e.translation,inline:e.inline,id:e.id,name:e.name,refName:e.refName,openDate:e.openDate,placeholder:e.placeholder,inputClass:e.inputClass,typeable:e.typeable,clearButton:e.clearButton,clearButtonIcon:e.clearButtonIcon,calendarButton:e.calendarButton,calendarButtonIcon:e.calendarButtonIcon,calendarButtonIconContent:e.calendarButtonIconContent,disabled:e.disabled,required:e.required,bootstrapStyling:e.bootstrapStyling,"use-utc":e.useUtc},on:{showCalendar:e.showCalendar,closeCalendar:e.close,typedDate:e.setTypedDate,clearDate:e.clearDate}},[e._t("afterDateInput",null,{slot:"afterDateInput"})],2),e._v(" "),e.allowedToShowView("day")?i("picker-day",{attrs:{pageDate:e.pageDate,selectedDate:e.selectedDate,showDayView:e.showDayView,fullMonthName:e.fullMonthName,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,highlighted:e.highlighted,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,pageTimestamp:e.pageTimestamp,isRtl:e.isRtl,mondayFirst:e.mondayFirst,dayCellContent:e.dayCellContent,"use-utc":e.useUtc},on:{changedMonth:e.handleChangedMonthFromDayPicker,selectDate:e.selectDate,showMonthCalendar:e.showMonthCalendar,selectedDisabled:e.selectDisabledDate}},[e._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):e._e(),e._v(" "),e.allowedToShowView("month")?i("picker-month",{attrs:{pageDate:e.pageDate,selectedDate:e.selectedDate,showMonthView:e.showMonthView,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,isRtl:e.isRtl,"use-utc":e.useUtc},on:{selectMonth:e.selectMonth,showYearCalendar:e.showYearCalendar,changedYear:e.setPageDate}},[e._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):e._e(),e._v(" "),e.allowedToShowView("year")?i("picker-year",{attrs:{pageDate:e.pageDate,selectedDate:e.selectedDate,showYearView:e.showYearView,allowedToShowView:e.allowedToShowView,disabledDates:e.disabledDates,calendarClass:e.calendarClass,calendarStyle:e.calendarStyle,translation:e.translation,isRtl:e.isRtl,"use-utc":e.useUtc},on:{selectYear:e.selectYear,changedDecade:e.setPageDate}},[e._t("beforeCalendarHeader",null,{slot:"beforeCalendarHeader"})],2):e._e()],1)},le=[];se._withStripped=!0;const ce=function(e){e&&e("data-v-64ca2bb5_0",{source:".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n",map:{version:3,sources:["Datepicker.vue"],names:[],mappings:"AAAA;EACE,cAAc;AAChB;AACA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;AACA;EACE,sBAAsB;AACxB;AACA;EACE,kBAAkB;EAClB,YAAY;EACZ,gBAAgB;EAChB,YAAY;EACZ,sBAAsB;AACxB;AACA;EACE,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,yBAAyB;EACzB,WAAW;AACb;AACA;;EAEE,0BAA0B;EAC1B,WAAW;EACX,qBAAqB;EACrB,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,4CAA4C;EAC5C,6BAA6B;AAC/B;AACA;EACE,6BAA6B;EAC7B,iBAAiB;AACnB;AACA;EACE,6BAA6B;AAC/B;AACA;EACE,4BAA4B;EAC5B,gBAAgB;AAClB;AACA;EACE,4BAA4B;AAC9B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,eAAe;AACjB;AACA;EACE,aAAa;EACb,cAAc;EACd,eAAe;AACjB;AACA;EACE,qBAAqB;EACrB,cAAc;EACd,0BAA0B;EAC1B,YAAY;EACZ,iBAAiB;EACjB,kBAAkB;EAClB,sBAAsB;EACtB,6BAA6B;AAC/B;AACA;;;EAGE,eAAe;AACjB;AACA;;;EAGE,sBAAsB;AACxB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;AAChB;AACA;EACE,WAAW;AACb;AACA;EACE,mBAAmB;AACrB;AACA;EACE,cAAc;EACd,mBAAmB;EACnB,eAAe;AACjB;AACA;EACE,mBAAmB;AACrB;AACA;;EAEE,cAAc;AAChB;AACA;;EAEE,eAAe;EACf,kBAAkB;AACpB;AACA;;EAEE,WAAW;EACX,eAAe;AACjB",file:"Datepicker.vue",sourcesContent:[".rtl {\n  direction: rtl;\n}\n.vdp-datepicker {\n  position: relative;\n  text-align: left;\n}\n.vdp-datepicker * {\n  box-sizing: border-box;\n}\n.vdp-datepicker__calendar {\n  position: absolute;\n  z-index: 100;\n  background: #fff;\n  width: 300px;\n  border: 1px solid #ccc;\n}\n.vdp-datepicker__calendar header {\n  display: block;\n  line-height: 40px;\n}\n.vdp-datepicker__calendar header span {\n  display: inline-block;\n  text-align: center;\n  width: 71.42857142857143%;\n  float: left;\n}\n.vdp-datepicker__calendar header .prev,\n.vdp-datepicker__calendar header .next {\n  width: 14.285714285714286%;\n  float: left;\n  text-indent: -10000px;\n  position: relative;\n}\n.vdp-datepicker__calendar header .prev:after,\n.vdp-datepicker__calendar header .next:after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border: 6px solid transparent;\n}\n.vdp-datepicker__calendar header .prev:after {\n  border-right: 10px solid #000;\n  margin-left: -5px;\n}\n.vdp-datepicker__calendar header .prev.disabled:after {\n  border-right: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .next:after {\n  border-left: 10px solid #000;\n  margin-left: 5px;\n}\n.vdp-datepicker__calendar header .next.disabled:after {\n  border-left: 10px solid #ddd;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled),\n.vdp-datepicker__calendar header .next:not(.disabled),\n.vdp-datepicker__calendar header .up:not(.disabled) {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar header .prev:not(.disabled):hover,\n.vdp-datepicker__calendar header .next:not(.disabled):hover,\n.vdp-datepicker__calendar header .up:not(.disabled):hover {\n  background: #eee;\n}\n.vdp-datepicker__calendar .disabled {\n  color: #ddd;\n  cursor: default;\n}\n.vdp-datepicker__calendar .flex-rtl {\n  display: flex;\n  width: inherit;\n  flex-wrap: wrap;\n}\n.vdp-datepicker__calendar .cell {\n  display: inline-block;\n  padding: 0 5px;\n  width: 14.285714285714286%;\n  height: 40px;\n  line-height: 40px;\n  text-align: center;\n  vertical-align: middle;\n  border: 1px solid transparent;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year {\n  cursor: pointer;\n}\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n  border: 1px solid #4bd;\n}\n.vdp-datepicker__calendar .cell.selected {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected:hover {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.selected.highlighted {\n  background: #4bd;\n}\n.vdp-datepicker__calendar .cell.highlighted {\n  background: #cae5ed;\n}\n.vdp-datepicker__calendar .cell.highlighted.disabled {\n  color: #a3a3a3;\n}\n.vdp-datepicker__calendar .cell.grey {\n  color: #888;\n}\n.vdp-datepicker__calendar .cell.grey:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header {\n  font-size: 75%;\n  white-space: nowrap;\n  cursor: inherit;\n}\n.vdp-datepicker__calendar .cell.day-header:hover {\n  background: inherit;\n}\n.vdp-datepicker__calendar .month,\n.vdp-datepicker__calendar .year {\n  width: 33.333%;\n}\n.vdp-datepicker__clear-button,\n.vdp-datepicker__calendar-button {\n  cursor: pointer;\n  font-style: normal;\n}\n.vdp-datepicker__clear-button.disabled,\n.vdp-datepicker__calendar-button.disabled {\n  color: #999;\n  cursor: default;\n}\n"]},media:void 0})},re=void 0,de=void 0,ue=!1;var me=b({render:se,staticRenderFns:le},ce,ae,re,ue,de,oe,void 0);t["default"]=me},fadd:function(e,t,i){"use strict";i.r(t);var n=i("1786");const o={class:"columns is-multiline"},a={class:"column is-6"},s={key:0,class:"column is-6 has-text-centered"},l={class:"field"},c={class:"file is-centered"},r={class:"file-label"},d={class:"file-icon"},u={class:"file-label"},m=Object(n["createTextVNode"])(" Upload a new version "),h={class:"columns is-multiline"},f={class:"columns is-multiline"},p={class:"columns is-multiline"};function b(e,t,i,b,g,v){const O=Object(n["resolveComponent"])("form-field"),j=Object(n["resolveComponent"])("fa-icon"),y=Object(n["resolveComponent"])("form-section"),V=Object(n["resolveComponent"])("map-input-row"),w=Object(n["resolveComponent"])("quality-field"),N=Object(n["resolveComponent"])("associations-input-row"),_=Object(n["resolveComponent"])("edition-container"),k=Object(n["resolveDirective"])("translate");return Object(n["openBlock"])(),Object(n["createBlock"])(_,{mode:e.mode,document:e.document,"is-loading":e.saving||g.uploadingNewFile,onSave:e.save},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(y,{title:e.$gettext("general informations"),"sub-title":e.$gettext("Title, activity and characteristics of the picture")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(O,{document:e.document,field:e.fields.title},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-narrow",document:e.document,field:e.fields.image_type},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.activities},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.author},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-narrow",document:e.document,field:e.fields.date_time},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.categories},null,8,["document","field"]),Object(n["createVNode"])("div",a,[Object(n["createVNode"])(O,{"no-wrapper":"",document:e.document,field:e.fields.filename},null,8,["document","field"]),Object(n["createVNode"])(O,{"no-wrapper":"",document:e.document,field:e.fields.file_size},null,8,["document","field"]),Object(n["createVNode"])(O,{"no-wrapper":"",document:e.document,field:e.fields.height},null,8,["document","field"]),Object(n["createVNode"])(O,{"no-wrapper":"",document:e.document,field:e.fields.width},null,8,["document","field"])]),"edit"===e.mode&&e.document?(Object(n["openBlock"])(),Object(n["createBlock"])("div",s,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("label",r,[Object(n["createVNode"])("input",{class:"file-input",type:"file",name:"resume",onChange:t[1]||(t[1]=(...e)=>v.onFileChange&&v.onFileChange(...e)),accept:"image/*"},null,32),Object(n["createVNode"])("span",{class:["file-cta button",{"is-loading":g.uploadingNewFile}]},[Object(n["createVNode"])("span",d,[Object(n["createVNode"])(j,{icon:"upload"})]),Object(n["withDirectives"])(Object(n["createVNode"])("span",u,[m],512),[[k]])],2)])])]),Object(n["createVNode"])("img",{src:g.newVersionSource?g.newVersionSource:v.getImageUrl(e.document)},null,8,["src"])])):Object(n["createCommentVNode"])("",!0)])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("geolocation"),"sub-title":e.$gettext("Precise localisation of the shooting")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",h,[Object(n["createVNode"])(O,{class:"is-6",document:e.document,field:e.fields.elevation},null,8,["document","field"])]),Object(n["createVNode"])(V,{document:e.document,ref:"map"},null,8,["document"])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("camera settings"),"sub-title":e.$gettext("Parameters of the Digital Camera")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",f,[Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.camera_name},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.fnumber},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.focal_length},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.exposure_time},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-4",document:e.document,field:e.fields.iso_speed},null,8,["document","field"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("Detailed information"),"sub-title":e.$gettext("Open fields to detail the picture's context")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])("div",p,[Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.summary},null,8,["document","field"]),Object(n["createVNode"])(O,{class:"is-12",document:e.document,field:e.fields.description},null,8,["document","field"]),Object(n["createVNode"])(w,{ref:"qualityField",class:"is-4",document:e.document},null,8,["document"])])],void 0,!0),_:1},8,["title","sub-title"]),Object(n["createVNode"])(y,{title:e.$gettext("associations"),"sub-title":e.$gettext("Articles, waypoints, routes or books to be linked.")},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(N,{document:e.document,field:e.fields.articles},null,8,["document","field"]),Object(n["createVNode"])(N,{document:e.document,field:e.fields.waypoints},null,8,["document","field"]),Object(n["createVNode"])(N,{document:e.document,field:e.fields.routes},null,8,["document","field"]),Object(n["createVNode"])(N,{document:e.document,field:e.fields.books},null,8,["document","field"])],void 0,!0),_:1},8,["title","sub-title"])],void 0,!0),_:1},8,["mode","document","is-loading","onSave"])}var g=i("1784"),v=i("e952"),O=i("a9b2"),j={mixins:[g["a"]],data(){return{newVersionSource:null,uploadingNewFile:!1}},watch:{"document.geometry.geom":function(e,t){null===t&&null!==e&&this.$nextTick(()=>{this.$refs.map.fitMapToDocuments()})}},methods:{getImageUrl:v["a"].getMedium,beforeSave(){this.$refs.qualityField.beforeSave()},onFileChange(e){const t=e.target.files[0];t&&(this.uploadingNewFile=!0,Object(O["a"])(t,void 0,e=>{this.newVersionSource=e},()=>{},e=>{this.uploadingNewFile=!1,e.geometry&&(e.geometry.version=this.document.geometry.version),Object.assign(this.document,e)},()=>{this.uploadingNewFile=!1}),e.target.value="")}}};j.render=b;t["default"]=j},fbd1:function(e,t,i){e.exports=i("09b7"),i("a725"),i("078b"),i("ad2d"),i("77a1"),i("7569"),i("9ff2"),i("e915"),i("79ba")}}]);
//# sourceMappingURL=wiki-tools.8b0f5eb3.js.map